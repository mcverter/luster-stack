<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Protecting Data Using Client-Side
         			Encryption - Amazon Simple Storage Service
      </title>
      <meta name="viewport" content="width=device-width, initial-scale=1" />
      <link rel="home" href="#top" />
      <link rel="up" href="UsingEncryption.html" title="Protecting Data Using Encryption" />
      <link rel="prev" href="ServerSideEncryptionCustomerKeysSSEUsingRESTAPI.html" title="Specifying Server-Side Encryption with Customer-Provided Encryption Keys Using the REST API" />
      <link rel="next" href="Versioning.html" title="Using Versioning" />
      <meta name="description" content="Protect data using client-side encryption." />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="Amazon Simple Storage Service" />
      <meta name="guide" content="Developer Guide" />
      <meta name="guide-locale" content="en_us" />
      <link rel="icon" type="image/ico" href="/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico" />
      <link rel="canonical" href="https://docs.aws.amazon.com/AmazonS3/latest/dev/UsingClientSideEncryption.html" />
      <link rel="stylesheet" type="text/css" href="/css/jquery-ui.min.css" />
      <link rel="stylesheet" type="text/css" href="/font/css/font-awesome.min.css" />
      <link rel="stylesheet" type="text/css" href="/css/google-font.css" />
      <link id="code-style" rel="stylesheet" type="text/css" href="/css/code/light.css" />
      <link rel="stylesheet" type="text/css" href="/css/jquery-ui.theme.css" />
      <link rel="stylesheet" type="text/css" href="/css/colorbox.css" />
      <link rel="stylesheet" type="text/css" href="/css/awsdocs.css?v=20170615" /><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      <div xmlns:db="http://docbook.org/ns/docbook" id="aws-nav" class="aws-nav-header">
         <div class="aws-nav-header-left">
            <div id="aws-nav-flyout-trigger" class="aws-nav-flyout-trigger"><i class="fa fa-bars fa-2x"></i></div>
            <div class="aws-nav-logo">
               <!--aws_logo_105x39.png--><a href="http://aws.amazon.com"><img src="/images/aws_logo_105x39.png" alt="Amazon Web Services" /></a></div>
         </div>
         <div id="aws-nav-header-right" class="aws-nav-header-right">
            <div class="aws-nav-cta-button-outer"><a id="aws-nav-cta-button" class="aws-nav-button" href="https://console.aws.amazon.com/console/home">Sign In to the Console</a></div>
            <div class="aws-nav-popover-trigger" data-dropdown="aws-nav-dropdown-lang"><select id="languageSelection" onchange="SelectLanguage()">
                  <option value="/de_de/AmazonS3/latest/dev/UsingClientSideEncryption.html">Deutsch</option>
                  <option value="/en_us/AmazonS3/latest/dev/UsingClientSideEncryption.html" selected="selected">English</option>
                  <option value="/es_es/AmazonS3/latest/dev/UsingClientSideEncryption.html">Español</option>
                  <option value="/fr_fr/AmazonS3/latest/dev/UsingClientSideEncryption.html">Français</option>
                  <option value="/it_it/AmazonS3/latest/dev/UsingClientSideEncryption.html">Italiano</option>
                  <option value="/ja_jp/AmazonS3/latest/dev/UsingClientSideEncryption.html">日本語</option>
                  <option value="/ko_kr/AmazonS3/latest/dev/UsingClientSideEncryption.html">한국어</option>
                  <option value="/pt_br/AmazonS3/latest/dev/UsingClientSideEncryption.html">Português</option>
                  <option value="/zh_cn/AmazonS3/latest/dev/UsingClientSideEncryption.html">中文 (简体)</option>
                  <option value="/zh_tw/AmazonS3/latest/dev/UsingClientSideEncryption.html">中文 (繁體)</option></select></div><a class="btn btn-rss-link" id="rss-link-top" target="_blank" href="s3-dev-guide-rss-updates.rss" title="View RSS Feed"></a><a class="btn btn-kindle-link" id="kindle-link-top" target="_blank" href="http://www.amazon.com/dp/B0763Z4YVV" title="Open Kindle"></a><a class="btn btn-pdf-link" id="pdf-link-top" href="s3-dg.pdf#UsingClientSideEncryption" target="_blank" title="Open PDF"></a><a class="btn btn-github-link" id="github-link-top" href="https://github.com/awsdocs/amazon-s3-developer-guide/tree/master/doc_source/UsingClientSideEncryption.md" target="_blank" title="Edit on GitHub"></a><div id="aws-nav-quicklinks-separator" class="aws-nav-quicklinks-separator">
               <div class="aws-nav-left"></div>
               <div class="aws-nav-right"></div>
            </div>
         </div>
         <div xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" id="topnav-flyout-menu-container">
            <ul id="topnav-flyout-menu"><script id="flyout-item-template" type="text/x-handlebars-template">
                    {{#flyoutList}}

                        {{#if topTarget}}
                            <li class="awsdocs-flyout-link-wrapper"><a href="{{topTarget}}">{{listItem}}</a></li>
                        {{else}}
                            <li>{{listItem}}
                                {{#if subList}}
                                <ul>
                                    {{#subList}}
                                    <li class="awsdocs-flyout-link-wrapper"><a href="{{target}}">{{text}}</a></li>
                                    {{/subList}}
                                </ul>
                                {{/if}}
                            </li>
                        {{/if}}

                    {{/flyoutList}}
                </script></ul>
            <div id="topnav-flyout-menu-spacer"></div>
         </div>
      </div>
      <div id="content-container">
         <div id="left-column">
            <div id="left-col-header">
               <div xmlns:db="http://docbook.org/ns/docbook" id="left-col-top-content">
                  <div id="service-name">Amazon Simple Storage Service </div>
                  <div id="search"><i id="search-icon" class="fa fa-search fa-2x"></i></div>
                  <div id="guide-info">Developer Guide (API Version 2006-03-01)
                     <div id="content-button"><i id="toggle-contents" class="fa fa-bars"></i></div>
                  </div>
               </div>
               <form id="finegrainedSearch" method="get" onsubmit="return searchFormSubmit(this);" action="/search/doc-search.html">
                  <div id="search-form"><select id="search-select" name="searchPath">
                        <option value="all">Entire Site</option>
                        <option value="AWSMarketplace">AMIs from AWS Marketplace</option>
                        <option value="amis">AMIs from All Sources</option>
                        <option value="articles">Articles &amp; Tutorials</option>
                        <option value="products_and_info">AWS Product Information</option>
                        <option value="case_studies">Case Studies</option>
                        <option value="customerapps">Customer Apps</option>
                        <option value="documentation">Documentation</option>
                        <option value="documentation-product">Documentation - This Product</option>
                        <option value="documentation-guide" selected="selected">Documentation - This Guide</option>
                        <option value="datasets">Public Data Sets</option>
                        <option value="releasenotes">Release Notes</option>
                        <option value="solution_providers">Partners</option>
                        <option value="code">Sample Code &amp; Libraries</option></select><br /><input id="search-query" name="searchQuery" type="text" placeholder="Search" /><input id="search-button" src="/images/search-button.png" alt="Go" type="image" /></div><input type="hidden" name="this_doc_product" id="this_doc_product" value="Amazon Simple Storage Service" /><input type="hidden" name="this_doc_guide" id="this_doc_guide" value="Developer Guide" /><input type="hidden" name="doc_locale" value="en_us" /></form>
            </div>
            <div id="toc">
               <ul class="awstoc">
                  <li class="awstoc leaf"><a class="awstoc" href="Welcome.html">What Is Amazon S3?</a></li>
                  <li class="awstoc leaf"><a class="awstoc" href="Introduction.html">Introduction</a></li>
                  <li class="awstoc closed"><a class="awstoc" href="MakingRequests.html">Making Requests</a><ul class="awstoc">
                        <li class="awstoc closed"><a class="awstoc" href="ipv6-access.html">Making Requests over IPv6</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="dual-stack-endpoints.html">Using Dual-Stack Endpoints</a></li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="MakingAuthenticatedRequests.html">Making Requests Using the AWS SDKs</a><ul class="awstoc">
                              <li class="awstoc closed"><a class="awstoc" href="AuthUsingAcctOrUserCredentials.html">Using AWS Account or IAM User Credentials</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="AuthUsingAcctOrUserCredJava.html">Making Requests Using AWS Account or IAM User Credentials - AWS SDK for Java</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="AuthUsingAcctOrUserCredDotNet.html">Making Requests Using AWS Account or IAM User Credentials - AWS SDK for .NET</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="AuthUsingAcctOrUserCredPHP3.html">Making Requests Using AWS Account or IAM User Credentials - AWS SDK for PHP</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="AuthUsingAcctOrUserCredRuby.html">Making Requests Using AWS Account or IAM User Credentials - AWS SDK for Ruby</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc closed"><a class="awstoc" href="AuthUsingTempSessionToken.html">Using IAM User Temporary Credentials</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="AuthUsingTempSessionTokenJava.html">Making Requests Using IAM User Temporary Credentials - AWS SDK for Java</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="AuthUsingTempSessionTokenDotNet.html">Making Requests Using IAM User Temporary Credentials - AWS SDK for .NET</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="AuthUsingTempSessionTokenPHP.html">Making Requests Using AWS Account or IAM User Temporary Credentials - AWS SDK for
                                          PHP</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="AuthUsingTempSessionTokenRuby.html">Making Requests Using IAM User Temporary Credentials - AWS SDK for Ruby</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc closed"><a class="awstoc" href="AuthUsingTempFederationToken.html">Using Federated User Temporary Credentials</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="AuthUsingTempFederationTokenJava.html">Making Requests Using Federated User Temporary Credentials - AWS SDK for Java</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="AuthUsingTempFederationTokenDotNet.html">Making Requests Using Federated User Temporary Credentials - AWS SDK for .NET</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="AuthUsingTempFederationTokenPHP.html">Making Requests Using Federated User Temporary Credentials - AWS SDK for PHP</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="AuthUsingTempFederationTokenRuby.html">Making Requests Using Federated User Temporary Credentials - AWS SDK for Ruby</a></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="RESTAPI.html">Making Requests Using the REST API</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="VirtualHosting.html">Virtual Hosting of Buckets</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="RESTRedirect.html">Request Redirection and the REST API</a></li>
                           </ul>
                        </li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="UsingBucket.html">Buckets</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="BucketRestrictions.html">Restrictions and Limitations</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="create-bucket-get-location-example.html">Examples of Creating a Bucket</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="delete-or-empty-bucket.html">Deleting or Emptying a Bucket</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="bucket-encryption.html">Default Encryption for a Bucket</a></li>
                        <li class="awstoc closed"><a class="awstoc" href="ManagingBucketWebsiteConfig.html">Bucket Website Configuration</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="ConfigWebSiteConsole.html">Using the AWS Management Console</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="ConfigWebSiteJava.html">Using the AWS SDK for Java</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="ConfigWebSiteDotNet.html">Using the AWS SDK for .NET</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="ConfigWebSitePHP.html">Using the SDK for PHP</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="ConfigWebSiteREST.html">Using the REST API</a></li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="transfer-acceleration.html">Transfer Acceleration</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="transfer-acceleration-examples.html">Transfer Acceleration Examples</a></li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="RequesterPaysBuckets.html">Requester Pays Buckets</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="configure-requester-pays-console.html">Configure with the Console</a></li>
                              <li class="awstoc closed"><a class="awstoc" href="configure-requester-pays-rest.html">Configure with the REST API</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="RequesterPaysBucketConfiguration.html">Setting the requestPayment Bucket Configuration</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="BucketPayerValues.html">Retrieving the requestPayment Configuration</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ObjectsinRequesterPaysBuckets.html">Downloading Objects in Requester Pays Buckets</a></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li class="awstoc leaf"><a class="awstoc" href="BucketAccess.html">Access Control</a></li>
                        <li class="awstoc closed"><a class="awstoc" href="BucketBilling.html">Billing and Usage Reporting</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="aws-billing-reports.html">Billing Reports</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="aws-usage-report.html">Usage Report</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="aws-usage-report-understand.html">Understanding Billing and Usage Reports</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="CostAllocTagging.html">Using Cost Allocation Tags</a></li>
                           </ul>
                        </li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="UsingObjects.html">Objects</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="UsingMetadata.html">Object Key and Metadata</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="storage-class-intro.html">Storage Classes</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="ObjectAndSoubResource.html">Subresources</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="ObjectVersioning.html">Versioning</a></li>
                        <li class="awstoc closed"><a class="awstoc" href="object-tagging.html">Object Tagging</a><ul class="awstoc">
                              <li class="awstoc closed"><a class="awstoc" href="tagging-managing.html">Managing Object Tags</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="tagging-manage-console.html">Managing Object Tags the Console</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="tagging-manage-javasdk.html">Managing Tags Using the AWS SDK for Java</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="tagging-manage-dotnet.html">Managing Tags Using the AWS SDK for .NET</a></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="object-lifecycle-mgmt.html">Lifecycle Management</a><ul class="awstoc">
                              <li class="awstoc closed"><a class="awstoc" href="lifecycle-additional-considerations.html">Additional Considerations</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="lifecycle-transition-general-considerations.html">Transitioning Objects</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="lifecycle-expire-general-considerations.html">Configuring Object Expiration</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="lifecycle-and-other-bucket-config.html">Lifecycle and Other Bucket Configurations</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc leaf"><a class="awstoc" href="intro-lifecycle-rules.html">Lifecycle Configuration Elements</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="lifecycle-configuration-examples.html">Examples of Lifecycle Configuration</a></li>
                              <li class="awstoc closed"><a class="awstoc" href="how-to-set-lifecycle-configuration-intro.html">Setting Lifecycle Configuration</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="manage-lifecycle-using-console.html">Using the Amazon S3 console</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="set-lifecycle-cli.html">Using the AWS CLI</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="manage-lifecycle-using-java.html">Using the AWS SDK for Java</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="manage-lifecycle-using-dot-net.html">Using the AWS SDK for .NET</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="manage-lifecycle-using-ruby.html">Using the AWS SDK for Ruby</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="manage-lifecycle-using-rest.html">Using the REST API</a></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="cors.html">Cross-Origin Resource Sharing (CORS)</a><ul class="awstoc">
                              <li class="awstoc closed"><a class="awstoc" href="ManageCorsUsing.html">Enabling CORS</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="ManageCorsUsingConsole.html">Using the AWS Management Console</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ManageCorsUsingJava.html">Using the SDK for Java</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ManageCorsUsingDotNet.html">Using the AWS SDK for .NET</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="EnableCorsUsingREST.html">Using the REST API</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc leaf"><a class="awstoc" href="cors-troubleshooting.html">Troubleshooting CORS</a></li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="ObjectOperations.html">Operations on Objects</a><ul class="awstoc">
                              <li class="awstoc closed"><a class="awstoc" href="GettingObjectsUsingAPIs.html">Getting Objects</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="RetrievingObjectUsingJava.html">Using the SDK for Java</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="RetrievingObjectUsingNetSDK.html">Using the AWS SDK for .NET</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="RetrieveObjSingleOpPHP.html">Using the SDK for PHP</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="RetrieveObjSingleOpREST.html">Using the REST API</a></li>
                                    <li class="awstoc closed"><a class="awstoc" href="ShareObjectPreSignedURL.html">Share an Object with Others</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="ShareObjectPreSignedURLVSExplorer.html">Generate a Pre-signed Object URL using AWS Explorer for Visual Studio</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="ShareObjectPreSignedURLJavaSDK.html">Generate a Pre-signed Object URL Using the AWS SDK for Java</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="ShareObjectPreSignedURLDotNetSDK.html">Generate a Pre-signed Object URL Using AWS SDK for .NET</a></li>
                                       </ul>
                                    </li>
                                 </ul>
                              </li>
                              <li class="awstoc closed"><a class="awstoc" href="UploadingObjects.html">Uploading Objects</a><ul class="awstoc">
                                    <li class="awstoc closed"><a class="awstoc" href="UploadInSingleOp.html">Uploading Objects in a Single Operation</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="UploadObjSingleOpJava.html">Using the SDK for Java</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="UploadObjSingleOpNET.html">Using the AWS SDK for .NET</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="UploadObjSingleOpPHP.html">Using the SDK for PHP</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="UploadObjSingleOpRuby.html">Using the SDK for Ruby</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="UploadObjSingleOpREST.html">Using the REST API</a></li>
                                       </ul>
                                    </li>
                                    <li class="awstoc closed"><a class="awstoc" href="uploadobjusingmpu.html">Uploading Objects Using Multipart Upload API</a><ul class="awstoc">
                                          <li class="awstoc closed"><a class="awstoc" href="mpuoverview.html">Multipart Upload Overview</a><ul class="awstoc">
                                                <li class="awstoc leaf"><a class="awstoc" href="qfacts.html">Multipart Upload Limits</a></li>
                                                <li class="awstoc leaf"><a class="awstoc" href="sdksupportformpu.html">API Support for Multipart Upload</a></li>
                                                <li class="awstoc leaf"><a class="awstoc" href="mpuAndPermissions.html">Multipart Upload API and Permissions</a></li>
                                             </ul>
                                          </li>
                                          <li class="awstoc closed"><a class="awstoc" href="usingHLmpuJava.html">Using the AWS Java SDK (High-Level API)</a><ul class="awstoc">
                                                <li class="awstoc leaf"><a class="awstoc" href="HLuploadFileJava.html">Upload a File</a></li>
                                                <li class="awstoc leaf"><a class="awstoc" href="HLAbortMPUploadsJava.html">Abort Multipart Uploads</a></li>
                                                <li class="awstoc leaf"><a class="awstoc" href="HLTrackProgressMPUJava.html">Track Multipart Upload Progress</a></li>
                                             </ul>
                                          </li>
                                          <li class="awstoc closed"><a class="awstoc" href="mpListPartsJavaAPI.html">Using the AWS Java SDK (Low-Level API)</a><ul class="awstoc">
                                                <li class="awstoc leaf"><a class="awstoc" href="llJavaUploadFile.html">Upload a File</a></li>
                                                <li class="awstoc leaf"><a class="awstoc" href="LLlistMPuploadsJava.html">List Multipart Uploads</a></li>
                                                <li class="awstoc leaf"><a class="awstoc" href="LLAbortMPUJava.html">Abort a Multipart Upload</a></li>
                                             </ul>
                                          </li>
                                          <li class="awstoc closed"><a class="awstoc" href="usingHLmpuDotNet.html">Using the AWS .NET SDK (High-Level API)</a><ul class="awstoc">
                                                <li class="awstoc leaf"><a class="awstoc" href="HLuploadFileDotNet.html">Upload a File</a></li>
                                                <li class="awstoc leaf"><a class="awstoc" href="HLuploadDirDotNet.html">Upload a Directory</a></li>
                                                <li class="awstoc leaf"><a class="awstoc" href="HLAbortDotNet.html">Abort Multipart Uploads</a></li>
                                                <li class="awstoc leaf"><a class="awstoc" href="HLTrackProgressMPUDotNet.html">Track Multipart Upload Progress</a></li>
                                             </ul>
                                          </li>
                                          <li class="awstoc closed"><a class="awstoc" href="usingLLmpuDotNet.html">Using the AWS .NET SDK (Low-Level API)</a><ul class="awstoc">
                                                <li class="awstoc leaf"><a class="awstoc" href="LLuploadFileDotNet.html">Upload a File</a></li>
                                                <li class="awstoc leaf"><a class="awstoc" href="LLlistMPuploadsDotNet.html">List Multipart Uploads</a></li>
                                                <li class="awstoc leaf"><a class="awstoc" href="LLTrackProgressMPUNet.html">Track Multipart Upload Progress</a></li>
                                                <li class="awstoc leaf"><a class="awstoc" href="LLAbortMPUnet.html">Abort a Multipart Upload</a></li>
                                             </ul>
                                          </li>
                                          <li class="awstoc leaf"><a class="awstoc" href="usingHLmpuPHP.html">Using the AWS PHP SDK (High-Level API)</a></li>
                                          <li class="awstoc closed"><a class="awstoc" href="usingLLmpuPHP.html">Using the AWS PHP SDK (Low-Level API)</a><ul class="awstoc">
                                                <li class="awstoc leaf"><a class="awstoc" href="LLuploadFilePHP.html">Upload a File</a></li>
                                                <li class="awstoc leaf"><a class="awstoc" href="LLlistMPuploadsPHP.html">List Multipart Uploads</a></li>
                                                <li class="awstoc leaf"><a class="awstoc" href="LLAbortMPUphp.html">Abort a Multipart Upload</a></li>
                                             </ul>
                                          </li>
                                          <li class="awstoc leaf"><a class="awstoc" href="uploadobjusingmpu-ruby-sdk.html">Using the SDK for Ruby</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="UsingRESTAPImpUpload.html">Using the REST API</a></li>
                                       </ul>
                                    </li>
                                    <li class="awstoc closed"><a class="awstoc" href="PresignedUrlUploadObject.html">Uploading Objects Using Pre-Signed URLs</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="PresignedUrlUploadObjectJavaSDK.html">Using the SDK for Java</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="UploadObjectPreSignedURLDotNetSDK.html">Using the AWS SDK for .NET</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="UploadObjectPreSignedURLRubySDK.html">Using the AWS SDK for Ruby</a></li>
                                       </ul>
                                    </li>
                                 </ul>
                              </li>
                              <li class="awstoc closed"><a class="awstoc" href="CopyingObjectsExamples.html">Copying Objects</a><ul class="awstoc">
                                    <li class="awstoc closed"><a class="awstoc" href="CopyingObjectsUsingAPIs.html">Copying Objects in a Single Operation</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="CopyingObjectUsingJava.html">Using the SDK for Java</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="CopyingObjectUsingNetSDK.html">Using the AWS SDK for .NET</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="CopyingObjectUsingPHP.html">Using the SDK for PHP</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="CopyingObjectUsingRuby.html">Using the SDK for Ruby</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="CopyingObjectUsingREST.html">Using the REST API</a></li>
                                       </ul>
                                    </li>
                                    <li class="awstoc closed"><a class="awstoc" href="CopyingObjctsMPUapi.html">Copying Objects Using the Multipart Upload API</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="CopyingObjctsUsingLLJavaMPUapi.html">Using the SDK for Java</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="CopyingObjctsUsingLLNetMPUapi.html">Copy an Object Using the AWS SDK for .NET</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="CopyingObjctsUsingRESTMPUapi.html">Using the REST API</a></li>
                                       </ul>
                                    </li>
                                 </ul>
                              </li>
                              <li class="awstoc closed"><a class="awstoc" href="ListingKeysUsingAPIs.html">Listing Object Keys</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="ListingKeysHierarchy.html">Using a Prefix and Delimiter</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ListingObjectKeysUsingJava.html">Using the SDK for Java</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ListingObjectKeysUsingNetSDK.html">Using the AWS SDK for .NET</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ListingObjectKeysUsingPHP.html">Using the SDK for PHP</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ListingObjectKeysUsingREST.html">Using the REST API</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc closed"><a class="awstoc" href="DeletingObjects.html">Deleting Objects</a><ul class="awstoc">
                                    <li class="awstoc closed"><a class="awstoc" href="DeletingOneObject.html">Deleting One Object Per Request</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="DeletingOneObjectUsingJava.html">Using the SDK for Java</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="DeletingOneObjectUsingNetSDK.html">Using the AWS SDK for .NET</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="DeletingOneObjectUsingPHPSDK.html">Using the SDK for PHP</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="DeletingAnObjectsUsingREST.html">Using the REST API</a></li>
                                       </ul>
                                    </li>
                                    <li class="awstoc closed"><a class="awstoc" href="DeletingMultipleObjects.html">Deleting Multiple Objects Per Request</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="DeletingMultipleObjectsUsingJava.html">Using the SDK for Java</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="DeletingMultipleObjectsUsingNetSDK.html">Using the AWS SDK for .NET</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="DeletingMultipleObjectsUsingPHPSDK.html">Using the SDK for PHP</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="DeletingMultipleObjectsUsingREST.html">Using the REST API</a></li>
                                       </ul>
                                    </li>
                                 </ul>
                              </li>
                              <li class="awstoc closed"><a class="awstoc" href="selecting-content-from-objects.html">Selecting Content from Objects</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="SelectObjectContentUsingJava.html">Using the SDK for Java</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="SelectObjectContentUsingRestApi.html">Using the REST API</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="SelectObjectContentUsingOtherSDKs.html">Using Other SDKs</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc closed"><a class="awstoc" href="restoring-objects.html">Restoring Archived Objects</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="restoring-objects-console.html">Using the Console</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="restoring-objects-java.html">Using the SDK for Java</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="restore-object-dotnet.html">Using the AWS SDK for .NET</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="restoring-objects-rest.html">Using the REST API</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc leaf"><a class="awstoc" href="querying-glacier-archives.html">Querying Archived Objects</a></li>
                           </ul>
                        </li>
                     </ul>
                  </li>
                  <li class="awstoc leaf"><a class="awstoc" href="analytics-storage-class.html">Storage Class Analysis</a></li>
                  <li class="awstoc leaf"><a class="awstoc" href="storage-inventory.html">Inventory</a></li>
                  <li class="awstoc closed"><a class="awstoc" href="s3-access-control.html">Managing Access</a><ul class="awstoc">
                        <li class="awstoc closed"><a class="awstoc" href="intro-managing-access-s3-resources.html">Introduction</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="access-control-overview.html">Overview</a></li>
                              <li class="awstoc closed"><a class="awstoc" href="how-s3-evaluates-access-control.html">How Amazon S3 Authorizes a Request</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="access-control-auth-workflow-bucket-operation.html">For a Bucket Operation</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="access-control-auth-workflow-object-operation.html">For an Object Operation</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc leaf"><a class="awstoc" href="access-policy-alternatives-guidelines.html">Guidelines for Using the Available Access Policy Options</a></li>
                              <li class="awstoc closed"><a class="awstoc" href="example-walkthroughs-managing-access.html">Example Walkthroughs: Managing Access</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="policy-eval-walkthrough-download-awscli.html">Setting Up Tools</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="example-walkthroughs-managing-access-example1.html">Example 1: Bucket Owner Granting Its Users Bucket Permissions</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="example-walkthroughs-managing-access-example2.html">Example 2: Bucket Owner Granting Cross-Account Bucket Permissions</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="example-walkthroughs-managing-access-example3.html">Example 3: Bucket Owner Granting Its Users Permissions to Objects It Does Not Own</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="example-walkthroughs-managing-access-example4.html">Example 4: Bucket Owner Granting Cross-account Permission to Objects It Does Not Own</a></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="using-iam-policies.html">Using Bucket Policies and User Policies</a><ul class="awstoc">
                              <li class="awstoc closed"><a class="awstoc" href="access-policy-language-overview.html">Access Policy Language Overview</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="s3-arn-format.html">Specifying Resources</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="s3-bucket-user-policy-specifying-principal-intro.html">Specifying a Principal</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="using-with-s3-actions.html">Specifying Permissions</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="amazon-s3-policy-keys.html">Specifying Conditions</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc closed"><a class="awstoc" href="example-bucket-policies.html">Bucket Policy Examples</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="example-bucket-policies-vpc-endpoint.html">Example Bucket Policies for VPC Endpoints</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc closed"><a class="awstoc" href="example-policies-s3.html">User Policy Examples</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="walkthrough1.html">An Example Walkthrough: Using user policies to control access to your bucket</a></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="S3_ACLs_UsingACLs.html">Managing Access with ACLs</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="acl-overview.html">Access Control List (ACL) Overview</a></li>
                              <li class="awstoc closed"><a class="awstoc" href="managing-acls.html">Managing ACLs</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="manage-acls-using-console.html">Managing ACLs in the AWS Management Console</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="acl-using-java-sdk.html">Managing ACLs Using the AWS SDK for Java</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="acl-using-dot-net-sdk.html">Managing ACLs Using the AWS SDK for .NET</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="acl-using-rest-api.html">Managing ACLs Using the REST API</a></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                     </ul>
                  </li>
                  <li class="awstoc opened"><a class="awstoc" href="DataDurability.html">Protecting Data</a><ul class="awstoc">
                        <li class="awstoc opened"><a class="awstoc" href="UsingEncryption.html">Data Encryption</a><ul class="awstoc">
                              <li class="awstoc closed"><a class="awstoc" href="serv-side-encryption.html">Server-Side Encryption</a><ul class="awstoc">
                                    <li class="awstoc closed"><a class="awstoc" href="UsingKMSEncryption.html">KMS-Managed Encryption Keys</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="kms-using-sdks.html">SSE-KMS and AWS SDKs</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="KMSUsingRESTAPI.html">SSE-KMS REST API</a></li>
                                       </ul>
                                    </li>
                                    <li class="awstoc closed"><a class="awstoc" href="UsingServerSideEncryption.html">Amazon S3-Managed Encryption Keys</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="SSEUsingJavaSDK.html">AWS SDK for Java</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="SSEUsingDotNetSDK.html">AWS SDK for .NET</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="SSEUsingPHPSDK.html">AWS SDK for PHP</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="SSEUsingRubySDK.html">AWS SDK for Ruby</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="SSEUsingRESTAPI.html">REST API</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="SSEUsingConsole.html">AWS Management Console</a></li>
                                       </ul>
                                    </li>
                                    <li class="awstoc closed"><a class="awstoc" href="ServerSideEncryptionCustomerKeys.html">Customer-Provided Encryption Keys</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="sse-c-using-java-sdk.html">Specifying Server-Side Encryption with Customer-Provided Encryption Keys Using the
                                                AWS SDK for Java</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="sse-c-using-dot-net-sdk.html">AWS SDK for .NET</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="ServerSideEncryptionCustomerKeysSSEUsingRESTAPI.html">REST API</a></li>
                                       </ul>
                                    </li>
                                 </ul>
                              </li>
                              <li class="awstoc leaf"><a class="awstoc selected" href="UsingClientSideEncryption.html">Client-Side Encryption</a></li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="Versioning.html">Versioning</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="manage-versioning-examples.html">Examples</a></li>
                              <li class="awstoc closed"><a class="awstoc" href="manage-objects-versioned-bucket.html">Managing Objects in a Versioning-Enabled Bucket</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="AddingObjectstoVersioningEnabledBuckets.html">Adding Objects to Versioning-Enabled Buckets</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="list-obj-version-enabled-bucket.html">Listing Objects in a Versioning-Enabled Bucket</a></li>
                                    <li class="awstoc closed"><a class="awstoc" href="RetrievingObjectVersions.html">Retrieving Object Versions</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="RetMetaOfObjVersion.html">Retrieving the Metadata of an Object Version</a></li>
                                       </ul>
                                    </li>
                                    <li class="awstoc closed"><a class="awstoc" href="DeletingObjectVersions.html">Deleting Object Versions</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="UsingMFADelete.html">Using MFA Delete</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="DeleteMarker.html">Working with Delete Markers</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="RemDelMarker.html">Removing Delete Markers</a></li>
                                       </ul>
                                    </li>
                                    <li class="awstoc leaf"><a class="awstoc" href="transitioning-object-versions.html">Transitioning Object Versions</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="RestoringPreviousVersions.html">Restoring Previous Versions</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="VersionedObjectPermissionsandACLs.html">Versioned Object Permissions</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc closed"><a class="awstoc" href="VersionSuspendedBehavior.html">Managing Objects in a Versioning-Suspended Bucket</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="AddingObjectstoVersionSuspendedBuckets.html">Adding Objects to Versioning-Suspended Buckets</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="RetrievingObjectsfromVersioningSuspendedBuckets.html">Retrieving Objects from Versioning-Suspended Buckets</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="DeletingObjectsfromVersioningSuspendedBuckets.html">Deleting Objects from Versioning-Suspended Buckets</a></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="WebsiteHosting.html">Hosting a Static Website</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="WebsiteEndpoints.html">Website Endpoints</a></li>
                        <li class="awstoc closed"><a class="awstoc" href="HowDoIWebsiteConfiguration.html">Configuring a Bucket for Website Hosting</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="EnableWebsiteHosting.html">Enabling Website Hosting</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="IndexDocumentSupport.html">Configuring Index Document Support</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="WebsiteAccessPermissionsReqd.html">Permissions Required for Website Access</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="LoggingWebsiteTraffic.html">(Optional) Configuring Web Traffic Logging</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="CustomErrorDocSupport.html">(Optional) Custom Error Document Support</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="how-to-page-redirect.html">(Optional) Configuring a Redirect</a></li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="hosting-websites-on-s3-examples.html">Example Walkthroughs</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="HostingWebsiteOnS3Setup.html">Example: Setting up a Static Website</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="website-hosting-custom-domain-walkthrough.html">Example: Setting up a Static Website Using a Custom Domain</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="website-hosting-cloudfront-walkthrough.html">Example: Speed Up Your Website with Amazon CloudFront</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="getting-started-cleanup.html">Clean Up Example Resources</a></li>
                           </ul>
                        </li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="NotificationHowTo.html">Notifications</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="ways-to-add-notification-config-to-bucket.html">Example Walkthrough 1</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="notification-walkthrough-2.html">Example Walkthrough 2</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="notification-content-structure.html">Event Message Structure</a></li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="crr.html">Cross-Region Replication</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="crr-what-is-isnot-replicated.html">What Does Amazon S3 Replicate?</a></li>
                        <li class="awstoc closed"><a class="awstoc" href="crr-how-setup.html">Overview of Setting Up CRR</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="crr-add-config.html">Replication Configuration Overview</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="setting-repl-config-perm-overview.html">Setting Up Permissions for CRR</a></li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="crr-additional-configs.html">Additional CRR Configurations</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="crr-change-owner.html">CRR Additional Configuration: Changing Replica Owner</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="crr-replication-config-for-kms-objects.html">CRR Additional Configuration: Replicating Encrypted Objects</a></li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="crr-example-walkthroughs.html">CRR Walkthroughs</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="crr-walkthrough1.html">CRR Example 1: Same AWS Account</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="crr-walkthrough-2.html">CRR Example 2: Different AWS Accounts</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="crr-walkthrough-3.html">CRR Example 3: Change Replica Owner</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="crr-walkthrough-4.html">CRR Example 4: Replicating Encrypted Objects</a></li>
                           </ul>
                        </li>
                        <li class="awstoc leaf"><a class="awstoc" href="crr-status.html">CRR: Status Information</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="crr-troubleshoot.html">CRR: Troubleshooting</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="crr-and-other-bucket-configs.html">CRR: Additional Considerations</a></li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="UsingRouting.html">Request Routing</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="Redirects.html">Request Redirection and the REST API</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="DNSConsiderations.html">DNS Considerations</a></li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="PerformanceOptimization.html">Performance Optimization</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="request-rate-perf-considerations.html">Request Rate and Performance Guidelines</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="TCPWindowScaling.html">TCP Window Scaling</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="TCPSelectiveAcknowledgement.html">TCP Selective Acknowledgement</a></li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="monitoring-overview.html">Monitoring</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="monitoring-automated-manual.html">Monitoring Tools</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="cloudwatch-monitoring.html">Monitoring Metrics with CloudWatch</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="metrics-configurations.html">Metrics Configurations for Buckets</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="cloudtrail-logging.html">Logging API Calls with AWS CloudTrail</a></li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="S3Torrent.html">BitTorrent</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="S3TorrentCharge.html">How You are Charged for BitTorrent Delivery</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="S3TorrentRetrieve.html">Using BitTorrent to Retrieve Objects Stored in Amazon S3</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="S3TorrentPublish.html">Publishing Content Using Amazon S3 and BitTorrent</a></li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="HandlingErrors.html">Error Handling</a><ul class="awstoc">
                        <li class="awstoc closed"><a class="awstoc" href="UsingRESTError.html">The REST Error Response</a><ul class="awstoc">
                              <li class="awstoc closed"><a class="awstoc" href="ErrorResponse.html">Error Response</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="ErrorCode.html">Error Code</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ErrorMessage.html">Error Message</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ErrorDetails.html">Further Details</a></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li class="awstoc leaf"><a class="awstoc" href="UsingSOAPError.html">The SOAP Error Response</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="ErrorBestPractices.html">Amazon S3 Error Best Practices</a></li>
                     </ul>
                  </li>
                  <li class="awstoc leaf"><a class="awstoc" href="troubleshooting.html">Troubleshooting Amazon S3</a></li>
                  <li class="awstoc closed"><a class="awstoc" href="ServerLogs.html">Server Access Logging</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="enable-logging-console.html">Enabling Logging Using the Console</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="enable-logging-programming.html">Enabling Logging Programmatically</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="LogFormat.html">Log Format</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="deleting-log-files-lifecycle.html">Deleting Log Files</a></li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="UsingAWSSDK.html">AWS SDKs and Explorers</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="setup-aws-cli.html">Setting Up the AWS CLI</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="UsingTheMPJavaAPI.html">Using the AWS SDK for Java</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="UsingTheMPDotNetAPI.html">Using the AWS SDK for .NET</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="UsingTheMPphpAPI.html">Using the AWS SDK for PHP and Running PHP Examples</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="UsingTheMPRubyAPI.html">Using the AWS SDK for Ruby - Version 3</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="UsingTheBotoAPI.html">Using the AWS SDK for Python (Boto)</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="using-mobile-sdks.html">Using the AWS Mobile SDKs for iOS and Android</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="using-aws-amplify.html">Using the AWS Amplify JavaScript Library</a></li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="Appendices.html">Appendices</a><ul class="awstoc">
                        <li class="awstoc closed"><a class="awstoc" href="SOAPAPI3.html">Appendix A: Using the SOAP API</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="UsingSOAPOperations.html">Common SOAP API Elements</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="SOAPAuthentication.html">Authenticating SOAP Requests</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="SOAPAccessPolicy.html">Setting Access Policy with SOAP</a></li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="auth-request-sig-v2.html">Appendix B: Authenticating Requests (AWS Signature Version 2)</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="S3_Authentication2.html">Authenticating Requests Using the REST API</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="RESTAuthentication.html">Signing and Authenticating REST Requests</a></li>
                              <li class="awstoc closed"><a class="awstoc" href="UsingHTTPPOST.html">Browser-Based Uploads Using POST</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="HTTPPOSTForms.html">HTML Forms</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="HTTPPOSTExamples.html">Upload Examples</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="HTTPPOSTFlash.html">POST with Adobe Flash</a></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                     </ul>
                  </li>
                  <li class="awstoc leaf"><a class="awstoc" href="RelatedResources012.html">Resources</a></li>
                  <li class="awstoc closed"><a class="awstoc" href="s3-glacier-select-sql-reference.html">SQL Reference</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="s3-glacier-select-sql-reference-select.html">SELECT Command</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="s3-glacier-select-sql-reference-data-types.html">Data Types</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="s3-glacier-select-sql-reference-operators.html">Operators</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="s3-glacier-select-sql-reference-keyword-list.html">Reserved Keywords</a></li>
                        <li class="awstoc closed"><a class="awstoc" href="s3-glacier-select-sql-reference-sql-functions.html">SQL Functions</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="s3-glacier-select-sql-reference-aggregate.html">Aggregate Functions (Amazon S3 Select only)</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="s3-glacier-select-sql-reference-conditional.html">Conditional Functions</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="s3-glacier-select-sql-reference-conversion.html">Conversion Functions</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="s3-glacier-select-sql-reference-date.html">Date Functions</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="s3-glacier-select-sql-reference-string.html">String Functions</a></li>
                           </ul>
                        </li>
                     </ul>
                  </li>
                  <li class="awstoc leaf"><a class="awstoc" href="WhatsNew.html">Document History</a></li>
                  <li class="awstoc leaf"><a class="awstoc" href="glossary.html">AWS Glossary</a></li>
                  <li id="toc-additional-links"><a class="btn btn-pdf-link" id="pdf-link-alt" href="s3-dg.pdf#top" target="_blank" title="Open PDF"></a><a class="btn btn-kindle-link" id="kindle-link-alt" target="_blank" href="http://www.amazon.com/dp/B0763Z4YVV" title="Open Kindle"></a><a class="btn btn-rss-link" id="rss-link-alt" target="_blank" href="s3-dev-guide-rss-updates.rss" title="View RSS Feed"></a></li>
               </ul>
            </div>
         </div>
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tr>
                           <td>
                              <div class="breadcrumb"><a href="/index.html">AWS Documentation</a> » <a href="/s3/index.html">Amazon Simple Storage Service (S3)</a> » <a href="index.html">Developer Guide</a> » <a href="DataDurability.html">Protecting Data in Amazon S3</a> » <a href="UsingEncryption.html">Protecting Data Using Encryption</a> » <span class="breadcrumb">Protecting Data Using Client-Side
                                    			Encryption</span></div>
                           </td>
                        </tr>
                     </table>
                     <div></div>
                     <h1 class="topictitle" id="UsingClientSideEncryption">Protecting Data Using Client-Side
                        			Encryption
                     </h1>
                     <p><em>Client-side encryption</em> is the act of encrypting data
                        		before sending it to Amazon S3. To enable client-side encryption, you have the following
                        		options:
                     </p>
                     <div class="itemizedlist">
                        		
                        		
                        	
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              			
                              <p>Use
                                 				an AWS KMS-managed customer master key
                              </p>
                              		
                           </li>
                           <li class="listitem">
                              			
                              <p>Use a client-side master key</p>
                              		
                           </li>
                        </ul>
                     </div>
                     <p>The
                        		following AWS SDKs support client-side encryption:
                     </p>
                     <div class="itemizedlist">
                        		
                        		
                        		
                        		
                        		
                        	
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              			
                              <p><a href="https://aws.amazon.com/sdk-for-net/" target="_blank">AWS SDK for .NET</a></p>
                              		
                           </li>
                           <li class="listitem">
                              			
                              <p><a href="https://aws.amazon.com/sdk-for-go/" target="_blank">AWS SDK for Go</a></p>
                              		
                           </li>
                           <li class="listitem">
                              			
                              <p><a href="https://aws.amazon.com/sdk-for-java/" target="_blank">AWS SDK for Java</a></p>
                              		
                           </li>
                           <li class="listitem">
                              			
                              <p><a href="https://aws.amazon.com/sdk-for-php/" target="_blank">AWS SDK for PHP</a></p>
                              		
                           </li>
                           <li class="listitem">
                              			
                              <p><a href="https://aws.amazon.com/sdk-for-ruby/" target="_blank">AWS SDK for Ruby</a></p>
                              		
                           </li>
                        </ul>
                     </div>
                     		
                     <h2 id="client-side-encryption-kms-managed-master-key-intro">Option
                        				1: Using an AWS KMS–Managed Customer Master Key
                        				(CMK)
                     </h2>
                     		
                     <p>When
                        			using an AWS KMS-managed customer master key to enable client-side data
                        			encryption, you provide an AWS KMS customer master key ID (CMK ID). 
                     </p>
                     		
                     <div class="itemizedlist">
                        			
                        			
                        		
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              				
                              <p><span class="topcom">When uploading an object</span>—Using the CMK ID, the
                                 					client first sends a request to the AWS Key Management Service (AWS KMS) for
                                 a key that it can use
                                 					to encrypt your object data. AWS KMS returns two versions of a randomly generated
                                 					data encryption key:
                              </p>
                              				
                              <div class="itemizedlist">
                                 					
                                 					
                                 				
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       						
                                       <p>A plain-text version that the client uses to encrypt the object
                                          							data
                                       </p>
                                       					
                                    </li>
                                    <li class="listitem">
                                       						
                                       <p>A cipher blob of the same data encryption key that the client uploads
                                          							to Amazon S3 as object metadata
                                       </p>
                                       					
                                    </li>
                                 </ul>
                              </div>
                              				
                              <div class="aws-note">
                                 <p class="aws-note">Note</p>
                                 <p>The client obtains a unique data encryption key for each object that it uploads.</p>
                              </div>
                              			
                           </li>
                           <li class="listitem">
                              				
                              <p>
                                 					<span class="topcom">When downloading an object</span>—The client
                                 					downloads the encrypted object from Amazon S3 along with the cipher blob version
                                 of
                                 					the data encryption key stored as object metadata. The client then sends the
                                 					cipher blob to AWS KMS to get the plain-text version of the
                                 					key
                                 					so that it can decrypt the object data.
                              </p>
                              			
                           </li>
                        </ul>
                     </div>
                     		
                     <p>For more information about AWS KMS, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/overview.html" target="_blank">What is the
                           				AWS Key Management Service?</a> in the <em>AWS Key Management Service Developer Guide</em>.
                     </p>
                     		
                     <div class="example">
                        <div class="example-contents">
                           <p>The following example uploads an object to Amazon S3 using AWS KMS with the AWS SDK
                              for Java.
                              				The example uses a KMS-managed customer master key (CMK) to encrypt data on the
                              				client side before uploading it to Amazon S3. If you already have a CMK, you can
                              use that
                              				by specifying the value of the <code class="code">kms_cmk_id</code> variable in the sample code.
                              				If you don't have a CMK, or you need another one, you can generate one through
                              the
                              				Java API. The example shows how to generate a CMK.
                           </p>
                           <p>For more information on key material, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/importing-keys.html" target="_blank">Importing Key Material in AWS Key Management Service
                                 					(AWS KMS)</a>. For instructions on creating and testing a working sample, see
                              					<a href="UsingTheMPJavaAPI.html#TestingJavaSamples">Testing the Amazon S3 Java Code Examples</a>.
                           </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="">// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.&#xD;
// SPDX-License-Identifier: MIT-0 (For details, see https://github.com/awsdocs/amazon-s3-developer-guide/blob/master/LICENSE-SAMPLECODE.)&#xD;
&#xD;
import java.io.ByteArrayOutputStream;&#xD;
import java.io.IOException;&#xD;
&#xD;
import com.amazonaws.AmazonServiceException;&#xD;
import com.amazonaws.SdkClientException;&#xD;
import com.amazonaws.auth.profile.ProfileCredentialsProvider;&#xD;
import com.amazonaws.regions.RegionUtils;&#xD;
import com.amazonaws.services.kms.AWSKMS;&#xD;
import com.amazonaws.services.kms.AWSKMSClientBuilder;&#xD;
import com.amazonaws.services.kms.model.CreateKeyResult;&#xD;
import com.amazonaws.services.s3.AmazonS3Encryption;&#xD;
import com.amazonaws.services.s3.AmazonS3EncryptionClientBuilder;&#xD;
import com.amazonaws.services.s3.model.CryptoConfiguration;&#xD;
import com.amazonaws.services.s3.model.KMSEncryptionMaterialsProvider;&#xD;
import com.amazonaws.services.s3.model.S3Object;&#xD;
import com.amazonaws.services.s3.model.S3ObjectInputStream;&#xD;
&#xD;
public class UploadObjectKMSKey {&#xD;
&#xD;
    public static void main(String[] args) throws IOException {&#xD;
        String bucketName = "*** Bucket name ***";&#xD;
        String keyName = "*** Object key name ***";&#xD;
        String clientRegion = "*** Client region ***";&#xD;
        String kms_cmk_id = "***AWS KMS customer master key ID***";&#xD;
        int readChunkSize = 4096;&#xD;
&#xD;
        try {&#xD;
            // Optional: If you don't have a KMS key (or need another one),&#xD;
            // create one. This example creates a key with AWS-created&#xD;
            // key material.&#xD;
            AWSKMS kmsClient = AWSKMSClientBuilder.standard()&#xD;
                                    .withCredentials(new ProfileCredentialsProvider())&#xD;
                                    .withRegion(clientRegion)&#xD;
                                    .build();&#xD;
            CreateKeyResult keyResult = kmsClient.createKey();&#xD;
            kms_cmk_id = keyResult.getKeyMetadata().getKeyId();&#xD;
    &#xD;
             // Create the encryption client.&#xD;
            KMSEncryptionMaterialsProvider materialProvider = new KMSEncryptionMaterialsProvider(kms_cmk_id);&#xD;
            CryptoConfiguration cryptoConfig = new CryptoConfiguration()&#xD;
                    .withAwsKmsRegion(RegionUtils.getRegion(clientRegion));&#xD;
            AmazonS3Encryption encryptionClient = AmazonS3EncryptionClientBuilder.standard()&#xD;
                    .withCredentials(new ProfileCredentialsProvider())&#xD;
                    .withEncryptionMaterials(materialProvider)&#xD;
                    .withCryptoConfiguration(cryptoConfig)&#xD;
                    .withRegion(clientRegion).build();&#xD;
    &#xD;
            // Upload an object using the encryption client.&#xD;
            String origContent = "S3 Encrypted Object Using KMS-Managed Customer Master Key.";&#xD;
            int origContentLength = origContent.length();&#xD;
            encryptionClient.putObject(bucketName, keyName, origContent);&#xD;
    &#xD;
            // Download the object. The downloaded object is still encrypted.&#xD;
            S3Object downloadedObject = encryptionClient.getObject(bucketName, keyName);&#xD;
            S3ObjectInputStream input = downloadedObject.getObjectContent();&#xD;
    &#xD;
            // Decrypt and read the object and close the input stream.&#xD;
            byte[] readBuffer = new byte[readChunkSize];&#xD;
            ByteArrayOutputStream baos = new ByteArrayOutputStream(readChunkSize);&#xD;
            int bytesRead = 0;&#xD;
            int decryptedContentLength = 0;&#xD;
    &#xD;
            while ((bytesRead = input.read(readBuffer)) != -1) {&#xD;
                baos.write(readBuffer, 0, bytesRead);&#xD;
                decryptedContentLength += bytesRead;&#xD;
            }&#xD;
            input.close();&#xD;
    &#xD;
            // Verify that the original and decrypted contents are the same size.&#xD;
            System.out.println("Original content length: " + origContentLength);&#xD;
            System.out.println("Decrypted content length: " + decryptedContentLength);&#xD;
        }&#xD;
        catch(AmazonServiceException e) {&#xD;
            // The call was transmitted successfully, but Amazon S3 couldn't process &#xD;
            // it, so it returned an error response.&#xD;
            e.printStackTrace();&#xD;
        }&#xD;
        catch(SdkClientException e) {&#xD;
            // Amazon S3 couldn't be contacted for a response, or the client&#xD;
            // couldn't parse the response from Amazon S3.&#xD;
            e.printStackTrace();&#xD;
        }&#xD;
    }&#xD;
}</code></pre></div>
                     </div>
                     	
                     		
                     <h2 id="client-side-encryption-client-side-master-key-intro">Option 2: Using a
                        				Client-Side Master Key
                     </h2>
                     		
                     <p>This
                        			section shows how to use a
                        			client-side
                        			master key for client-side data encryption. 
                     </p>
                     		
                     <div class="aws-note">
                        <p class="aws-note">Important</p>
                        <p>Your client-side master keys and your unencrypted data are never sent to AWS. It's
                           				important that you safely manage your encryption keys. If you lose them, you won't
                           				be able to decrypt your data.
                        </p>
                     </div>
                     		
                     <p>This is how it works:</p>
                     		
                     <div class="itemizedlist">
                        			
                        			
                        		
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              				
                              <p><span class="topcom">When uploading an object</span>—You provide a client-side
                                 					master key to the Amazon S3 encryption client. The client uses the master key
                                 only to
                                 					encrypt the data encryption key that it generates randomly. The process works
                                 					like this:
                              </p>
                              				
                              <div class="orderedlist">
                                 					
                                 					
                                 					
                                 				
                                 <ol>
                                    <li>
                                       						
                                       <p>The Amazon S3 encryption client generates a one-time-use symmetric key (also known
                                          as a data
                                          							encryption key or data key) locally. It uses the data key to encrypt the
                                          							data of a single Amazon S3 object. The client generates a separate data key
                                          							for each object.
                                       </p>
                                       					
                                    </li>
                                    <li>
                                       						
                                       <p>The client encrypts the data encryption key using the master key that you provide.
                                          The
                                          							client uploads the encrypted data key and its
                                          							material
                                          							description as part of the object metadata. The
                                          							client uses the material description to determine which client-side
                                          							master key to use for decryption.
                                       </p>
                                       					
                                    </li>
                                    <li>
                                       						
                                       <p>The client uploads the encrypted data to Amazon S3 and saves the encrypted
                                          							data key as object metadata (<code class="code">x-amz-meta-x-amz-key</code>) in
                                          							Amazon S3.
                                       </p>
                                       					
                                    </li>
                                 </ol>
                              </div>
                              			
                           </li>
                           <li class="listitem">
                              				
                              <p><span class="topcom">When downloading an object</span>—The client downloads the
                                 					encrypted object from Amazon S3. Using the material description from the object's
                                 					metadata, the client determines which master key to use to decrypt the data key.
                                 					The client uses that master key to decrypt the data key and then uses the data
                                 					key to decrypt the object. 
                              </p>
                              			
                           </li>
                        </ul>
                     </div>
                     		
                     <p>The
                        			client-side master key that you provide can be either a
                        			symmetric
                        			key or a public/private key pair. The following examples show how to
                        			use both types of keys.
                     </p>
                     		
                     <p>For more information, see <a href="https://aws.amazon.com/articles/2850096021478074" target="_blank"> Client-Side
                           				Data Encryption with the AWS SDK for Java and Amazon S3 </a>.
                     </p>
                     		
                     <div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p>If you get a cipher-encryption error message when you use the encryption API for
                           				the first time, your version of the JDK may have a Java Cryptography Extension
                           (JCE)
                           				jurisdiction policy file that limits the maximum key length for encryption and
                           				decryption transformations to 128 bits. The AWS SDK requires a maximum key length
                           of
                           				256 bits. To check your maximum key length, use the
                           					<code class="code">getMaxAllowedKeyLength()</code> method of the
                           					<code class="code">javax.crypto.Cipher</code> class. To remove the key-length restriction,
                           				install the Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction
                           Policy
                           				Files at the <a href="http://docs.oracle.com/javase/8/" target="_blank">Java SE download
                              					page</a>.
                        </p>
                     </div>
                     		
                     <div class="example">
                        <div class="example-contents">
                           <p>The
                              				following example shows how to do these tasks:
                           </p>
                           <div class="itemizedlist">
                              				
                              				
                              				
                              				
                              				
                              			
                              <ul class="itemizedlist" type="disc">
                                 <li class="listitem">
                                    					
                                    <p>Generate a 256-bit
                                       						AES
                                       						key
                                    </p>
                                    				
                                 </li>
                                 <li class="listitem">
                                    					
                                    <p>Save and load the AES key to and from the file system</p>
                                    				
                                 </li>
                                 <li class="listitem">
                                    					
                                    <p>Use the AES key to encrypt data on the client side before sending it to
                                       						Amazon S3
                                    </p>
                                    				
                                 </li>
                                 <li class="listitem">
                                    					
                                    <p>Use the AES key to decrypt data received from Amazon S3</p>
                                    				
                                 </li>
                                 <li class="listitem">
                                    					
                                    <p>Verify that the decrypted data is the same as the original data</p>
                                    				
                                 </li>
                              </ul>
                           </div>
                           <p>For instructions on creating and testing a working sample, see <a href="UsingTheMPJavaAPI.html#TestingJavaSamples">Testing the Amazon S3 Java Code Examples</a>.
                           </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="java ">// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.&#xD;
// SPDX-License-Identifier: MIT-0 (For details, see https://github.com/awsdocs/amazon-s3-developer-guide/blob/master/LICENSE-SAMPLECODE.)&#xD;
&#xD;
import java.io.ByteArrayInputStream;&#xD;
import java.io.File;&#xD;
import java.io.FileInputStream;&#xD;
import java.io.FileOutputStream;&#xD;
import java.io.IOException;&#xD;
import java.security.InvalidKeyException;&#xD;
import java.security.NoSuchAlgorithmException;&#xD;
import java.security.spec.InvalidKeySpecException;&#xD;
import java.security.spec.X509EncodedKeySpec;&#xD;
&#xD;
import javax.crypto.KeyGenerator;&#xD;
import javax.crypto.SecretKey;&#xD;
import javax.crypto.spec.SecretKeySpec;&#xD;
&#xD;
import com.amazonaws.AmazonServiceException;&#xD;
import com.amazonaws.SdkClientException;&#xD;
import com.amazonaws.auth.profile.ProfileCredentialsProvider;&#xD;
import com.amazonaws.services.s3.AmazonS3;&#xD;
import com.amazonaws.services.s3.AmazonS3EncryptionClientBuilder;&#xD;
import com.amazonaws.services.s3.model.EncryptionMaterials;&#xD;
import com.amazonaws.services.s3.model.ObjectMetadata;&#xD;
import com.amazonaws.services.s3.model.PutObjectRequest;&#xD;
import com.amazonaws.services.s3.model.S3Object;&#xD;
import com.amazonaws.services.s3.model.StaticEncryptionMaterialsProvider;&#xD;
&#xD;
public class S3ClientSideEncryptionSymMasterKey {&#xD;
&#xD;
    public static void main(String[] args) throws Exception {&#xD;
        String clientRegion = "*** Client region ***";&#xD;
        String bucketName = "*** Bucket name ***";&#xD;
        String objectKeyName = "*** Object key name ***";&#xD;
        String masterKeyDir = System.getProperty("java.io.tmpdir");&#xD;
        String masterKeyName = "secret.key";&#xD;
&#xD;
        // Generate a symmetric 256-bit AES key.&#xD;
        KeyGenerator symKeyGenerator = KeyGenerator.getInstance("AES");&#xD;
        symKeyGenerator.init(256);&#xD;
        SecretKey symKey = symKeyGenerator.generateKey();&#xD;
&#xD;
        // To see how it works, save and load the key to and from the file system.&#xD;
        saveSymmetricKey(masterKeyDir, masterKeyName, symKey);&#xD;
        symKey = loadSymmetricAESKey(masterKeyDir, masterKeyName, "AES");&#xD;
&#xD;
        try {&#xD;
            // Create the Amazon S3 encryption client.&#xD;
            EncryptionMaterials encryptionMaterials = new EncryptionMaterials(symKey);&#xD;
            AmazonS3 s3EncryptionClient = AmazonS3EncryptionClientBuilder.standard()&#xD;
                    .withCredentials(new ProfileCredentialsProvider())&#xD;
                    .withEncryptionMaterials(new StaticEncryptionMaterialsProvider(encryptionMaterials))&#xD;
                    .withRegion(clientRegion)&#xD;
                    .build();&#xD;
&#xD;
            // Upload a new object. The encryption client automatically encrypts it.&#xD;
            byte[] plaintext = "S3 Object Encrypted Using Client-Side Symmetric Master Key.".getBytes();&#xD;
            s3EncryptionClient.putObject(new PutObjectRequest(bucketName, &#xD;
                                                            objectKeyName, &#xD;
                                                            new ByteArrayInputStream(plaintext), &#xD;
                                                            new ObjectMetadata()));&#xD;
    &#xD;
            // Download and decrypt the object.&#xD;
            S3Object downloadedObject = s3EncryptionClient.getObject(bucketName, objectKeyName);&#xD;
            byte[] decrypted = com.amazonaws.util.IOUtils.toByteArray(downloadedObject.getObjectContent());&#xD;
    &#xD;
            // Verify that the data that you downloaded is the same as the original data.&#xD;
            System.out.println("Plaintext: " + new String(plaintext));&#xD;
            System.out.println("Decrypted text: " + new String(decrypted));&#xD;
        }&#xD;
        catch(AmazonServiceException e) {&#xD;
            // The call was transmitted successfully, but Amazon S3 couldn't process &#xD;
            // it, so it returned an error response.&#xD;
            e.printStackTrace();&#xD;
        }&#xD;
        catch(SdkClientException e) {&#xD;
            // Amazon S3 couldn't be contacted for a response, or the client&#xD;
            // couldn't parse the response from Amazon S3.&#xD;
            e.printStackTrace();&#xD;
        }&#xD;
    }&#xD;
&#xD;
    private static void saveSymmetricKey(String masterKeyDir, String masterKeyName, SecretKey secretKey) throws IOException {&#xD;
        X509EncodedKeySpec x509EncodedKeySpec = new X509EncodedKeySpec(secretKey.getEncoded());&#xD;
        FileOutputStream keyOutputStream = new FileOutputStream(masterKeyDir + File.separator + masterKeyName);&#xD;
        keyOutputStream.write(x509EncodedKeySpec.getEncoded());&#xD;
        keyOutputStream.close();&#xD;
    }&#xD;
&#xD;
    private static SecretKey loadSymmetricAESKey(String masterKeyDir, String masterKeyName, String algorithm)&#xD;
            throws IOException, NoSuchAlgorithmException, InvalidKeySpecException, InvalidKeyException {&#xD;
        // Read the key from the specified file.&#xD;
        File keyFile = new File(masterKeyDir + File.separator + masterKeyName);&#xD;
        FileInputStream keyInputStream = new FileInputStream(keyFile);&#xD;
        byte[] encodedPrivateKey = new byte[(int) keyFile.length()];&#xD;
        keyInputStream.read(encodedPrivateKey);&#xD;
        keyInputStream.close();&#xD;
&#xD;
        // Reconstruct and return the master key.&#xD;
        return new SecretKeySpec(encodedPrivateKey, "AES");&#xD;
    }&#xD;
}</code></pre></div>
                     </div>
                     		
                     <p>The following example shows how to do these tasks:</p>
                     		
                     <div class="itemizedlist">
                        			
                        			
                        			
                        			
                        			
                        		
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              				
                              <p>Generate a 1024-bit
                                 					RSA
                                 					key pair
                              </p>
                              			
                           </li>
                           <li class="listitem">
                              				
                              <p>Save and load the RSA keys to and from the file system</p>
                              			
                           </li>
                           <li class="listitem">
                              				
                              <p>Use the RSA keys to encrypt data on the client side before sending it to
                                 					Amazon S3
                              </p>
                              			
                           </li>
                           <li class="listitem">
                              				
                              <p>Use the RSA keys to decrypt data received from Amazon S3</p>
                              			
                           </li>
                           <li class="listitem">
                              				
                              <p>Verify that the decrypted data is the same as the original data</p>
                              			
                           </li>
                        </ul>
                     </div>
                     		
                     <p>For instructions on creating and testing a working sample, see <a href="UsingTheMPJavaAPI.html#TestingJavaSamples">Testing the Amazon S3 Java Code Examples</a>.
                     </p>
                     		<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="java ">// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.&#xD;
// SPDX-License-Identifier: MIT-0 (For details, see https://github.com/awsdocs/amazon-s3-developer-guide/blob/master/LICENSE-SAMPLECODE.)&#xD;
&#xD;
import java.io.ByteArrayInputStream;&#xD;
import java.io.File;&#xD;
import java.io.FileInputStream;&#xD;
import java.io.FileOutputStream;&#xD;
import java.io.IOException;&#xD;
import java.security.KeyFactory;&#xD;
import java.security.KeyPair;&#xD;
import java.security.KeyPairGenerator;&#xD;
import java.security.NoSuchAlgorithmException;&#xD;
import java.security.PrivateKey;&#xD;
import java.security.PublicKey;&#xD;
import java.security.SecureRandom;&#xD;
import java.security.spec.InvalidKeySpecException;&#xD;
import java.security.spec.PKCS8EncodedKeySpec;&#xD;
import java.security.spec.X509EncodedKeySpec;&#xD;
&#xD;
import com.amazonaws.AmazonServiceException;&#xD;
import com.amazonaws.SdkClientException;&#xD;
import com.amazonaws.auth.profile.ProfileCredentialsProvider;&#xD;
import com.amazonaws.services.s3.AmazonS3;&#xD;
import com.amazonaws.services.s3.AmazonS3EncryptionClientBuilder;&#xD;
import com.amazonaws.services.s3.model.EncryptionMaterials;&#xD;
import com.amazonaws.services.s3.model.ObjectMetadata;&#xD;
import com.amazonaws.services.s3.model.PutObjectRequest;&#xD;
import com.amazonaws.services.s3.model.S3Object;&#xD;
import com.amazonaws.services.s3.model.StaticEncryptionMaterialsProvider;&#xD;
import com.amazonaws.util.IOUtils;&#xD;
&#xD;
public class S3ClientSideEncryptionAsymmetricMasterKey {&#xD;
&#xD;
    public static void main(String[] args) throws Exception {&#xD;
        String clientRegion = "*** Client region ***";&#xD;
        String bucketName = "*** Bucket name ***";&#xD;
        String objectKeyName = "*** Key name ***";&#xD;
        String rsaKeyDir = System.getProperty("java.io.tmpdir");&#xD;
        String publicKeyName = "public.key";&#xD;
        String privateKeyName = "private.key";&#xD;
&#xD;
        // Generate a 1024-bit RSA key pair.&#xD;
        KeyPairGenerator keyGenerator = KeyPairGenerator.getInstance("RSA");&#xD;
        keyGenerator.initialize(1024, new SecureRandom());&#xD;
        KeyPair origKeyPair = keyGenerator.generateKeyPair();&#xD;
&#xD;
        // To see how it works, save and load the key pair to and from the file system.&#xD;
        saveKeyPair(rsaKeyDir, publicKeyName, privateKeyName, origKeyPair);&#xD;
        KeyPair keyPair = loadKeyPair(rsaKeyDir, publicKeyName, privateKeyName, "RSA");&#xD;
&#xD;
        try {&#xD;
            // Create the encryption client.&#xD;
            EncryptionMaterials encryptionMaterials = new EncryptionMaterials(keyPair);&#xD;
            AmazonS3 s3EncryptionClient = AmazonS3EncryptionClientBuilder.standard()&#xD;
                    .withCredentials(new ProfileCredentialsProvider())&#xD;
                    .withEncryptionMaterials(new StaticEncryptionMaterialsProvider(encryptionMaterials))&#xD;
                    .withRegion(clientRegion)&#xD;
                    .build();&#xD;
    &#xD;
            // Create a new object.&#xD;
            byte[] plaintext = "S3 Object Encrypted Using Client-Side Asymmetric Master Key.".getBytes();&#xD;
            S3Object object = new S3Object();&#xD;
            object.setKey(objectKeyName);&#xD;
            object.setObjectContent(new ByteArrayInputStream(plaintext));&#xD;
            ObjectMetadata metadata = new ObjectMetadata();&#xD;
            metadata.setContentLength(plaintext.length);&#xD;
&#xD;
            // Upload the object. The encryption client automatically encrypts it.&#xD;
            PutObjectRequest putRequest = new PutObjectRequest(bucketName, &#xD;
                                                               object.getKey(), &#xD;
                                                               object.getObjectContent(),&#xD;
                                                               metadata);&#xD;
            s3EncryptionClient.putObject(putRequest);&#xD;
    &#xD;
            // Download and decrypt the object.&#xD;
            S3Object downloadedObject = s3EncryptionClient.getObject(bucketName, object.getKey());&#xD;
            byte[] decrypted = IOUtils.toByteArray(downloadedObject.getObjectContent());&#xD;
    &#xD;
            // Verify that the data that you downloaded is the same as the original data.&#xD;
            System.out.println("Plaintext: " + new String(plaintext));&#xD;
            System.out.println("Decrypted text: " + new String(decrypted));&#xD;
        }&#xD;
        catch(AmazonServiceException e) {&#xD;
            // The call was transmitted successfully, but Amazon S3 couldn't process &#xD;
            // it, so it returned an error response.&#xD;
            e.printStackTrace();&#xD;
        }&#xD;
        catch(SdkClientException e) {&#xD;
            // Amazon S3 couldn't be contacted for a response, or the client&#xD;
            // couldn't parse the response from Amazon S3.&#xD;
            e.printStackTrace();&#xD;
        }&#xD;
    }&#xD;
&#xD;
    private static void saveKeyPair(String dir, &#xD;
                                   String publicKeyName, &#xD;
                                   String privateKeyName, &#xD;
                                   KeyPair keyPair) throws IOException {&#xD;
        PrivateKey privateKey = keyPair.getPrivate();&#xD;
        PublicKey publicKey = keyPair.getPublic();&#xD;
&#xD;
        // Write the public key to the specified file.&#xD;
        X509EncodedKeySpec x509EncodedKeySpec = new X509EncodedKeySpec(publicKey.getEncoded());&#xD;
        FileOutputStream publicKeyOutputStream = new FileOutputStream(dir + File.separator + publicKeyName);&#xD;
        publicKeyOutputStream.write(x509EncodedKeySpec.getEncoded());&#xD;
        publicKeyOutputStream.close();&#xD;
&#xD;
        // Write the private key to the specified file.&#xD;
        PKCS8EncodedKeySpec pkcs8EncodedKeySpec = new PKCS8EncodedKeySpec(privateKey.getEncoded());&#xD;
        FileOutputStream privateKeyOutputStream = new FileOutputStream(dir + File.separator + privateKeyName);&#xD;
        privateKeyOutputStream.write(pkcs8EncodedKeySpec.getEncoded());&#xD;
        privateKeyOutputStream.close();&#xD;
    }&#xD;
&#xD;
    private static KeyPair loadKeyPair(String dir,&#xD;
                                      String publicKeyName,&#xD;
                                      String privateKeyName,&#xD;
                                      String algorithm)&#xD;
            throws IOException, NoSuchAlgorithmException, InvalidKeySpecException {&#xD;
        // Read the public key from the specified file.&#xD;
        File publicKeyFile = new File(dir + File.separator + publicKeyName);&#xD;
        FileInputStream publicKeyInputStream = new FileInputStream(publicKeyFile);&#xD;
        byte[] encodedPublicKey = new byte[(int) publicKeyFile.length()];&#xD;
        publicKeyInputStream.read(encodedPublicKey);&#xD;
        publicKeyInputStream.close();&#xD;
&#xD;
        // Read the private key from the specified file.&#xD;
        File privateKeyFile = new File(dir + File.separator + privateKeyName);&#xD;
        FileInputStream privateKeyInputStream = new FileInputStream(privateKeyFile);&#xD;
        byte[] encodedPrivateKey = new byte[(int) privateKeyFile.length()];&#xD;
        privateKeyInputStream.read(encodedPrivateKey);&#xD;
        privateKeyInputStream.close();&#xD;
&#xD;
        // Convert the keys into a key pair.&#xD;
        KeyFactory keyFactory = KeyFactory.getInstance(algorithm);&#xD;
        X509EncodedKeySpec publicKeySpec = new X509EncodedKeySpec(encodedPublicKey);&#xD;
        PublicKey publicKey = keyFactory.generatePublic(publicKeySpec);&#xD;
&#xD;
        PKCS8EncodedKeySpec privateKeySpec = new PKCS8EncodedKeySpec(encodedPrivateKey);&#xD;
        PrivateKey privateKey = keyFactory.generatePrivate(privateKeySpec);&#xD;
&#xD;
        return new KeyPair(publicKey, privateKey);&#xD;
    }&#xD;
}&#xD;
</code></pre>
                     	</div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="ServerSideEncryptionCustomerKeysSSEUsingRESTAPI.html">« Previous </a><a class="awstoc" accesskey="n" href="Versioning.html">Next »</a></div>
                     <div id="copyright-main-footer">© 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Option&#xA;&#x9;&#x9;&#x9;&#x9;1: Using an AWS KMS–Managed Customer Master Key&#xA;&#x9;&#x9;&#x9;&#x9;(CMK)"><a class="pagetoc" href="#client-side-encryption-kms-managed-master-key-intro">Option
                              				1: Using an AWS KMS–Managed Customer Master Key
                              				(CMK)</a></li>
                        <li class="pagetoc" name="Option 2: Using a&#xA;&#x9;&#x9;&#x9;&#x9;Client-Side Master Key"><a class="pagetoc" href="#client-side-encryption-client-side-master-key-intro">Option 2: Using a
                              				Client-Side Master Key</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <div id="cookie-notice">
         <div class="cookie-notice-text">We use cookies to provide and improve our services. By using our site, you consent
            to cookies. <a href="http://aws.amazon.com/legal/cookies">Learn more</a></div>
      </div>
      <div id="footer">
         <div id="footer_short_fb" class="hide" title="Feedback"><a target="_blank" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=S3&amp;topic_url=http://docs.aws.amazon.com/en_us/AmazonS3/latest/dev/UsingClientSideEncryption.html&amp;hidden_guide_name=Developer Guide&amp;hidden_api_version=2006-03-01&amp;hidden_file_name=UsingClientSideEncryption"><i class="awsdocs-footer-text fa fa-envelope-o"></i></a></div>
         <div id="footer_toggle" class="mediaobject">
            <div id="footer_toggle_img" class="awsdocs-footer-text fa fa-caret-down"></div>
            <div id="footer_toggle_img_collapse" class="hide awsdocs-footer-text fa fa-caret-right"></div>
         </div>
         <div id="footer-left"><a class="awsdocs-footer-text" target="_top" href="http://aws.amazon.com/terms">Terms of Use</a><span class="awsdocs-footer-text"> | </span><a class="awsdocs-footer-text" target="_top" href="http://aws.amazon.com/privacy">Privacy</a><span class="awsdocs-footer-text"> | </span><span class="awsdocs-footer-text">© 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</span></div>
         <div id="footer-right">
            <div id="feedback">
               <div id="forums"><a id="forum_link" target="_blank" href="http://forums.aws.amazon.com/forum.jspa?forumID=24" class="awsdocs-footer-text">Have a question? Try the Forums.</a></div>
               <div id="feedback-message" class="awsdocs-footer-text">Did this page help you?</div>
               <div id="feedback-yesno-buttons"><a class="awstoc btn btn-default" target="_blank" href="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/AmazonS3/latest/dev/UsingClientSideEncryption.html">Yes</a><a class="awstoc btn btn-default" target="_blank" href="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/AmazonS3/latest/dev/UsingClientSideEncryption.html">No</a></div>
               <div id="feedback-feedback-button"><a class="awstoc btn btn-default" target="_blank" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=S3&amp;topic_url=http://docs.aws.amazon.com/en_us/AmazonS3/latest/dev/UsingClientSideEncryption.html&amp;hidden_guide_name=Developer Guide&amp;hidden_api_version=2006-03-01&amp;hidden_file_name=UsingClientSideEncryption">Feedback</a></div>
            </div>
         </div>
      </div>
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='Amazon Simple Storage Service';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='Developer Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   </body>
</html>