<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Specifying Conditions in a Policy - Amazon Simple Storage Service</title>
      <meta name="viewport" content="width=device-width, initial-scale=1" />
      <link rel="home" href="#top" />
      <link rel="up" href="access-policy-language-overview.html" title="Access Policy Language&#xA;&#x9;&#x9;&#x9;&#x9;Overview" />
      <link rel="prev" href="using-with-s3-actions.html" title="Specifying Permissions in a Policy" />
      <link rel="next" href="example-bucket-policies.html" title="Bucket Policy Examples" />
      <meta name="description" content="How to specify the conditions in a policy for Amazon S3." />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="Amazon Simple Storage Service" />
      <meta name="guide" content="Developer Guide" />
      <meta name="guide-locale" content="en_us" />
      <link rel="icon" type="image/ico" href="/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico" />
      <link rel="canonical" href="https://docs.aws.amazon.com/AmazonS3/latest/dev/amazon-s3-policy-keys.html" />
      <link rel="stylesheet" type="text/css" href="/css/jquery-ui.min.css" />
      <link rel="stylesheet" type="text/css" href="/font/css/font-awesome.min.css" />
      <link rel="stylesheet" type="text/css" href="/css/google-font.css" />
      <link id="code-style" rel="stylesheet" type="text/css" href="/css/code/light.css" />
      <link rel="stylesheet" type="text/css" href="/css/jquery-ui.theme.css" />
      <link rel="stylesheet" type="text/css" href="/css/colorbox.css" />
      <link rel="stylesheet" type="text/css" href="/css/awsdocs.css?v=20170615" /><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      <div xmlns:db="http://docbook.org/ns/docbook" id="aws-nav" class="aws-nav-header">
         <div class="aws-nav-header-left">
            <div id="aws-nav-flyout-trigger" class="aws-nav-flyout-trigger"><i class="fa fa-bars fa-2x"></i></div>
            <div class="aws-nav-logo">
               <!--aws_logo_105x39.png--><a href="http://aws.amazon.com"><img src="/images/aws_logo_105x39.png" alt="Amazon Web Services" /></a></div>
         </div>
         <div id="aws-nav-header-right" class="aws-nav-header-right">
            <div class="aws-nav-cta-button-outer"><a id="aws-nav-cta-button" class="aws-nav-button" href="https://console.aws.amazon.com/console/home">Sign In to the Console</a></div>
            <div class="aws-nav-popover-trigger" data-dropdown="aws-nav-dropdown-lang"><select id="languageSelection" onchange="SelectLanguage()">
                  <option value="/de_de/AmazonS3/latest/dev/amazon-s3-policy-keys.html">Deutsch</option>
                  <option value="/en_us/AmazonS3/latest/dev/amazon-s3-policy-keys.html" selected="selected">English</option>
                  <option value="/es_es/AmazonS3/latest/dev/amazon-s3-policy-keys.html">Español</option>
                  <option value="/fr_fr/AmazonS3/latest/dev/amazon-s3-policy-keys.html">Français</option>
                  <option value="/it_it/AmazonS3/latest/dev/amazon-s3-policy-keys.html">Italiano</option>
                  <option value="/ja_jp/AmazonS3/latest/dev/amazon-s3-policy-keys.html">日本語</option>
                  <option value="/ko_kr/AmazonS3/latest/dev/amazon-s3-policy-keys.html">한국어</option>
                  <option value="/pt_br/AmazonS3/latest/dev/amazon-s3-policy-keys.html">Português</option>
                  <option value="/zh_cn/AmazonS3/latest/dev/amazon-s3-policy-keys.html">中文 (简体)</option>
                  <option value="/zh_tw/AmazonS3/latest/dev/amazon-s3-policy-keys.html">中文 (繁體)</option></select></div><a class="btn btn-rss-link" id="rss-link-top" target="_blank" href="s3-dev-guide-rss-updates.rss" title="View RSS Feed"></a><a class="btn btn-kindle-link" id="kindle-link-top" target="_blank" href="http://www.amazon.com/dp/B0763Z4YVV" title="Open Kindle"></a><a class="btn btn-pdf-link" id="pdf-link-top" href="s3-dg.pdf#amazon-s3-policy-keys" target="_blank" title="Open PDF"></a><a class="btn btn-github-link" id="github-link-top" href="https://github.com/awsdocs/amazon-s3-developer-guide/tree/master/doc_source/amazon-s3-policy-keys.md" target="_blank" title="Edit on GitHub"></a><div id="aws-nav-quicklinks-separator" class="aws-nav-quicklinks-separator">
               <div class="aws-nav-left"></div>
               <div class="aws-nav-right"></div>
            </div>
         </div>
         <div xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" id="topnav-flyout-menu-container">
            <ul id="topnav-flyout-menu"><script id="flyout-item-template" type="text/x-handlebars-template">
                    {{#flyoutList}}

                        {{#if topTarget}}
                            <li class="awsdocs-flyout-link-wrapper"><a href="{{topTarget}}">{{listItem}}</a></li>
                        {{else}}
                            <li>{{listItem}}
                                {{#if subList}}
                                <ul>
                                    {{#subList}}
                                    <li class="awsdocs-flyout-link-wrapper"><a href="{{target}}">{{text}}</a></li>
                                    {{/subList}}
                                </ul>
                                {{/if}}
                            </li>
                        {{/if}}

                    {{/flyoutList}}
                </script></ul>
            <div id="topnav-flyout-menu-spacer"></div>
         </div>
      </div>
      <div id="content-container">
         <div id="left-column">
            <div id="left-col-header">
               <div xmlns:db="http://docbook.org/ns/docbook" id="left-col-top-content">
                  <div id="service-name">Amazon Simple Storage Service </div>
                  <div id="search"><i id="search-icon" class="fa fa-search fa-2x"></i></div>
                  <div id="guide-info">Developer Guide (API Version 2006-03-01)
                     <div id="content-button"><i id="toggle-contents" class="fa fa-bars"></i></div>
                  </div>
               </div>
               <form id="finegrainedSearch" method="get" onsubmit="return searchFormSubmit(this);" action="/search/doc-search.html">
                  <div id="search-form"><select id="search-select" name="searchPath">
                        <option value="all">Entire Site</option>
                        <option value="AWSMarketplace">AMIs from AWS Marketplace</option>
                        <option value="amis">AMIs from All Sources</option>
                        <option value="articles">Articles &amp; Tutorials</option>
                        <option value="products_and_info">AWS Product Information</option>
                        <option value="case_studies">Case Studies</option>
                        <option value="customerapps">Customer Apps</option>
                        <option value="documentation">Documentation</option>
                        <option value="documentation-product">Documentation - This Product</option>
                        <option value="documentation-guide" selected="selected">Documentation - This Guide</option>
                        <option value="datasets">Public Data Sets</option>
                        <option value="releasenotes">Release Notes</option>
                        <option value="solution_providers">Partners</option>
                        <option value="code">Sample Code &amp; Libraries</option></select><br /><input id="search-query" name="searchQuery" type="text" placeholder="Search" /><input id="search-button" src="/images/search-button.png" alt="Go" type="image" /></div><input type="hidden" name="this_doc_product" id="this_doc_product" value="Amazon Simple Storage Service" /><input type="hidden" name="this_doc_guide" id="this_doc_guide" value="Developer Guide" /><input type="hidden" name="doc_locale" value="en_us" /></form>
            </div>
            <div id="toc">
               <ul class="awstoc">
                  <li class="awstoc leaf"><a class="awstoc" href="Welcome.html">What Is Amazon S3?</a></li>
                  <li class="awstoc leaf"><a class="awstoc" href="Introduction.html">Introduction</a></li>
                  <li class="awstoc closed"><a class="awstoc" href="MakingRequests.html">Making Requests</a><ul class="awstoc">
                        <li class="awstoc closed"><a class="awstoc" href="ipv6-access.html">Making Requests over IPv6</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="dual-stack-endpoints.html">Using Dual-Stack Endpoints</a></li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="MakingAuthenticatedRequests.html">Making Requests Using the AWS SDKs</a><ul class="awstoc">
                              <li class="awstoc closed"><a class="awstoc" href="AuthUsingAcctOrUserCredentials.html">Using AWS Account or IAM User Credentials</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="AuthUsingAcctOrUserCredJava.html">Making Requests Using AWS Account or IAM User Credentials - AWS SDK for Java</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="AuthUsingAcctOrUserCredDotNet.html">Making Requests Using AWS Account or IAM User Credentials - AWS SDK for .NET</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="AuthUsingAcctOrUserCredPHP3.html">Making Requests Using AWS Account or IAM User Credentials - AWS SDK for PHP</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="AuthUsingAcctOrUserCredRuby.html">Making Requests Using AWS Account or IAM User Credentials - AWS SDK for Ruby</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc closed"><a class="awstoc" href="AuthUsingTempSessionToken.html">Using IAM User Temporary Credentials</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="AuthUsingTempSessionTokenJava.html">Making Requests Using IAM User Temporary Credentials - AWS SDK for Java</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="AuthUsingTempSessionTokenDotNet.html">Making Requests Using IAM User Temporary Credentials - AWS SDK for .NET</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="AuthUsingTempSessionTokenPHP.html">Making Requests Using AWS Account or IAM User Temporary Credentials - AWS SDK for
                                          PHP</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="AuthUsingTempSessionTokenRuby.html">Making Requests Using IAM User Temporary Credentials - AWS SDK for Ruby</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc closed"><a class="awstoc" href="AuthUsingTempFederationToken.html">Using Federated User Temporary Credentials</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="AuthUsingTempFederationTokenJava.html">Making Requests Using Federated User Temporary Credentials - AWS SDK for Java</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="AuthUsingTempFederationTokenDotNet.html">Making Requests Using Federated User Temporary Credentials - AWS SDK for .NET</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="AuthUsingTempFederationTokenPHP.html">Making Requests Using Federated User Temporary Credentials - AWS SDK for PHP</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="AuthUsingTempFederationTokenRuby.html">Making Requests Using Federated User Temporary Credentials - AWS SDK for Ruby</a></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="RESTAPI.html">Making Requests Using the REST API</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="VirtualHosting.html">Virtual Hosting of Buckets</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="RESTRedirect.html">Request Redirection and the REST API</a></li>
                           </ul>
                        </li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="UsingBucket.html">Buckets</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="BucketRestrictions.html">Restrictions and Limitations</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="create-bucket-get-location-example.html">Examples of Creating a Bucket</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="delete-or-empty-bucket.html">Deleting or Emptying a Bucket</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="bucket-encryption.html">Default Encryption for a Bucket</a></li>
                        <li class="awstoc closed"><a class="awstoc" href="ManagingBucketWebsiteConfig.html">Bucket Website Configuration</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="ConfigWebSiteConsole.html">Using the AWS Management Console</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="ConfigWebSiteJava.html">Using the AWS SDK for Java</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="ConfigWebSiteDotNet.html">Using the AWS SDK for .NET</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="ConfigWebSitePHP.html">Using the SDK for PHP</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="ConfigWebSiteREST.html">Using the REST API</a></li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="transfer-acceleration.html">Transfer Acceleration</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="transfer-acceleration-examples.html">Transfer Acceleration Examples</a></li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="RequesterPaysBuckets.html">Requester Pays Buckets</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="configure-requester-pays-console.html">Configure with the Console</a></li>
                              <li class="awstoc closed"><a class="awstoc" href="configure-requester-pays-rest.html">Configure with the REST API</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="RequesterPaysBucketConfiguration.html">Setting the requestPayment Bucket Configuration</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="BucketPayerValues.html">Retrieving the requestPayment Configuration</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ObjectsinRequesterPaysBuckets.html">Downloading Objects in Requester Pays Buckets</a></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li class="awstoc leaf"><a class="awstoc" href="BucketAccess.html">Access Control</a></li>
                        <li class="awstoc closed"><a class="awstoc" href="BucketBilling.html">Billing and Usage Reporting</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="aws-billing-reports.html">Billing Reports</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="aws-usage-report.html">Usage Report</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="aws-usage-report-understand.html">Understanding Billing and Usage Reports</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="CostAllocTagging.html">Using Cost Allocation Tags</a></li>
                           </ul>
                        </li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="UsingObjects.html">Objects</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="UsingMetadata.html">Object Key and Metadata</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="storage-class-intro.html">Storage Classes</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="ObjectAndSoubResource.html">Subresources</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="ObjectVersioning.html">Versioning</a></li>
                        <li class="awstoc closed"><a class="awstoc" href="object-tagging.html">Object Tagging</a><ul class="awstoc">
                              <li class="awstoc closed"><a class="awstoc" href="tagging-managing.html">Managing Object Tags</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="tagging-manage-console.html">Managing Object Tags the Console</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="tagging-manage-javasdk.html">Managing Tags Using the AWS SDK for Java</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="tagging-manage-dotnet.html">Managing Tags Using the AWS SDK for .NET</a></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="object-lifecycle-mgmt.html">Lifecycle Management</a><ul class="awstoc">
                              <li class="awstoc closed"><a class="awstoc" href="lifecycle-additional-considerations.html">Additional Considerations</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="lifecycle-transition-general-considerations.html">Transitioning Objects</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="lifecycle-expire-general-considerations.html">Configuring Object Expiration</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="lifecycle-and-other-bucket-config.html">Lifecycle and Other Bucket Configurations</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc leaf"><a class="awstoc" href="intro-lifecycle-rules.html">Lifecycle Configuration Elements</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="lifecycle-configuration-examples.html">Examples of Lifecycle Configuration</a></li>
                              <li class="awstoc closed"><a class="awstoc" href="how-to-set-lifecycle-configuration-intro.html">Setting Lifecycle Configuration</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="manage-lifecycle-using-console.html">Using the Amazon S3 console</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="set-lifecycle-cli.html">Using the AWS CLI</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="manage-lifecycle-using-java.html">Using the AWS SDK for Java</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="manage-lifecycle-using-dot-net.html">Using the AWS SDK for .NET</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="manage-lifecycle-using-ruby.html">Using the AWS SDK for Ruby</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="manage-lifecycle-using-rest.html">Using the REST API</a></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="cors.html">Cross-Origin Resource Sharing (CORS)</a><ul class="awstoc">
                              <li class="awstoc closed"><a class="awstoc" href="ManageCorsUsing.html">Enabling CORS</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="ManageCorsUsingConsole.html">Using the AWS Management Console</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ManageCorsUsingJava.html">Using the SDK for Java</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ManageCorsUsingDotNet.html">Using the AWS SDK for .NET</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="EnableCorsUsingREST.html">Using the REST API</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc leaf"><a class="awstoc" href="cors-troubleshooting.html">Troubleshooting CORS</a></li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="ObjectOperations.html">Operations on Objects</a><ul class="awstoc">
                              <li class="awstoc closed"><a class="awstoc" href="GettingObjectsUsingAPIs.html">Getting Objects</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="RetrievingObjectUsingJava.html">Using the SDK for Java</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="RetrievingObjectUsingNetSDK.html">Using the AWS SDK for .NET</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="RetrieveObjSingleOpPHP.html">Using the SDK for PHP</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="RetrieveObjSingleOpREST.html">Using the REST API</a></li>
                                    <li class="awstoc closed"><a class="awstoc" href="ShareObjectPreSignedURL.html">Share an Object with Others</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="ShareObjectPreSignedURLVSExplorer.html">Generate a Pre-signed Object URL using AWS Explorer for Visual Studio</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="ShareObjectPreSignedURLJavaSDK.html">Generate a Pre-signed Object URL Using the AWS SDK for Java</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="ShareObjectPreSignedURLDotNetSDK.html">Generate a Pre-signed Object URL Using AWS SDK for .NET</a></li>
                                       </ul>
                                    </li>
                                 </ul>
                              </li>
                              <li class="awstoc closed"><a class="awstoc" href="UploadingObjects.html">Uploading Objects</a><ul class="awstoc">
                                    <li class="awstoc closed"><a class="awstoc" href="UploadInSingleOp.html">Uploading Objects in a Single Operation</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="UploadObjSingleOpJava.html">Using the SDK for Java</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="UploadObjSingleOpNET.html">Using the AWS SDK for .NET</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="UploadObjSingleOpPHP.html">Using the SDK for PHP</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="UploadObjSingleOpRuby.html">Using the SDK for Ruby</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="UploadObjSingleOpREST.html">Using the REST API</a></li>
                                       </ul>
                                    </li>
                                    <li class="awstoc closed"><a class="awstoc" href="uploadobjusingmpu.html">Uploading Objects Using Multipart Upload API</a><ul class="awstoc">
                                          <li class="awstoc closed"><a class="awstoc" href="mpuoverview.html">Multipart Upload Overview</a><ul class="awstoc">
                                                <li class="awstoc leaf"><a class="awstoc" href="qfacts.html">Multipart Upload Limits</a></li>
                                                <li class="awstoc leaf"><a class="awstoc" href="sdksupportformpu.html">API Support for Multipart Upload</a></li>
                                                <li class="awstoc leaf"><a class="awstoc" href="mpuAndPermissions.html">Multipart Upload API and Permissions</a></li>
                                             </ul>
                                          </li>
                                          <li class="awstoc closed"><a class="awstoc" href="usingHLmpuJava.html">Using the AWS Java SDK (High-Level API)</a><ul class="awstoc">
                                                <li class="awstoc leaf"><a class="awstoc" href="HLuploadFileJava.html">Upload a File</a></li>
                                                <li class="awstoc leaf"><a class="awstoc" href="HLAbortMPUploadsJava.html">Abort Multipart Uploads</a></li>
                                                <li class="awstoc leaf"><a class="awstoc" href="HLTrackProgressMPUJava.html">Track Multipart Upload Progress</a></li>
                                             </ul>
                                          </li>
                                          <li class="awstoc closed"><a class="awstoc" href="mpListPartsJavaAPI.html">Using the AWS Java SDK (Low-Level API)</a><ul class="awstoc">
                                                <li class="awstoc leaf"><a class="awstoc" href="llJavaUploadFile.html">Upload a File</a></li>
                                                <li class="awstoc leaf"><a class="awstoc" href="LLlistMPuploadsJava.html">List Multipart Uploads</a></li>
                                                <li class="awstoc leaf"><a class="awstoc" href="LLAbortMPUJava.html">Abort a Multipart Upload</a></li>
                                             </ul>
                                          </li>
                                          <li class="awstoc closed"><a class="awstoc" href="usingHLmpuDotNet.html">Using the AWS .NET SDK (High-Level API)</a><ul class="awstoc">
                                                <li class="awstoc leaf"><a class="awstoc" href="HLuploadFileDotNet.html">Upload a File</a></li>
                                                <li class="awstoc leaf"><a class="awstoc" href="HLuploadDirDotNet.html">Upload a Directory</a></li>
                                                <li class="awstoc leaf"><a class="awstoc" href="HLAbortDotNet.html">Abort Multipart Uploads</a></li>
                                                <li class="awstoc leaf"><a class="awstoc" href="HLTrackProgressMPUDotNet.html">Track Multipart Upload Progress</a></li>
                                             </ul>
                                          </li>
                                          <li class="awstoc closed"><a class="awstoc" href="usingLLmpuDotNet.html">Using the AWS .NET SDK (Low-Level API)</a><ul class="awstoc">
                                                <li class="awstoc leaf"><a class="awstoc" href="LLuploadFileDotNet.html">Upload a File</a></li>
                                                <li class="awstoc leaf"><a class="awstoc" href="LLlistMPuploadsDotNet.html">List Multipart Uploads</a></li>
                                                <li class="awstoc leaf"><a class="awstoc" href="LLTrackProgressMPUNet.html">Track Multipart Upload Progress</a></li>
                                                <li class="awstoc leaf"><a class="awstoc" href="LLAbortMPUnet.html">Abort a Multipart Upload</a></li>
                                             </ul>
                                          </li>
                                          <li class="awstoc leaf"><a class="awstoc" href="usingHLmpuPHP.html">Using the AWS PHP SDK (High-Level API)</a></li>
                                          <li class="awstoc closed"><a class="awstoc" href="usingLLmpuPHP.html">Using the AWS PHP SDK (Low-Level API)</a><ul class="awstoc">
                                                <li class="awstoc leaf"><a class="awstoc" href="LLuploadFilePHP.html">Upload a File</a></li>
                                                <li class="awstoc leaf"><a class="awstoc" href="LLlistMPuploadsPHP.html">List Multipart Uploads</a></li>
                                                <li class="awstoc leaf"><a class="awstoc" href="LLAbortMPUphp.html">Abort a Multipart Upload</a></li>
                                             </ul>
                                          </li>
                                          <li class="awstoc leaf"><a class="awstoc" href="uploadobjusingmpu-ruby-sdk.html">Using the SDK for Ruby</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="UsingRESTAPImpUpload.html">Using the REST API</a></li>
                                       </ul>
                                    </li>
                                    <li class="awstoc closed"><a class="awstoc" href="PresignedUrlUploadObject.html">Uploading Objects Using Pre-Signed URLs</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="PresignedUrlUploadObjectJavaSDK.html">Using the SDK for Java</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="UploadObjectPreSignedURLDotNetSDK.html">Using the AWS SDK for .NET</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="UploadObjectPreSignedURLRubySDK.html">Using the AWS SDK for Ruby</a></li>
                                       </ul>
                                    </li>
                                 </ul>
                              </li>
                              <li class="awstoc closed"><a class="awstoc" href="CopyingObjectsExamples.html">Copying Objects</a><ul class="awstoc">
                                    <li class="awstoc closed"><a class="awstoc" href="CopyingObjectsUsingAPIs.html">Copying Objects in a Single Operation</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="CopyingObjectUsingJava.html">Using the SDK for Java</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="CopyingObjectUsingNetSDK.html">Using the AWS SDK for .NET</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="CopyingObjectUsingPHP.html">Using the SDK for PHP</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="CopyingObjectUsingRuby.html">Using the SDK for Ruby</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="CopyingObjectUsingREST.html">Using the REST API</a></li>
                                       </ul>
                                    </li>
                                    <li class="awstoc closed"><a class="awstoc" href="CopyingObjctsMPUapi.html">Copying Objects Using the Multipart Upload API</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="CopyingObjctsUsingLLJavaMPUapi.html">Using the SDK for Java</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="CopyingObjctsUsingLLNetMPUapi.html">Copy an Object Using the AWS SDK for .NET</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="CopyingObjctsUsingRESTMPUapi.html">Using the REST API</a></li>
                                       </ul>
                                    </li>
                                 </ul>
                              </li>
                              <li class="awstoc closed"><a class="awstoc" href="ListingKeysUsingAPIs.html">Listing Object Keys</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="ListingKeysHierarchy.html">Using a Prefix and Delimiter</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ListingObjectKeysUsingJava.html">Using the SDK for Java</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ListingObjectKeysUsingNetSDK.html">Using the AWS SDK for .NET</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ListingObjectKeysUsingPHP.html">Using the SDK for PHP</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ListingObjectKeysUsingREST.html">Using the REST API</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc closed"><a class="awstoc" href="DeletingObjects.html">Deleting Objects</a><ul class="awstoc">
                                    <li class="awstoc closed"><a class="awstoc" href="DeletingOneObject.html">Deleting One Object Per Request</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="DeletingOneObjectUsingJava.html">Using the SDK for Java</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="DeletingOneObjectUsingNetSDK.html">Using the AWS SDK for .NET</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="DeletingOneObjectUsingPHPSDK.html">Using the SDK for PHP</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="DeletingAnObjectsUsingREST.html">Using the REST API</a></li>
                                       </ul>
                                    </li>
                                    <li class="awstoc closed"><a class="awstoc" href="DeletingMultipleObjects.html">Deleting Multiple Objects Per Request</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="DeletingMultipleObjectsUsingJava.html">Using the SDK for Java</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="DeletingMultipleObjectsUsingNetSDK.html">Using the AWS SDK for .NET</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="DeletingMultipleObjectsUsingPHPSDK.html">Using the SDK for PHP</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="DeletingMultipleObjectsUsingREST.html">Using the REST API</a></li>
                                       </ul>
                                    </li>
                                 </ul>
                              </li>
                              <li class="awstoc closed"><a class="awstoc" href="selecting-content-from-objects.html">Selecting Content from Objects</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="SelectObjectContentUsingJava.html">Using the SDK for Java</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="SelectObjectContentUsingRestApi.html">Using the REST API</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="SelectObjectContentUsingOtherSDKs.html">Using Other SDKs</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc closed"><a class="awstoc" href="restoring-objects.html">Restoring Archived Objects</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="restoring-objects-console.html">Using the Console</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="restoring-objects-java.html">Using the SDK for Java</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="restore-object-dotnet.html">Using the AWS SDK for .NET</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="restoring-objects-rest.html">Using the REST API</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc leaf"><a class="awstoc" href="querying-glacier-archives.html">Querying Archived Objects</a></li>
                           </ul>
                        </li>
                     </ul>
                  </li>
                  <li class="awstoc leaf"><a class="awstoc" href="analytics-storage-class.html">Storage Class Analysis</a></li>
                  <li class="awstoc leaf"><a class="awstoc" href="storage-inventory.html">Inventory</a></li>
                  <li class="awstoc opened"><a class="awstoc" href="s3-access-control.html">Managing Access</a><ul class="awstoc">
                        <li class="awstoc closed"><a class="awstoc" href="intro-managing-access-s3-resources.html">Introduction</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="access-control-overview.html">Overview</a></li>
                              <li class="awstoc closed"><a class="awstoc" href="how-s3-evaluates-access-control.html">How Amazon S3 Authorizes a Request</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="access-control-auth-workflow-bucket-operation.html">For a Bucket Operation</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="access-control-auth-workflow-object-operation.html">For an Object Operation</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc leaf"><a class="awstoc" href="access-policy-alternatives-guidelines.html">Guidelines for Using the Available Access Policy Options</a></li>
                              <li class="awstoc closed"><a class="awstoc" href="example-walkthroughs-managing-access.html">Example Walkthroughs: Managing Access</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="policy-eval-walkthrough-download-awscli.html">Setting Up Tools</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="example-walkthroughs-managing-access-example1.html">Example 1: Bucket Owner Granting Its Users Bucket Permissions</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="example-walkthroughs-managing-access-example2.html">Example 2: Bucket Owner Granting Cross-Account Bucket Permissions</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="example-walkthroughs-managing-access-example3.html">Example 3: Bucket Owner Granting Its Users Permissions to Objects It Does Not Own</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="example-walkthroughs-managing-access-example4.html">Example 4: Bucket Owner Granting Cross-account Permission to Objects It Does Not Own</a></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li class="awstoc opened"><a class="awstoc" href="using-iam-policies.html">Using Bucket Policies and User Policies</a><ul class="awstoc">
                              <li class="awstoc opened"><a class="awstoc" href="access-policy-language-overview.html">Access Policy Language Overview</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="s3-arn-format.html">Specifying Resources</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="s3-bucket-user-policy-specifying-principal-intro.html">Specifying a Principal</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="using-with-s3-actions.html">Specifying Permissions</a></li>
                                    <li class="awstoc leaf"><a class="awstoc selected" href="amazon-s3-policy-keys.html">Specifying Conditions</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc closed"><a class="awstoc" href="example-bucket-policies.html">Bucket Policy Examples</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="example-bucket-policies-vpc-endpoint.html">Example Bucket Policies for VPC Endpoints</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc closed"><a class="awstoc" href="example-policies-s3.html">User Policy Examples</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="walkthrough1.html">An Example Walkthrough: Using user policies to control access to your bucket</a></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="S3_ACLs_UsingACLs.html">Managing Access with ACLs</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="acl-overview.html">Access Control List (ACL) Overview</a></li>
                              <li class="awstoc closed"><a class="awstoc" href="managing-acls.html">Managing ACLs</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="manage-acls-using-console.html">Managing ACLs in the AWS Management Console</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="acl-using-java-sdk.html">Managing ACLs Using the AWS SDK for Java</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="acl-using-dot-net-sdk.html">Managing ACLs Using the AWS SDK for .NET</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="acl-using-rest-api.html">Managing ACLs Using the REST API</a></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="DataDurability.html">Protecting Data</a><ul class="awstoc">
                        <li class="awstoc closed"><a class="awstoc" href="UsingEncryption.html">Data Encryption</a><ul class="awstoc">
                              <li class="awstoc closed"><a class="awstoc" href="serv-side-encryption.html">Server-Side Encryption</a><ul class="awstoc">
                                    <li class="awstoc closed"><a class="awstoc" href="UsingKMSEncryption.html">KMS-Managed Encryption Keys</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="kms-using-sdks.html">SSE-KMS and AWS SDKs</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="KMSUsingRESTAPI.html">SSE-KMS REST API</a></li>
                                       </ul>
                                    </li>
                                    <li class="awstoc closed"><a class="awstoc" href="UsingServerSideEncryption.html">Amazon S3-Managed Encryption Keys</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="SSEUsingJavaSDK.html">AWS SDK for Java</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="SSEUsingDotNetSDK.html">AWS SDK for .NET</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="SSEUsingPHPSDK.html">AWS SDK for PHP</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="SSEUsingRubySDK.html">AWS SDK for Ruby</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="SSEUsingRESTAPI.html">REST API</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="SSEUsingConsole.html">AWS Management Console</a></li>
                                       </ul>
                                    </li>
                                    <li class="awstoc closed"><a class="awstoc" href="ServerSideEncryptionCustomerKeys.html">Customer-Provided Encryption Keys</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="sse-c-using-java-sdk.html">Specifying Server-Side Encryption with Customer-Provided Encryption Keys Using the
                                                AWS SDK for Java</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="sse-c-using-dot-net-sdk.html">AWS SDK for .NET</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="ServerSideEncryptionCustomerKeysSSEUsingRESTAPI.html">REST API</a></li>
                                       </ul>
                                    </li>
                                 </ul>
                              </li>
                              <li class="awstoc leaf"><a class="awstoc" href="UsingClientSideEncryption.html">Client-Side Encryption</a></li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="Versioning.html">Versioning</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="manage-versioning-examples.html">Examples</a></li>
                              <li class="awstoc closed"><a class="awstoc" href="manage-objects-versioned-bucket.html">Managing Objects in a Versioning-Enabled Bucket</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="AddingObjectstoVersioningEnabledBuckets.html">Adding Objects to Versioning-Enabled Buckets</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="list-obj-version-enabled-bucket.html">Listing Objects in a Versioning-Enabled Bucket</a></li>
                                    <li class="awstoc closed"><a class="awstoc" href="RetrievingObjectVersions.html">Retrieving Object Versions</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="RetMetaOfObjVersion.html">Retrieving the Metadata of an Object Version</a></li>
                                       </ul>
                                    </li>
                                    <li class="awstoc closed"><a class="awstoc" href="DeletingObjectVersions.html">Deleting Object Versions</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="UsingMFADelete.html">Using MFA Delete</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="DeleteMarker.html">Working with Delete Markers</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="RemDelMarker.html">Removing Delete Markers</a></li>
                                       </ul>
                                    </li>
                                    <li class="awstoc leaf"><a class="awstoc" href="transitioning-object-versions.html">Transitioning Object Versions</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="RestoringPreviousVersions.html">Restoring Previous Versions</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="VersionedObjectPermissionsandACLs.html">Versioned Object Permissions</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc closed"><a class="awstoc" href="VersionSuspendedBehavior.html">Managing Objects in a Versioning-Suspended Bucket</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="AddingObjectstoVersionSuspendedBuckets.html">Adding Objects to Versioning-Suspended Buckets</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="RetrievingObjectsfromVersioningSuspendedBuckets.html">Retrieving Objects from Versioning-Suspended Buckets</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="DeletingObjectsfromVersioningSuspendedBuckets.html">Deleting Objects from Versioning-Suspended Buckets</a></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="WebsiteHosting.html">Hosting a Static Website</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="WebsiteEndpoints.html">Website Endpoints</a></li>
                        <li class="awstoc closed"><a class="awstoc" href="HowDoIWebsiteConfiguration.html">Configuring a Bucket for Website Hosting</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="EnableWebsiteHosting.html">Enabling Website Hosting</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="IndexDocumentSupport.html">Configuring Index Document Support</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="WebsiteAccessPermissionsReqd.html">Permissions Required for Website Access</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="LoggingWebsiteTraffic.html">(Optional) Configuring Web Traffic Logging</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="CustomErrorDocSupport.html">(Optional) Custom Error Document Support</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="how-to-page-redirect.html">(Optional) Configuring a Redirect</a></li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="hosting-websites-on-s3-examples.html">Example Walkthroughs</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="HostingWebsiteOnS3Setup.html">Example: Setting up a Static Website</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="website-hosting-custom-domain-walkthrough.html">Example: Setting up a Static Website Using a Custom Domain</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="website-hosting-cloudfront-walkthrough.html">Example: Speed Up Your Website with Amazon CloudFront</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="getting-started-cleanup.html">Clean Up Example Resources</a></li>
                           </ul>
                        </li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="NotificationHowTo.html">Notifications</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="ways-to-add-notification-config-to-bucket.html">Example Walkthrough 1</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="notification-walkthrough-2.html">Example Walkthrough 2</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="notification-content-structure.html">Event Message Structure</a></li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="crr.html">Cross-Region Replication</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="crr-what-is-isnot-replicated.html">What Does Amazon S3 Replicate?</a></li>
                        <li class="awstoc closed"><a class="awstoc" href="crr-how-setup.html">Overview of Setting Up CRR</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="crr-add-config.html">Replication Configuration Overview</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="setting-repl-config-perm-overview.html">Setting Up Permissions for CRR</a></li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="crr-additional-configs.html">Additional CRR Configurations</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="crr-change-owner.html">CRR Additional Configuration: Changing Replica Owner</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="crr-replication-config-for-kms-objects.html">CRR Additional Configuration: Replicating Encrypted Objects</a></li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="crr-example-walkthroughs.html">CRR Walkthroughs</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="crr-walkthrough1.html">CRR Example 1: Same AWS Account</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="crr-walkthrough-2.html">CRR Example 2: Different AWS Accounts</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="crr-walkthrough-3.html">CRR Example 3: Change Replica Owner</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="crr-walkthrough-4.html">CRR Example 4: Replicating Encrypted Objects</a></li>
                           </ul>
                        </li>
                        <li class="awstoc leaf"><a class="awstoc" href="crr-status.html">CRR: Status Information</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="crr-troubleshoot.html">CRR: Troubleshooting</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="crr-and-other-bucket-configs.html">CRR: Additional Considerations</a></li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="UsingRouting.html">Request Routing</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="Redirects.html">Request Redirection and the REST API</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="DNSConsiderations.html">DNS Considerations</a></li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="PerformanceOptimization.html">Performance Optimization</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="request-rate-perf-considerations.html">Request Rate and Performance Guidelines</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="TCPWindowScaling.html">TCP Window Scaling</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="TCPSelectiveAcknowledgement.html">TCP Selective Acknowledgement</a></li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="monitoring-overview.html">Monitoring</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="monitoring-automated-manual.html">Monitoring Tools</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="cloudwatch-monitoring.html">Monitoring Metrics with CloudWatch</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="metrics-configurations.html">Metrics Configurations for Buckets</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="cloudtrail-logging.html">Logging API Calls with AWS CloudTrail</a></li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="S3Torrent.html">BitTorrent</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="S3TorrentCharge.html">How You are Charged for BitTorrent Delivery</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="S3TorrentRetrieve.html">Using BitTorrent to Retrieve Objects Stored in Amazon S3</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="S3TorrentPublish.html">Publishing Content Using Amazon S3 and BitTorrent</a></li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="HandlingErrors.html">Error Handling</a><ul class="awstoc">
                        <li class="awstoc closed"><a class="awstoc" href="UsingRESTError.html">The REST Error Response</a><ul class="awstoc">
                              <li class="awstoc closed"><a class="awstoc" href="ErrorResponse.html">Error Response</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="ErrorCode.html">Error Code</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ErrorMessage.html">Error Message</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ErrorDetails.html">Further Details</a></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li class="awstoc leaf"><a class="awstoc" href="UsingSOAPError.html">The SOAP Error Response</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="ErrorBestPractices.html">Amazon S3 Error Best Practices</a></li>
                     </ul>
                  </li>
                  <li class="awstoc leaf"><a class="awstoc" href="troubleshooting.html">Troubleshooting Amazon S3</a></li>
                  <li class="awstoc closed"><a class="awstoc" href="ServerLogs.html">Server Access Logging</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="enable-logging-console.html">Enabling Logging Using the Console</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="enable-logging-programming.html">Enabling Logging Programmatically</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="LogFormat.html">Log Format</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="deleting-log-files-lifecycle.html">Deleting Log Files</a></li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="UsingAWSSDK.html">AWS SDKs and Explorers</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="setup-aws-cli.html">Setting Up the AWS CLI</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="UsingTheMPJavaAPI.html">Using the AWS SDK for Java</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="UsingTheMPDotNetAPI.html">Using the AWS SDK for .NET</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="UsingTheMPphpAPI.html">Using the AWS SDK for PHP and Running PHP Examples</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="UsingTheMPRubyAPI.html">Using the AWS SDK for Ruby - Version 3</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="UsingTheBotoAPI.html">Using the AWS SDK for Python (Boto)</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="using-mobile-sdks.html">Using the AWS Mobile SDKs for iOS and Android</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="using-aws-amplify.html">Using the AWS Amplify JavaScript Library</a></li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="Appendices.html">Appendices</a><ul class="awstoc">
                        <li class="awstoc closed"><a class="awstoc" href="SOAPAPI3.html">Appendix A: Using the SOAP API</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="UsingSOAPOperations.html">Common SOAP API Elements</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="SOAPAuthentication.html">Authenticating SOAP Requests</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="SOAPAccessPolicy.html">Setting Access Policy with SOAP</a></li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="auth-request-sig-v2.html">Appendix B: Authenticating Requests (AWS Signature Version 2)</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="S3_Authentication2.html">Authenticating Requests Using the REST API</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="RESTAuthentication.html">Signing and Authenticating REST Requests</a></li>
                              <li class="awstoc closed"><a class="awstoc" href="UsingHTTPPOST.html">Browser-Based Uploads Using POST</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="HTTPPOSTForms.html">HTML Forms</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="HTTPPOSTExamples.html">Upload Examples</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="HTTPPOSTFlash.html">POST with Adobe Flash</a></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                     </ul>
                  </li>
                  <li class="awstoc leaf"><a class="awstoc" href="RelatedResources012.html">Resources</a></li>
                  <li class="awstoc closed"><a class="awstoc" href="s3-glacier-select-sql-reference.html">SQL Reference</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="s3-glacier-select-sql-reference-select.html">SELECT Command</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="s3-glacier-select-sql-reference-data-types.html">Data Types</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="s3-glacier-select-sql-reference-operators.html">Operators</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="s3-glacier-select-sql-reference-keyword-list.html">Reserved Keywords</a></li>
                        <li class="awstoc closed"><a class="awstoc" href="s3-glacier-select-sql-reference-sql-functions.html">SQL Functions</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="s3-glacier-select-sql-reference-aggregate.html">Aggregate Functions (Amazon S3 Select only)</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="s3-glacier-select-sql-reference-conditional.html">Conditional Functions</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="s3-glacier-select-sql-reference-conversion.html">Conversion Functions</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="s3-glacier-select-sql-reference-date.html">Date Functions</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="s3-glacier-select-sql-reference-string.html">String Functions</a></li>
                           </ul>
                        </li>
                     </ul>
                  </li>
                  <li class="awstoc leaf"><a class="awstoc" href="WhatsNew.html">Document History</a></li>
                  <li class="awstoc leaf"><a class="awstoc" href="glossary.html">AWS Glossary</a></li>
                  <li id="toc-additional-links"><a class="btn btn-pdf-link" id="pdf-link-alt" href="s3-dg.pdf#top" target="_blank" title="Open PDF"></a><a class="btn btn-kindle-link" id="kindle-link-alt" target="_blank" href="http://www.amazon.com/dp/B0763Z4YVV" title="Open Kindle"></a><a class="btn btn-rss-link" id="rss-link-alt" target="_blank" href="s3-dev-guide-rss-updates.rss" title="View RSS Feed"></a></li>
               </ul>
            </div>
         </div>
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tr>
                           <td>
                              <div class="breadcrumb"><a href="/index.html">AWS Documentation</a> » <a href="/s3/index.html">Amazon Simple Storage Service (S3)</a> » <a href="index.html">Developer Guide</a> » <a href="s3-access-control.html">Managing Access Permissions to Your Amazon S3 Resources</a> » <a href="using-iam-policies.html">Using Bucket Policies and User Policies</a> » <a href="access-policy-language-overview.html">Access Policy Language
                                    				Overview</a> » <span class="breadcrumb">Specifying Conditions in a Policy</span></div>
                           </td>
                        </tr>
                     </table>
                     <div></div>
                     <h1 class="topictitle" id="amazon-s3-policy-keys">Specifying Conditions in a Policy</h1>
                     <p>The access policy language allows you to specify conditions when granting permissions.
                        					The <code class="code">Condition</code>  element (or <code class="code">Condition</code> block) lets you
                        				specify conditions for when a policy is in effect. In the <code class="code">Condition</code>
                        				element, which is optional, you build expressions in which you use Boolean operators
                        				(equal, less than, etc.) to match your condition against values in the request.
                        For
                        				example, when granting a user permission to upload an object, the bucket owner
                        can
                        				require the object be publicly readable by adding the <code class="code">StringEquals</code>
                        				condition as shown here:
                     </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{ 
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "statement1",
      "Effect": "Allow",
      "Action": [
        "s3:PutObject"
      ],
      "Resource": [
        "arn:aws:s3:::<em class="replaceable"><code>examplebucket</code></em>/*"
      ],
      "Condition": {
        "StringEquals": {
          "s3:x-amz-acl": [
            "public-read"
          ]
        }
      }
    }
  ]
}</code></pre><p>The <code class="code">Condition</code> block specifies the <code class="code">StringEquals</code> condition
                        				that is applied to the specified key-value pair,
                        					<code class="code">"s3:x-amz-acl":["public-read"]</code>. There is a set of predefined keys
                        				you can use in expressing a condition. The example uses the
                        					<code class="code">s3:x-amz-acl</code> condition key. This condition requires user to include
                        				the <code class="code">x-amz-acl</code> header with value <code class="code">public-read</code> in every PUT
                        				object request. 
                     </p>
                     <p>For more information about specifying conditions in an access policy language, see
                        					<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements.html#Condition" target="_blank">Condition</a> in the <em>IAM User Guide</em>. 
                     </p>
                     <p>The following topics describe AWS-wide and Amazon S3–specific condition keys and
                        				provide example policies. 
                     </p>
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#AvailableKeys-iamV2">Available Condition Keys</a></li>
                           <li><a href="#object-keys-in-amazon-s3-policies">Amazon S3 Condition Keys for
                                 						Object Operations</a></li>
                           <li><a href="#bucket-keys-in-amazon-s3-policies">Amazon S3 Condition Keys for
                                 						Bucket Operations</a></li>
                        </ul>
                     </div>
                     				
                     <h2 id="AvailableKeys-iamV2">Available Condition Keys</h2>
                     
                     
                     				
                     <p>The predefined keys available for specifying conditions in an Amazon S3 access
                        					policy can be classified as follows:
                     </p>
                     				
                     <div class="itemizedlist">
                        					
                        					
                        				
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              						
                              <p><span class="topcom">AWS-wide keys</span> – AWS provides a
                                 							set of common keys that are supported by all AWS services that support
                                 							policies. These keys that are common to all services are called AWS-wide
                                 							keys and use the prefix <code class="code">aws:</code>. For a list of AWS-wide keys,
                                 							see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements.html#AvailableKeys" target="_blank">Available Keys for Conditions</a> in the
                                 								<em>IAM User Guide</em>. There are also keys that are
                                 							specific to Amazon S3, which use the prefix <code class="code">s3:</code>.
                                 							Amazon S3–specific keys are discussed in the next bulleted item.
                              </p>
                              						
                              <p> </p>
                              						
                              <p>The new condition keys <code class="code">aws:sourceVpce</code> and
                                 								<code class="code">aws:sourceVpc</code> are used in bucket policies for VPC
                                 							endpoints. For examples of using these condition keys, see <a href="example-bucket-policies-vpc-endpoint.html">Example Bucket Policies for VPC Endpoints for Amazon S3</a>.
                              </p>
                              						
                              <p>The following example bucket policy allows authenticated users
                                 							permission to use the <code class="code">s3:GetObject</code> action if the request
                                 							originates from a specific range of IP addresses (192.168.143.*), unless
                                 							the IP address is 192.168.143.188. In the condition block, the
                                 								<code class="code">IpAddress</code> and the <code class="code">NotIpAddress</code> are
                                 							conditions, and each condition is provided a key-value pair for
                                 							evaluation. Both the key-value pairs in this example use the
                                 								<code class="code">aws:SourceIp</code> AWS-wide key.
                              </p>
                              						
                              <div class="aws-note">
                                 <p class="aws-note">Note</p>
                                 <p>The <code class="code">IPAddress</code> and <code class="code">NotIpAddress</code> key
                                    								values specified in the condition uses CIDR notation as described in
                                    								RFC 4632. For more information, go to <a href="http://www.rfc-editor.org/rfc/rfc4632.txt" target="_blank">http://www.rfc-editor.org/rfc/rfc4632.txt</a>.
                                 </p>
                              </div>
                              						<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
    "Version": "2012-10-17",
    "Id": "S3PolicyId1",
    "Statement": [
        {
            "Sid": "statement1",
            "Effect": "Allow",
            "Principal": "*",
            "Action":["s3:GetObject"]  ,
            "Resource": "arn:aws:s3:::<em class="replaceable"><code>examplebucket</code></em>/*",
            "Condition" : {
                "IpAddress" : {
                    "aws:SourceIp": "192.168.143.0/24" 
                },
                "NotIpAddress" : {
                    "aws:SourceIp": "192.168.143.188/32" 
                } 
            } 
        } 
    ]
} </code></pre>
                              					</li>
                           <li class="listitem">
                              						
                              <p><span class="topcom">Amazon S3–specific keys</span> – In
                                 							addition to the AWS-wide keys, the following are the condition keys that
                                 							are applicable only in the context of granting Amazon S3 specific
                                 							permissions. These Amazon S3–specific keys use the prefix
                                 								<code class="code">s3:</code>. 
                              </p>
                              
                              
                              						
                              <div class="itemizedlist">
                                 							
                                 							
                                 							
                                 							
                                 							
                                 							
                                 							
                                 							
                                 							
                                 							
                                 							
                                 							
                                 							
                                 						
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       								
                                       <p><code class="code">s3:x-amz-acl</code></p>
                                       							
                                    </li>
                                    <li class="listitem">
                                       								
                                       <p><code class="code">s3:x-amz-copy-source</code></p>
                                       							
                                    </li>
                                    <li class="listitem">
                                       								
                                       <p><code class="code">s3:x-amz-metadata-directive</code></p>
                                       							
                                    </li>
                                    <li class="listitem">
                                       								
                                       <p><code class="code">s3:x-amz-server-side-encryption</code></p>
                                       							
                                    </li>
                                    <li class="listitem">
                                       								
                                       <p><code class="code">s3:VersionId</code></p>
                                       							
                                    </li>
                                    <li class="listitem">
                                       								
                                       <p><code class="code">s3:LocationConstraint</code></p>
                                       							
                                    </li>
                                    <li class="listitem">
                                       								
                                       <p><code class="code">s3:delimiter</code></p>
                                       							
                                    </li>
                                    <li class="listitem">
                                       								
                                       <p><code class="code">s3:max-keys</code></p>
                                       							
                                    </li>
                                    <li class="listitem">
                                       								
                                       <p><code class="code">s3:prefix</code></p>
                                       							
                                    </li>
                                    <li class="listitem">
                                       								
                                       <p><code class="code">s3:x-amz-server-side-encryption-aws-kms-key-id</code></p>
                                       							
                                    </li>
                                    <li class="listitem">
                                       								
                                       <p><code class="code">s3:ExistingObjectTag/<em class="replaceable"><code>&lt;tag-key&gt;</code></em></code>
                                          								
                                       </p>
                                       								
                                       <p>For example policies using object tags related condition keys,
                                          									see <a href="object-tagging.html#tagging-and-policies">Object Tagging and Access Control
                                             Policies</a>.
                                       </p>
                                       							
                                    </li>
                                    <li class="listitem">
                                       								
                                       <p><code class="code">s3:RequestObjectTagKeys</code></p>
                                       							
                                    </li>
                                    <li class="listitem">
                                       								
                                       <p><code class="code"><code class="code">s3:RequestObjectTag/<em class="replaceable"><code>&lt;tag-key&gt;</code></em></code></code></p>
                                       							
                                    </li>
                                 </ul>
                              </div>
                              
                              						
                              <p> </p>
                              						
                              <p>For example, the following bucket policy allows the
                                 								<code class="code">s3:PutObject</code> permission for two AWS accounts if the
                                 							request includes the <code class="code">x-amz-acl</code> header making the object
                                 							publicly readable. 
                              </p>
                              						<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
    "Version":"2012-10-17",
    "Statement": [ 
        {
	        "Sid":"AddCannedAcl",
            "Effect":"Allow",
	        "Principal": {
                "AWS": ["arn:aws:iam::<em class="replaceable"><code>account1-ID</code></em>:root","arn:aws:iam::<em class="replaceable"><code>account2-ID</code></em>:root"]
            },
	        "Action":["s3:PutObject"],
            "Resource": ["arn:aws:s3:::<em class="replaceable"><code>examplebucket</code></em>/*"],
            "Condition": {
                "StringEquals": {
                    "s3:x-amz-acl":["public-read"]
                }
            }
        }
    ]
}</code></pre>
                              						<p>The <code class="code">Condition</code> block uses the <code class="code">StringEquals</code>
                                 							condition, and it is provided a key-value pair,
                                 								<code class="code">"s3:x-amz-acl":["public-read"</code>, for evaluation. In the
                                 							key-value pair, the <code class="code">s3:x-amz-acl</code> is an Amazon
                                 							S3–specific key, as indicated by the prefix <code class="code">s3:</code>.
                                 						
                              </p>
                              					
                           </li>
                        </ul>
                     </div>
                     				
                     <div class="aws-note">
                        <p class="aws-note">Important</p>
                        <p> Not all conditions make sense for all actions. For example, it makes
                           						sense to include an <code class="code">s3:LocationConstraint</code> condition on a policy
                           						that grants the <code class="code">s3:CreateBucket</code> Amazon S3 permission, but not for
                           						the <code class="code">s3:GetObject</code> permission. Amazon S3 can test for semantic errors
                           						of this type that involve Amazon S3–specific conditions. However, if you
                           						are creating a policy for an IAM user and you include a semantically invalid
                           						Amazon S3 condition, no error is reported, because IAM cannot validate Amazon
                           S3
                           						conditions. 
                        </p>
                     </div>
                     				
                     <p>The following section describes the condition keys that can be used to grant
                        					conditional permission for bucket and object operations. In addition, there are
                        					condition keys related to Amazon S3 Signature Version 4 authentication. For more
                        					information, go to <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/bucket-policy-s3-sigv4-conditions.html" target="_blank">Amazon S3 Signature
                           						Version 4 Authentication Specific Policy Keys</a> in the
                        						<em>Amazon Simple Storage Service API Reference</em>.
                     </p>
                     				
                     			
                     				
                     <h2 id="object-keys-in-amazon-s3-policies">Amazon S3 Condition Keys for
                        						Object Operations
                     </h2>
                     
                     				
                     <p> The following table shows which Amazon S3 conditions you can use with which Amazon
                        S3
                        					actions. Example policies are provided following the table. Note the following
                        					about the Amazon S3–specific condition keys described in the following
                        					table:
                     </p>
                     				
                     <div class="itemizedlist">
                        					
                        					
                        				
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              						
                              <p>The condition key names are preceded by the prefix <code class="code">s3:</code>.
                                 							For example, <code class="code">s3:x-amz-acl</code>.
                              </p>
                              					
                           </li>
                           <li class="listitem">
                              						
                              <p>Each condition key maps to the same name request header allowed by the
                                 							API on which the condition can be set. That is, these condition keys
                                 							dictate behavior of the same name request headers. For example:
                              </p>
                              						
                              <div class="itemizedlist">
                                 							
                                 							
                                 						
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       								
                                       <p>The condition key <code class="code">s3:x-amz-acl</code> that you can use
                                          									to grant condition permission for the <code class="code">s3:PutObject</code> permission defines
                                          									behavior of the <code class="code">x-amz-acl</code> request header that the
                                          									PUT Object API supports. 
                                       </p>
                                       							
                                    </li>
                                    <li class="listitem">
                                       								
                                       <p>The condition key <code class="code">s3:VersionId</code> that you can use
                                          									to grant conditional permission for the <code class="code">s3:GetObjectVersion</code> permission
                                          									defines behavior of the <code class="code">versionId</code> query parameter
                                          									that you set in a GET Object request.
                                       </p>
                                       							
                                    </li>
                                 </ul>
                              </div>
                              					
                           </li>
                        </ul>
                     </div>
                     				
                     				
                     <div class="table">
                        <div class="table-contents">
                           <table id="w77aac29c22b9c15c17b9">
                              							
                              <tr>
                                 								
                                 <th>Permission</th>
                                 								
                                 <th>Applicable Condition Keys (or keywords)</th>
                                 								
                                 <th>Description</th>
                                 							
                              </tr>
                              						
                              							
                              <tr>
                                 								
                                 <td rowspan="7">
                                    									
                                    <p><code class="code">s3:PutObject</code></p>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <div class="itemizedlist">
                                       										
                                       										
                                       									
                                       <ul class="itemizedlist" type="disc">
                                          <li class="listitem">
                                             											
                                             <p><code class="code">s3:x-amz-acl</code>
                                                												(for canned ACL permissions)
                                             </p>
                                             										
                                          </li>
                                          <li class="listitem">
                                             											
                                             <p><code class="code">s3:x-amz-grant-<em class="replaceable"><code>permission</code></em></code>
                                                												(for explicit permissions), where
                                                												<em class="replaceable"><code>permission</code></em> can
                                                												be:
                                             </p>
                                             											
                                             <p><code class="code">read, write,​
                                                   												read-acp,​ write​-acp,​
                                                   												​full​-control</code></p>
                                             										
                                          </li>
                                       </ul>
                                    </div>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <p>The <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectPUT.html" target="_blank">PUT
                                          											Object</a> operation allows access control list
                                       										(ACL)–specific headers that you can use to grant
                                       										ACL-based permissions. Using these keys, the bucket owner
                                       										can set a condition to require specific access permissions
                                       										when the user uploads an object. 
                                    </p>
                                    									
                                    <p> For an example policy, see <a href="amazon-s3-policy-keys.html#grant-putobject-conditionally-1">Example 1: Granting
                                          							s3:PutObject permission with a condition requiring the bucket owner to
                                          							get full control</a>.
                                    </p>
                                    									
                                    <p>For more information about ACLs, see <a href="acl-overview.html">Access Control List (ACL) Overview</a>.
                                       									
                                    </p>
                                    								
                                 </td>
                                 							
                              </tr>
                              							
                              <tr>
                                 								
                                 <td>
                                    									
                                    <p><code class="code">s3:x-amz-copy-source</code></p>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <p>To copy an object, you use the PUT Object API (see <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectPUT.html" target="_blank">PUT Object</a>)
                                       										and specify the source using the
                                       											<code class="code">x-amz-copy-source</code> header. Using this key,
                                       										the bucket owner can restrict the copy source to a specific
                                       										bucket, a specific folder in the bucket, or a specific
                                       										object in a bucket.
                                    </p>
                                    									
                                    <p>For a policy example, see <a href="amazon-s3-policy-keys.html#putobject-limit-copy-source-2">Example 3: Granting
                                          							s3:PutObject permission to copy objects with a restriction on the copy
                                          							source</a>.
                                    </p>
                                    								
                                 </td>
                                 							
                              </tr>
                              							
                              							
                              <tr>
                                 								
                                 <td>
                                    									
                                    <p><code class="code">s3:x-amz-server-side-encryption</code></p>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <p>When you upload an object, you can use the
                                       											<code class="code">x-amz-server-side-encryption</code> header to
                                       										request Amazon S3 to encrypt the object when it is saved, using
                                       										an envelope encryption key managed either by AWS Key Management Service
                                       										(AWS KMS) or by Amazon S3 (see <a href="serv-side-encryption.html">Protecting Data Using Server-Side Encryption</a>). 
                                    </p>
                                    									
                                    <p>When granting the <code class="code">s3:PutObject</code> permission,
                                       										the bucket owner can add a condition using this key to
                                       										require the user to specify this header in the request. A
                                       										bucket owner can grant such conditional permission to ensure
                                       										that objects the user uploads are encrypted when they are
                                       										saved.
                                    </p>
                                    									
                                    <p>For a policy example, see <a href="amazon-s3-policy-keys.html#grant-putobject-conditionally-1">Example 1: Granting
                                          							s3:PutObject permission with a condition requiring the bucket owner to
                                          							get full control</a>.
                                    </p>
                                    								
                                 </td>
                                 							
                              </tr>
                              							
                              <tr>
                                 								
                                 <td>
                                    									
                                    <p><code class="code">s3:x-amz-server-side-encryption-aws-kms-key-id</code></p>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <p>When you upload an object, you can use the
                                       											<code class="code">x-amz-server-side-encryption-aws-kms-key-id</code>
                                       										header to request Amazon S3 to encrypt the object using the
                                       										specified AWS KMS key when it is saved (see <a href="UsingKMSEncryption.html">Protecting Data Using Server-Side Encryption with 
                                          AWS KMS–Managed Keys (SSE-KMS)</a>). 
                                    </p>
                                    									
                                    <p>When granting the <code class="code">s3:PutObject</code> permission,
                                       										the bucket owner can add a condition using this key to
                                       										restrict the AWS KMS key ID used for object encryption to a
                                       										specific value. 
                                    </p>
                                    									
                                    <p>A bucket owner can grant such conditional permission to
                                       										ensure that objects the user uploads are encrypted with a
                                       										specific key when they are saved.
                                    </p>
                                    									
                                    <p>The AWS KMS key you specify in the policy must use the
                                       										following format: 
                                    </p>
                                    									
                                    									
                                    <p>
                                       										<code class="code">arn:aws:kms:<em class="replaceable"><code>region</code></em>:<em class="replaceable"><code>acct-id</code></em>:key/<em class="replaceable"><code>key-id</code></em></code>
                                       									
                                    </p>
                                    								
                                 </td>
                                 							
                              </tr>
                              							
                              <tr>
                                 								
                                 <td>
                                    									
                                    <p><code class="code">s3:x-amz-metadata-directive</code></p>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <p>When you copy an object using the PUT Object API (see
                                       											<a href="https://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectPUT.html" target="_blank">PUT
                                          											Object</a>), you can optionally add the
                                       											<code class="code">x-amz-metadata-directive</code> header to specify
                                       										whether you want the object metadata copied from the source
                                       										object or replaced with metadata provided in the request. 
                                    </p>
                                    									
                                    <p>Using this key bucket, an owner can add a condition to
                                       										enforce certain behavior when objects are uploaded.
                                    </p>
                                    									
                                    <p>Valid values: <code class="code">COPY</code> | <code class="code">REPLACE</code>.
                                       										The default is <code class="code">COPY</code>.
                                    </p>
                                    								
                                 </td>
                                 							
                              </tr>
                              							
                              <tr>
                                 								
                                 <td>
                                    									
                                    <p><code class="code">s3:x-amz-storage-class</code></p>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <p>By default <code class="code">s3:PutObject</code> stores objects using
                                       										the <code class="code">STANDARD</code> storage class, but you can use the
                                       											<code class="code">x-amz-storage-class</code> request header to
                                       										specify a different storage class.
                                    </p>
                                    									
                                    <p>When granting the <code class="code">s3:PutObject</code> permission,
                                       										you can use the <code class="code">s3:x-amz-storage-class</code>
                                       										condition key to restrict which storage class to use when
                                       										storing uploaded objects. For more information about storage
                                       										classes, see <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/UsingMetadata.html#storage-class-intro" target="_blank">Storage Classes</a>. 
                                    </p>
                                    									
                                    <p>For an example policy, see <a href="amazon-s3-policy-keys.html#example-storage-class-condition-key">Example 5: Restrict
                                          							object uploads to objects with a specific storage class</a>.
                                    </p>
                                    									
                                    <p>Valid Values: <code class="code">STANDARD</code> |
                                       											<code class="code">STANDARD_IA</code> |
                                       											<code class="code">REDUCED_REDUNDANCY</code>. The default is
                                       											<code class="code">STANDARD</code>.
                                    </p>
                                    								
                                 </td>
                                 							
                              </tr>
                              							
                              <tr>
                                 								
                                 <td>
                                    									
                                    <div class="itemizedlist">
                                       										
                                       										
                                       									
                                       <ul class="itemizedlist" type="disc">
                                          <li class="listitem">
                                             											
                                             <p><code class="code">s3:RequestObjectTagKeys</code></p>
                                             										
                                          </li>
                                          <li class="listitem">
                                             											
                                             <p><code class="code">s3:RequestObjectTag/<em class="replaceable"><code>&lt;tag-key&gt;</code></em></code></p>
                                             										
                                          </li>
                                       </ul>
                                    </div>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <p>Using this condition key, you can limit permission for the
                                       											<code class="code">s3:PutObject</code> action
                                       										by restricting the object tags allowed in the request. For
                                       										examples of using these condition keys, see <a href="object-tagging.html#tagging-and-policies">Object Tagging and Access Control
                                          Policies</a>.
                                    </p>
                                    								
                                 </td>
                                 							
                              </tr>
                              							
                              <tr>
                                 								
                                 <td rowspan="2">
                                    									
                                    <p><code class="code">s3:PutObjectAcl</code></p>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <div class="itemizedlist">
                                       										
                                       										
                                       									
                                       <ul class="itemizedlist" type="disc">
                                          <li class="listitem">
                                             											
                                             <p><code class="code">s3:x-amz-acl</code>
                                                												(for canned ACL permissions)
                                             </p>
                                             										
                                          </li>
                                          <li class="listitem">
                                             											
                                             <p><code class="code">s3:x-amz-grant-<em class="replaceable"><code>permission</code></em></code>
                                                												(for explicit permissions), where
                                                												<em class="replaceable"><code>permission</code></em> can
                                                												be:
                                             </p>
                                             											
                                             <p><code class="code">read, write,​
                                                   												read-acp,​ write​-acp,​
                                                   												​grant-full​-control</code></p>
                                             										
                                          </li>
                                       </ul>
                                    </div>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <p>The <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectPUT.html" target="_blank">PUT Object
                                          											ACL</a> API sets the access control list (ACL) on
                                       										the specified object. The operation supports ACL-related
                                       										headers. When granting this permission, the bucket owner can
                                       										add conditions using these keys to require certain
                                       										permissions. For more information about ACLs, see <a href="acl-overview.html">Access Control List (ACL) Overview</a>. 
                                    </p>
                                    									
                                    <p>For example, the bucket owner may want to retain control
                                       										of the object regardless of who owns the object. To
                                       										accomplish this, the bucket owner can add a condition using
                                       										one of these keys to require the user to include specific
                                       										permissions to the bucket owner. 
                                    </p>
                                    								
                                 </td>
                                 							
                              </tr>
                              							
                              <tr>
                                 								
                                 <td>
                                    <p><code class="code">s3:ExistingObjectTag/<em class="replaceable"><code>&lt;tag-key&gt;</code></em></code></p>
                                 </td>
                                 								
                                 <td>
                                    <p>Using this condition key, you can limit the permission
                                       										for the <code class="code">s3:PutObjectAcl</code>
                                       										action to only on objects that have a specific tag key and
                                       										value. For examples, see <a href="object-tagging.html#tagging-and-policies">Object Tagging and Access Control
                                          Policies</a>.
                                    </p>
                                 </td>
                                 							
                              </tr>
                              							
                              							
                              							
                              <tr>
                                 								
                                 <td rowspan="2">
                                    									
                                    <p><code class="code">s3:PutObjectTagging</code></p>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <div class="itemizedlist">
                                       										
                                       										
                                       									
                                       <ul class="itemizedlist" type="disc">
                                          <li class="listitem">
                                             											
                                             <p><code class="code">s3:RequestObjectTagKeys</code></p>
                                             										
                                          </li>
                                          <li class="listitem">
                                             											
                                             <p><code class="code">s3:RequestObjectTag/<em class="replaceable"><code>&lt;tag-key&gt;</code></em></code></p>
                                             										
                                          </li>
                                       </ul>
                                    </div>
                                    								
                                 </td>
                                 								
                                 <td>Using this condition key, you can limit permission for the
                                    										<code class="code">s3:PutObjectTagging</code>
                                    									action by restricting the object tags allowed in the request.
                                    									For examples of using these condition keys, see <a href="object-tagging.html#tagging-and-policies">Object Tagging and Access Control
                                       Policies</a>.
                                 </td>
                                 							
                              </tr>
                              							
                              <tr>
                                 								
                                 <td>
                                    <p><code class="code">s3:ExistingObjectTag/<em class="replaceable"><code>&lt;tag-key&gt;</code></em></code></p>
                                 </td>
                                 								
                                 <td>
                                    <p>Using this condition key, you can limit the permission
                                       										to only on objects that have a specific tag key and value.
                                       										For examples, see <a href="object-tagging.html#tagging-and-policies">Object Tagging and Access Control
                                          Policies</a>.
                                    </p>
                                 </td>
                                 							
                              </tr>
                              							
                              <tr>
                                 								
                                 <td rowspan="3">
                                    <p><code class="code">s3:PutObjectVersionTagging</code></p>
                                 </td>
                                 								
                                 <td>
                                    									
                                    <div class="itemizedlist">
                                       										
                                       										
                                       									
                                       <ul class="itemizedlist" type="disc">
                                          <li class="listitem">
                                             											
                                             <p><code class="code">s3:RequestObjectTagKeys</code></p>
                                             										
                                          </li>
                                          <li class="listitem">
                                             											
                                             <p><code class="code">s3:RequestObjectTag/<em class="replaceable"><code>&lt;tag-key&gt;</code></em></code></p>
                                             										
                                          </li>
                                       </ul>
                                    </div>
                                    								
                                 </td>
                                 								
                                 <td>
                                    <p>Using this condition key, you can limit permission for
                                       										the <code class="code">s3:PutObjectVersionTagging</code> action by restricting
                                       										the object tags allowed in the request. For examples of
                                       										using these condition keys, see <a href="object-tagging.html#tagging-and-policies">Object Tagging and Access Control
                                          Policies</a>.
                                    </p>
                                 </td>
                                 							
                              </tr>
                              							
                              <tr>
                                 								
                                 <td>
                                    									
                                    <p><code class="code">s3:VersionId</code></p>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <p>Using this condition key, you can limit the permission for
                                       										the <code class="code">s3:PutObjectVersionTagging</code> action to a specific
                                       										object version. For an example policy, see <a href="amazon-s3-policy-keys.html#getobjectversion-limit-access-to-specific-version-3">Example 4: Granting access to a specific version of an object</a>.
                                    </p>
                                    								
                                 </td>
                                 							
                              </tr>
                              							
                              <tr>
                                 								
                                 <td>
                                    <p><code class="code">s3:ExistingObjectTag/<em class="replaceable"><code>&lt;tag-key&gt;</code></em></code></p>
                                 </td>
                                 								
                                 <td>
                                    <p>Using this condition key, you can limit the permission
                                       										to only on objects that have a specific tag key and value.
                                       										For examples, see <a href="object-tagging.html#tagging-and-policies">Object Tagging and Access Control
                                          Policies</a>.
                                    </p>
                                 </td>
                                 							
                              </tr>
                              							
                              <tr>
                                 								
                                 <td rowspan="2">
                                    									
                                    <p><code class="code">s3:GetObjectVersion</code></p>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <p><code class="code">s3:VersionId</code></p>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <p>This Amazon S3 permission enables the user to perform a set of
                                       										Amazon S3 API operations (see <a href="using-with-s3-actions.html#actions-related-to-objects-table">Amazon S3 Permissions for Object
                                          						Operations</a>). For
                                       										a version-enabled bucket, you can specify the object version
                                       										to retrieve data for. 
                                    </p>
                                    									
                                    <p>By adding a condition using this key, the bucket owner can
                                       										restrict the user to accessing data only for a specific
                                       										version of the object. For an example policy, see <a href="amazon-s3-policy-keys.html#getobjectversion-limit-access-to-specific-version-3">Example 4: Granting access to a specific version of an object</a>.
                                    </p>
                                    								
                                 </td>
                                 							
                              </tr>
                              							
                              <tr>
                                 								
                                 <td>
                                    <p><code class="code">s3:ExistingObjectTag/<em class="replaceable"><code>&lt;tag-key&gt;</code></em></code></p>
                                 </td>
                                 								
                                 <td>
                                    <p>Using this condition key, you can limit the permission
                                       										to only on objects that have a specific tag key and value.
                                       										For examples, see <a href="object-tagging.html#tagging-and-policies">Object Tagging and Access Control
                                          Policies</a>.
                                    </p>
                                 </td>
                                 
                                 							
                              </tr>
                              							
                              <tr>
                                 								
                                 <td>
                                    <p><code class="code">s3:GetObject</code></p>
                                 </td>
                                 								
                                 <td>
                                    <p><code class="code">s3:ExistingObjectTag/<em class="replaceable"><code>&lt;tag-key&gt;</code></em></code></p>
                                 </td>
                                 								
                                 <td>
                                    <p>Using this condition key, you can limit the permission
                                       										to only on objects that have a specific tag key and value.
                                       										For examples, see <a href="object-tagging.html#tagging-and-policies">Object Tagging and Access Control
                                          Policies</a>.
                                    </p>
                                 </td>
                                 							
                              </tr>
                              							
                              <tr>
                                 								
                                 <td>
                                    									
                                    <p><code class="code">s3:GetObjectAcl</code></p>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <p><code class="code">s3:ExistingObjectTag/<em class="replaceable"><code>&lt;tag-key&gt;</code></em></code></p>
                                    								
                                 </td>
                                 								
                                 <td>Using this condition key, you can limit the permission to
                                    									only on objects that have a specific tag key and value. For
                                    									examples, see <a href="object-tagging.html#tagging-and-policies">Object Tagging and Access Control
                                       Policies</a>.
                                 </td>
                                 							
                              </tr>
                              							
                              <tr>
                                 								
                                 <td rowspan="2">
                                    									
                                    <p><code class="code">s3:GetObjectVersionAcl</code></p>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <p><code class="code">s3:VersionId</code></p>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <p>You can retrieve the access control list (ACL) of a
                                       										specific object version using the <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectGETacl.html" target="_blank">GET Object
                                          											acl</a> API. The user must have permission for the
                                       											<code class="code">s3:GetObjectVersionAcl</code> action. For a
                                       										version-enabled bucket, this Amazon S3 permission allows a user
                                       										to get the ACL for a specific version of the object. 
                                    </p>
                                    									
                                    <p>The bucket owner can add a condition using the key to
                                       										restrict the user to a specific version of the object.
                                       									
                                    </p>
                                    								
                                 </td>
                                 							
                              </tr>
                              							
                              <tr>
                                 								
                                 <td>
                                    <p><code class="code">s3:ExistingObjectTag/<em class="replaceable"><code>&lt;tag-key&gt;</code></em></code></p>
                                 </td>
                                 								
                                 <td>
                                    <p>Using this condition key, you can limit the permission
                                       										to only on objects that have a specific tag key and value.
                                       										For examples, see <a href="object-tagging.html#tagging-and-policies">Object Tagging and Access Control
                                          Policies</a>.
                                    </p>
                                 </td>
                                 							
                              </tr>
                              							
                              <tr>
                                 								
                                 <td rowspan="3">
                                    									
                                    <p><code class="code">s3:PutObjectVersionAcl</code></p>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <p><code class="code">s3:VersionId</code></p>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <p>For a version-enabled bucket, you can specify the object
                                       										version in the <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectPUTacl.html" target="_blank">PUT Object
                                          											acl</a> request to set ACL on a specific object
                                       										version. Using this condition, the bucket owner can restrict
                                       										the user to setting an ACL only on a specific version of an
                                       										object.
                                    </p>
                                    								
                                 </td>
                                 							
                              </tr>
                              							
                              <tr>
                                 								
                                 <td>
                                    									
                                    <div class="itemizedlist">
                                       										
                                       										
                                       									
                                       <ul class="itemizedlist" type="disc">
                                          <li class="listitem">
                                             											
                                             <p><code class="code">s3:x-amz-acl</code>
                                                												(for canned ACL permissions)
                                             </p>
                                             										
                                          </li>
                                          <li class="listitem">
                                             											
                                             <p><code class="code">s3:x-amz-grant-<em class="replaceable"><code>permission</code></em></code>
                                                												(for explicit permissions), where
                                                												<em class="replaceable"><code>permission</code></em> can
                                                												be:
                                             </p>
                                             											
                                             <p><code class="code">read, write,​
                                                   												read-acp,​ write​-acp,​
                                                   												​grant-full​-control</code></p>
                                             										
                                          </li>
                                       </ul>
                                    </div>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <p>For a version-enabled bucket, this Amazon S3 permission allows
                                       										you to set an ACL on a specific version of the object. 
                                    </p>
                                    									
                                    <p>For a description of these condition keys, see the
                                       											<code class="code">s3:PutObjectACL</code> permission in this
                                       										table.
                                    </p>
                                    								
                                 </td>
                                 							
                              </tr>
                              							
                              <tr>
                                 								
                                 <td>
                                    <p><code class="code">s3:ExistingObjectTag/<em class="replaceable"><code>&lt;tag-key&gt;</code></em></code></p>
                                 </td>
                                 								
                                 <td>
                                    <p>Using this condition key, you can limit the permission
                                       										to only on objects that have a specific tag key and value.
                                       										For examples, see <a href="object-tagging.html#tagging-and-policies">Object Tagging and Access Control
                                          Policies</a>.
                                    </p>
                                 </td>
                                 							
                              </tr>
                              
                              							
                              							
                              <tr>
                                 								
                                 <td>
                                    									
                                    <p><code class="code">s3:DeleteObjectVersion</code></p>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <p><code class="code">s3:VersionId</code></p>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <p>For a version-enabled bucket, this Amazon S3 permission allows
                                       										the user to delete a specific version of the object.
                                    </p>
                                    									
                                    <p>The bucket owner can add a condition using this key to
                                       										limit the user's ability to delete only a specific version
                                       										of the object. 
                                    </p>
                                    									
                                    <p>For an example of using this condition key, see <a href="amazon-s3-policy-keys.html#getobjectversion-limit-access-to-specific-version-3">Example 4: Granting access to a specific version of an object</a>. The example is about granting the <code class="code">s3:GetObjectVersion</code> action,
                                       										but the policy shows the use of this condition key.
                                    </p>
                                    								
                                 </td>
                                 							
                              </tr>
                              							
                              <tr>
                                 								
                                 <td>
                                    <p><code class="code">s3:DeleteObjectTagging</code></p>
                                 </td>
                                 								
                                 <td>
                                    <p><code class="code">s3:ExistingObjectTag/<em class="replaceable"><code>&lt;tag-key&gt;</code></em></code></p>
                                 </td>
                                 								
                                 <td>Using this condition key, you can limit the permission to
                                    									only on objects that have a specific tag key and value. For
                                    									examples, see <a href="object-tagging.html#tagging-and-policies">Object Tagging and Access Control
                                       Policies</a>.
                                 </td>
                                 							
                              </tr>
                              							
                              <tr>
                                 								
                                 <td rowspan="2">
                                    <p><code class="code">s3:DeleteObjectVersionTagging</code></p>
                                 </td>
                                 								
                                 <td>
                                    <p><code class="code">s3:ExistingObjectTag/<em class="replaceable"><code>&lt;tag-key&gt;</code></em></code></p>
                                 </td>
                                 								
                                 <td>
                                    <p>Using this condition key, you can limit the permission
                                       										to only on objects that have a specific tag key and value.
                                       										For examples, see <a href="object-tagging.html#tagging-and-policies">Object Tagging and Access Control
                                          Policies</a>.
                                    </p>
                                 </td>
                                 							
                              </tr>
                              							
                              <tr>
                                 								
                                 <td>
                                    									
                                    <p><code class="code">s3:VersionId</code></p>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <p>Using this condition key, you can limit the permission for
                                       										the <code class="code">s3:DeleteObjectVersionTagging</code> action to a
                                       										specific object version. For an example policy, see <a href="amazon-s3-policy-keys.html#getobjectversion-limit-access-to-specific-version-3">Example 4: Granting access to a specific version of an object</a>.
                                    </p>
                                    								
                                 </td>
                                 							
                              </tr>
                              							
                              <tr>
                                 								
                                 <td>
                                    <p><code class="code">s3:GetObjectTagging</code></p>
                                 </td>
                                 								
                                 <td>
                                    <p><code class="code">s3:ExistingObjectTag/<em class="replaceable"><code>&lt;tag-key&gt;</code></em></code></p>
                                 </td>
                                 								
                                 <td>
                                    <p>Using this condition key, you can limit the permission
                                       										to only on objects that have a specific tag key and value.
                                       										For examples, see <a href="object-tagging.html#tagging-and-policies">Object Tagging and Access Control
                                          Policies</a>.
                                    </p>
                                 </td>
                                 							
                              </tr>
                              							
                              <tr>
                                 								
                                 <td rowspan="2">
                                    <p><code class="code">s3:GetObjectVersionTagging</code></p>
                                 </td>
                                 								
                                 <td>
                                    <p><code class="code">s3:ExistingObjectTag/<em class="replaceable"><code>&lt;tag-key&gt;</code></em></code></p>
                                 </td>
                                 								
                                 <td>Using this condition key, you can limit the permission to
                                    									only on objects that have a specific tag key and value. For
                                    									examples, see <a href="object-tagging.html#tagging-and-policies">Object Tagging and Access Control
                                       Policies</a>.
                                 </td>
                                 							
                              </tr>
                              							
                              <tr>
                                 								
                                 <td>
                                    									
                                    <p><code class="code">s3:VersionId</code></p>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <p>Using this condition key, you can limit the permission for
                                       										the <code class="code">s3:GetObjectVersionTagging</code> action to a
                                       										specific object version. For an example policy, see <a href="amazon-s3-policy-keys.html#getobjectversion-limit-access-to-specific-version-3">Example 4: Granting access to a specific version of an object</a>.
                                    </p>
                                    								
                                 </td>
                                 							
                              </tr>
                              						
                           </table>
                        </div>
                     </div>
                     				
                     					
                     <h3 id="grant-putobject-conditionally-1">Example 1: Granting
                        							s3:PutObject permission with a condition requiring the bucket owner to
                        							get full control
                     </h3>
                     
                     					
                     <p>Suppose that Account A owns a bucket and the account administrator wants
                        						to grant Dave, a user in Account B, permissions to upload objects. By
                        						default, objects that Dave uploads are owned by Account B, and Account A has
                        						no permissions on these objects. Because the bucket owner is paying the
                        						bills, it wants full permissions on the objects that Dave uploads. The
                        						Account A administrator can do this by granting the
                        							<code class="code">s3:PutObject</code> permission to Dave, with a condition that the
                        						request include ACL-specific headers, that either grants full permission
                        						explicitly or uses a canned ACL (see <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectPUT.html" target="_blank">PUT Object</a>).
                     </p>
                     					
                     <div class="itemizedlist">
                        						
                        						
                        					
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              							
                              <p>Require the <code class="code">x-amz-full-control</code> header in the request
                                 								with full control permission to the bucket owner.
                              </p>
                              							
                              <p>The following bucket policy grants the <code class="code">s3:PutObject</code>
                                 								permission to user Dave with a condition using the
                                 									<code class="code">s3:x-amz-grant-full-control</code> condition key, which
                                 								requires the request to include the <code class="code">x-amz-full-control</code>
                                 								header.
                              </p>
                              							<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "statement1",
      "Effect": "Allow",
      "Principal": {
        "AWS": "arn:aws:iam::<em class="replaceable"><code>AccountB-ID</code></em>:user/Dave"
      },
      "Action": "s3:PutObject",
      "Resource": "arn:aws:s3:::<em class="replaceable"><code>examplebucket</code></em>/*",
      "Condition": {
        "StringEquals": {
          "s3:x-amz-grant-full-control": "id=<em class="replaceable"><code>AccountA-CanonicalUserID</code></em>"
        }
      }
    }
  ]
}</code></pre>
                              							<div class="aws-note">
                                 <p class="aws-note">Note</p>
                                 <p>This example is about cross-account permission. However, if
                                    									Dave, who is getting the permission, belongs to the AWS account
                                    									that owns the bucket, then this conditional permission is not
                                    									necessary, because the parent account to which Dave belongs owns
                                    									objects that the user uploads.
                                 </p>
                              </div>
                              							
                              <p>The preceding bucket policy grants conditional permission to user
                                 								Dave in Account B. While this policy is in effect, it is possible
                                 								for Dave to get the same permission without any condition via some
                                 								other policy. For example, Dave can belong to a group and you grant
                                 								the group <code class="code">s3:PutObject</code> permission without any
                                 								condition. To avoid such permission loopholes, you can write a
                                 								stricter access policy by adding explicit deny. In this example, you
                                 								explicitly deny the user Dave upload permission if he does not
                                 								include the necessary headers in the request granting full
                                 								permissions to the bucket owner. Explicit deny always supersedes any
                                 								other permission granted. The following is the revised access policy
                                 								example.
                              </p>
                              							<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "statement1",
            "Effect": "Allow",
            "Principal": {
                "AWS": "arn:aws:iam::<em class="replaceable"><code>AccountB-ID</code></em>:user/AccountBadmin"
            },
            "Action": "s3:PutObject",
            "Resource": "arn:aws:s3:::<em class="replaceable"><code>examplebucket</code></em>/*",
            "Condition": {
                "StringEquals": {
                    "s3:x-amz-grant-full-control": "id=<em class="replaceable"><code>AccountA-CanonicalUserID</code></em>"
                }
            }
        },
        {
            "Sid": "statement2",
            "Effect": "Deny",
            "Principal": {
                "AWS": "arn:aws:iam::<em class="replaceable"><code>AccountB-ID</code></em>:user/AccountBadmin"
            },
            "Action": "s3:PutObject",
            "Resource": "arn:aws:s3:::<em class="replaceable"><code>examplebucket</code></em>/*",
            "Condition": {
                "StringNotEquals": {
                    "s3:x-amz-grant-full-control": "id=<em class="replaceable"><code>AccountA-CanonicalUserID</code></em>"
                }
            }
        }
    ]
}</code></pre>
                              
                              							<p>If you have two AWS accounts, you can test the policy using the
                                 								AWS Command Line Interface (AWS CLI). You attach the policy and, using Dave's
                                 								credentials, test the permission using the following AWS CLI
                                 									<code class="code">put-object</code> command. You provide Dave's credentials
                                 								by adding the <code class="code">--profile</code> parameter. You grant full
                                 								control permission to the bucket owner by adding the
                                 									<code class="code">--grant-full-control</code> parameter. For more
                                 								information about setting up and using the AWS CLI, see <a href="policy-eval-walkthrough-download-awscli.html">Setting Up the Tools for the Example Walkthroughs</a>. 
                              </p>
                              							<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">aws s3api put-object --bucket <em class="replaceable"><code>examplebucket</code></em> --key HappyFace.jpg --body c:\HappyFace.jpg --grant-full-control id="<em class="replaceable"><code>AccountA-CanonicalUserID</code></em>" --profile AccountBUserProfile</code></pre>
                              
                              						</li>
                           <li class="listitem">
                              							
                              <p>Require the <code class="code">x-amz-acl</code> header with a canned ACL
                                 								granting full control permission to the bucket owner.
                              </p>
                              							
                              <p>To require the <code class="code">x-amz-acl</code> header in the request, you
                                 								can replace the key-value pair in the <code class="code">Condition</code> block
                                 								and specify the <code class="code">s3:x-amz-acl</code> condition key as shown
                                 								below.
                              </p>
                              							<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="">"Condition": {
	"StringNotEquals": {
		"s3:x-amz-acl": "bucket-owner-full-control"
	}</code></pre>
                              							<p>To test the permission using the AWS CLI, you specify the
                                 									<code class="code">--acl</code> parameter. The AWS CLI then adds the
                                 									<code class="code">x-amz-acl</code> header when it sends the request.
                              </p>
                              							<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">aws s3api put-object --bucket <em class="replaceable"><code>examplebucket</code></em> --key HappyFace.jpg --body c:\HappyFace.jpg --acl "bucket-owner-full-control" --profile AccountBadmin</code></pre>
                              						</li>
                        </ul>
                     </div>
                     				
                     				
                     					
                     <h3 id="putobject-require-sse">Example 2: Granting s3:PutObject
                        							permission requiring objects stored using server-side encryption
                     </h3>
                     
                     					
                     <p>Suppose that Account A owns a bucket. The account administrator wants to
                        						grant Jane, a user in Account A, permission to upload objects with a
                        						condition that Jane always request server-side encryption so that Amazon S3
                        saves
                        						objects encrypted. The Account A administrator can accomplish using the
                        							<code class="code">s3:x-amz-server-side-encryption</code> condition key as shown. The
                        						key-value pair in the <code class="code">Condition</code> block specifies the
                        							<code class="code">s3:x-amz-server-side-encryption</code> key.
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="">"Condition": {
     "StringNotEquals": {
         "s3:x-amz-server-side-encryption": "AES256"
     }</code></pre>
                     					<p>When testing the permission using the AWS CLI, you must add the required
                        						parameter using the <code class="code">--server-side-encryption</code> parameter.
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="">aws s3api put-object --bucket example1bucket --key HappyFace.jpg --body c:\HappyFace.jpg --server-side-encryption "AES256" --profile AccountBadmin</code></pre>
                     				
                     				
                     					<h3 id="putobject-limit-copy-source-2">Example 3: Granting
                        							s3:PutObject permission to copy objects with a restriction on the copy
                        							source
                     </h3>
                     
                     					
                     <p>In the PUT Object request, when you specify a source object, it is a copy
                        						operation (see <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectCOPY.html" target="_blank">PUT Object -
                           							Copy</a>). Accordingly, the bucket owner can grant a user permission
                        						to copy objects with restrictions on the source. For example:
                     </p>
                     					
                     <div class="itemizedlist">
                        						
                        						
                        						
                        					
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              							
                              <p>Allow copying objects only from the <code class="code">sourcebucket</code>
                                 								bucket.
                              </p>
                              						
                           </li>
                           <li class="listitem">
                              							
                              <p>Allow copying objects from the <code class="code">sourcebucket</code> bucket,
                                 								and only the objects whose key name prefix starts with
                                 									<code class="code">public/</code> f. For example,
                                 									<code class="code">sourcebucket/public/*</code></p>
                              						
                           </li>
                           <li class="listitem">
                              							
                              <p>Allow copying only a specific object from the
                                 									<code class="code">sourcebucket</code>; for example,
                                 									<code class="code">sourcebucket/example.jpg</code>.
                              </p>
                              						
                           </li>
                        </ul>
                     </div>
                     					
                     <p>The following bucket policy grants user Dave <code class="code">s3:PutObject</code>
                        						permission that allows him to copy only objects with a condition that the
                        						request include the <code class="code">s3:x-amz-copy-source</code> header and the header
                        						value specify the <code class="code">/examplebucket/public/*</code> key name prefix. 
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
    "Version": "2012-10-17",
    "Statement": [
       {
            "Sid": "cross-account permission to user in your own account",
            "Effect": "Allow",
            "Principal": {
                "AWS": "arn:aws:iam::<em class="replaceable"><code>AccountA-ID</code></em>:user/Dave"
            },
            "Action": ["s3:PutObject"],
            "Resource": "arn:aws:s3:::<em class="replaceable"><code>examplebucket</code></em>/*"
        },
        {
            "Sid": "Deny your user permission to upload object if copy source is not /bucket/folder",
            "Effect": "Deny",
            "Principal": {
                "AWS": "arn:aws:iam::<em class="replaceable"><code>AccountA-ID</code></em>:user/Dave"
            },
            "Action": "s3:PutObject",
            "Resource": "arn:aws:s3:::<em class="replaceable"><code>examplebucket</code></em>/*",
            "Condition": {
                "StringNotLike": {
                    "s3:x-amz-copy-source": "<em class="replaceable"><code>examplebucket</code></em>/public/*"
                }
            }
        }
    ]
}</code></pre>
                     					<p>You can test the permission using the AWS CLI <code class="code">copy-object</code>
                        						command. You specify the source by adding the <code class="code">--copy-source</code>
                        						parameter, and the key name prefix must match the prefix allowed in the
                        						policy. You need to provide the user Dave credentials using the
                        							<code class="code">--profile</code> parameter. For more information about setting up
                        						the AWS CLI, see <a href="policy-eval-walkthrough-download-awscli.html">Setting Up the Tools for the Example Walkthroughs</a>.
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">aws s3api copy-object --bucket <em class="replaceable"><code>examplebucket</code></em> --key HappyFace.jpg 
--copy-source <em class="replaceable"><code>examplebucket</code></em>/public/PublicHappyFace1.jpg --profile AccountADave</code></pre>
                     
                     					<p>Note that the preceding policy uses the <code class="code">StringNotLike</code>
                        						condition. To grant permission to copy only a specific object, you must
                        						change the condition from <code class="code">StringNotLike</code> to
                        							<code class="code">StringNotEquals</code> and then specify the exact object key as
                        						shown. 
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">"Condition": {
       "StringNotEquals": {
           "s3:x-amz-copy-source": "<em class="replaceable"><code>examplebucket</code></em>/public/PublicHappyFace1.jpg"
       }
}</code></pre>
                     				
                     				
                     					<h3 id="getobjectversion-limit-access-to-specific-version-3">Example 4: Granting access to a specific version of an object</h3>
                     
                     					
                     <p>Suppose that Account A owns a version-enabled bucket. The bucket has
                        						several versions of the <code>HappyFace.jpg</code> object. The
                        						account administrator now wants to grant its user (Dave) permission to get
                        						only a specific version of the object. The account administrator can
                        						accomplish this by granting Dave <code class="code">s3:GetObjectVersion</code> permission
                        						conditionally as shown. The key-value pair in the <code class="code">Condition</code>
                        						block specifies the <code class="code">s3:VersionId</code> condition key. 
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "statement1",
            "Effect": "Allow",
            "Principal": {
                "AWS": "arn:aws:iam::<em class="replaceable"><code>AccountA-ID</code></em>:user/Dave"
            },
            "Action": ["s3:GetObjectVersion"],
            "Resource": "arn:aws:s3:::<em class="replaceable"><code>examplebucketversionenabled</code></em>/HappyFace.jpg"
        },
        {
            "Sid": "statement2",
            "Effect": "Deny",
            "Principal": {
                "AWS": "arn:aws:iam::<em class="replaceable"><code>AccountA-ID</code></em>:user/Dave"
            },
            "Action": ["s3:GetObjectVersion"],
            "Resource": "arn:aws:s3:::<em class="replaceable"><code>examplebucketversionenabled</code></em>/HappyFace.jpg",
            "Condition": {
                "StringNotEquals": {
                    "s3:VersionId": "<em class="replaceable"><code>AaaHbAQitwiL_h47_44lRO2DDfLlBO5e</code></em>"
                }
            }
        }
    ]
}</code></pre>
                     					<p>In this case, Dave needs to know the exact object version ID to retrieve
                        						the object. 
                     </p>
                     					
                     <p>You can test the permissions using the AWS CLI <code class="code">get-object</code>
                        						command with the <code class="code">--version-id</code> parameter identifying the
                        						specific object version. The command retrieves the object and saves it to
                        						the <code>OutputFile.jpg</code> file.
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">aws s3api get-object --bucket <em class="replaceable"><code>examplebucketversionenabled</code></em> --key HappyFace.jpg OutputFile.jpg --version-id <em class="replaceable"><code>AaaHbAQitwiL_h47_44lRO2DDfLlBO5e</code></em> --profile AccountADave</code></pre>
                     				
                     
                     				
                     					<h3 id="example-storage-class-condition-key">Example 5: Restrict
                        							object uploads to objects with a specific storage class
                     </h3>
                     
                     					
                     <p>Suppose that Account A owns a bucket. The account administrator wants to
                        						restrict Dave, a user in Account A, to be able to only upload objects to the
                        						bucket that are stored with the <code class="code">STANDARD_IA</code> storage class. The
                        						Account A administrator can do this by using the
                        							<code class="code">s3:x-amz-storage-class</code> condition key as shown in the
                        						following example bucket policy. 
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "statement1",
      "Effect": "Allow",
      "Principal": {
        "AWS": "arn:aws:iam::<em class="replaceable"><code>AccountA-ID</code></em>:user/Dave"
      },
      "Action": "s3:PutObject",
      "Resource": [
        "arn:aws:s3:::examplebucket/*"
      ],
      "Condition": {
        "StringEquals": {
          "s3:x-amz-storage-class": [
            "STANDARD_IA"
          ]
        }
      }
    }
  ]
}</code></pre>
                     				
                     			
                     				<h2 id="bucket-keys-in-amazon-s3-policies">Amazon S3 Condition Keys for
                        						Bucket Operations
                     </h2>
                     
                     				
                     <p>The following table shows list of bucket operation–specific permissions
                        					you can grant in policies, and for each of the permissions, the available keys
                        					you can use in specifying a condition. 
                     </p>
                     				
                     <div class="table">
                        <div class="table-contents">
                           <table id="w77aac29c22b9c15c19b5">
                              							
                              <tr>
                                 								
                                 <th>Permission</th>
                                 								
                                 <th>Applicable Condition Keys</th>
                                 								
                                 <th>Description</th>
                                 							
                              </tr>
                              						
                              							
                              <tr>
                                 								
                                 <td rowspan="2">
                                    									
                                    <p><code class="code">s3:CreateBucket</code></p>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <div class="itemizedlist">
                                       										
                                       										
                                       									
                                       <ul class="itemizedlist" type="disc">
                                          <li class="listitem">
                                             											
                                             <p><code class="code">s3:x-amz-acl</code>
                                                												(for canned ACL permissions)
                                             </p>
                                             										
                                          </li>
                                          <li class="listitem">
                                             											
                                             <p><code class="code">s3:x-amz-grant-<em class="replaceable"><code>permission</code></em></code>
                                                												(for explicit permissions), where
                                                												<em class="replaceable"><code>permission</code></em> can
                                                												be:
                                             </p>
                                             											
                                             <p><code class="code">read, write,​
                                                   												read-acp,​ write​-acp,​
                                                   												​full​-control</code></p>
                                             										
                                          </li>
                                       </ul>
                                    </div>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <p>
                                       										The Create Bucket API (see <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/RESTBucketPUT.html" target="_blank">PUT Bucket</a>)
                                       										supports ACL-specific headers. Using these condition keys,
                                       										you can require a user to set these headers in the request
                                       										granting specific permissions.
                                    </p>
                                    									
                                    								
                                 </td>
                                 							
                              </tr>
                              							
                              <tr>
                                 								
                                 <td>
                                    									
                                    <p><code class="code">s3:LocationConstraint</code></p>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <p>Using this condition key, you can restrict a user to
                                       										create a bucket in a specific AWS Region. For a policy
                                       										example, see <a href="amazon-s3-policy-keys.html#condition-key-bucket-ops-1">Example 1: Allow a user to
                                          							create a bucket but only in a specific region</a>. 
                                    </p>
                                    								
                                 </td>
                                 							
                              </tr>
                              							
                              <tr>
                                 								
                                 <td rowspan="3">
                                    									
                                    <p><code class="code">s3:ListBucket</code></p>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <p><code class="code">s3:prefix</code></p>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <p>Using this condition key, you can limit the response of
                                       										the Get Bucket (List Objects) API (see <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/RESTBucketGET.html" target="_blank">GET Bucket (List
                                          											Objects)</a>) to key names with a specific prefix. 
                                    </p>
                                    									
                                    <p>The Get Bucket (List Objects) API returns a list of object
                                       										keys in the specified bucket. This API supports the
                                       											<code class="code">prefix</code> header to retrieve only the object
                                       										keys with a specific prefix. This condition key relates to
                                       										the <code class="code">prefix</code> header. 
                                    </p>
                                    									
                                    <p>For example, the Amazon S3 console supports the folder concept
                                       										using key name prefixes. So if you have two objects with key
                                       										names <code>public/object1.jpg</code> and
                                       											<code>public/object2.jpg</code>, the console
                                       										shows the objects under the <code>public</code>
                                       										folder. If you organize your object keys using such
                                       										prefixes, you can grant <code class="code">s3:ListBucket</code> permission with the condition that
                                       										will allow the user to get a list of key names with a
                                       										specific prefix.
                                    </p>
                                    									
                                    <p>For a policy example, see <a href="amazon-s3-policy-keys.html#condition-key-bucket-ops-2">Example 2: Allow a user to get
                                          							a list of objects in a bucket according to a specific prefix </a>.
                                    </p>
                                    								
                                 </td>
                                 							
                              </tr>
                              							
                              <tr>
                                 								
                                 <td>
                                    									
                                    <p><code class="code">s3:delimiter</code></p>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <p>If you organize your object key names using prefixes and
                                       										delimiters, you can use this condition key to require the
                                       										user to specify the <code class="code">delimiter</code> parameter in the
                                       										Get Bucket (List Objects) request. In this case, the
                                       										response Amazon S3 returns is a list of object keys with common
                                       										prefixes grouped together. For an example of using prefixes
                                       										and delimiters, go to <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/RESTBucketGET.html#RESTBucketGET-responses-examples-sample-request-using-prefix-and-delimiter" target="_blank">Get Bucket (List Objects)</a>. 
                                    </p>
                                    									
                                    									
                                    								
                                 </td>
                                 							
                              </tr>
                              							
                              							
                              <tr>
                                 								
                                 <td>
                                    									
                                    <p><code class="code">s3:max-keys</code></p>
                                    								
                                 </td>
                                 								
                                 <td>
                                    <p>Using this condition, you can limit the number of keys
                                       										Amazon S3 returns in response to the Get Bucket (List Objects)
                                       										request by requiring the user to specify the
                                       											<code class="code">max-keys</code> parameter. By default the API
                                       										returns up to 1,000 key names. 
                                    </p>For a list of numeric
                                    									conditions you can use, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements.html#Conditions_Numeric" target="_blank">Numeric Condition Operators</a> in the
                                    										<em>IAM User Guide</em>.
                                 </td>
                                 							
                              </tr>
                              							
                              <tr>
                                 								
                                 <td rowspan="3">
                                    									
                                    <p><code class="code">s3:ListBucketVersions</code></p>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <p><code class="code">s3:prefix</code></p>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <p>If your bucket is version-enabled, you can use the
                                       											<code class="code">GET Bucket Object versions</code> API (see <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/RESTBucketGET.html" target="_blank">GET Bucket Object
                                          											versions</a>) to retrieve metadata of all of the
                                       										versions of objects. For this API, the bucket owner must
                                       										grant the <code class="code">s3:ListBucketVersions</code> permission in the policy. 
                                    </p>
                                    									
                                    <p>Using this condition key, you can limit the response of
                                       										the API to key names with a specific prefix by requiring the
                                       										user to specify the <code class="code">prefix</code> parameter in the
                                       										request with a specific value. 
                                    </p>
                                    									
                                    <p>For example, the Amazon S3 console supports the folder concept
                                       										of using key name prefixes. If you have two objects with key
                                       										names <code>public/object1.jpg</code> and
                                       											<code>public/object2.jpg</code>, the console
                                       										shows the objects under the <code>public</code>
                                       										folder. If you organize your object keys using such
                                       										prefixes, you can grant <code class="code">s3:ListBucket</code> permission with the condition that
                                       										will allow a use to get a list of key names with a specific
                                       										prefix.
                                    </p>
                                    									
                                    <p>For a policy example, see <a href="amazon-s3-policy-keys.html#condition-key-bucket-ops-2">Example 2: Allow a user to get
                                          							a list of objects in a bucket according to a specific prefix </a>.
                                    </p>
                                    								
                                 </td>
                                 							
                              </tr>
                              							
                              <tr>
                                 								
                                 <td>
                                    									
                                    <p><code class="code">s3:delimiter</code></p>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <p>If you organize your object key names using prefixes and
                                       										delimiters, you can use this condition key to require the
                                       										user to specify the <code class="code">delimiter</code> parameter in the
                                       										GET Bucket Object versions request. In this case, the
                                       										response Amazon S3 returns is a list of object keys with common
                                       										prefixes grouped together.
                                    </p>
                                    								
                                 </td>
                                 							
                              </tr>
                              							
                              							
                              <tr>
                                 								
                                 <td>
                                    									
                                    <p><code class="code">s3:max-keys</code></p>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <p>Using this condition, you can limit the number of keys
                                       										Amazon S3 returns in response to the GET Bucket Object versions
                                       										request by requiring the user to specify the <code class="code">max-keys
                                          										</code>parameter. By default, the API returns up to 1,000
                                       										key names. For a list of numeric conditions you can use, see
                                       											<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements.html#Conditions_Numeric" target="_blank">Numeric Condition Operators</a> in the
                                       											<em>IAM User Guide</em>.
                                    </p>
                                    								
                                 </td>
                                 							
                              </tr>
                              							
                              <tr>
                                 								
                                 <td>
                                    									
                                    <p><code class="code">s3:PutBucketAcl</code></p>
                                    								
                                 </td>
                                 								
                                 <td>
                                    									
                                    <div class="itemizedlist">
                                       										
                                       										
                                       									
                                       <ul class="itemizedlist" type="disc">
                                          <li class="listitem">
                                             											
                                             <p><code class="code">s3:x-amz-acl</code>
                                                												(for canned ACL permissions)
                                             </p>
                                             										
                                          </li>
                                          <li class="listitem">
                                             											
                                             <p><code class="code">s3:x-amz-grant-<em class="replaceable"><code>permission</code></em></code>
                                                												(for explicit permissions), where
                                                												<em class="replaceable"><code>permission</code></em> can
                                                												be:
                                             </p>
                                             											
                                             <p><code class="code">read, write,​
                                                   												read-acp,​ write​-acp,​
                                                   												​full​-control</code></p>
                                             										
                                          </li>
                                       </ul>
                                    </div>
                                    								
                                 </td>
                                 								
                                 <td>The <code class="code">PUT Bucket
                                       										acl</code> API (see <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/RESTBucketPUTacl.html" target="_blank">PUT Bucket</a>)
                                    									supports ACL-specific headers. You can use these condition keys
                                    									to require a user to set these headers in the request. 
                                 </td>
                                 							
                              </tr>
                              						
                           </table>
                        </div>
                     </div>
                     				
                     				
                     					
                     <h3 id="condition-key-bucket-ops-1">Example 1: Allow a user to
                        							create a bucket but only in a specific region
                     </h3>
                     
                     					
                     <p>Suppose that an AWS account administrator wants to grant its user (Dave)
                        						permission to create a bucket in the South America (São Paulo) Region only.
                        The
                        						account administrator can attach the following user policy granting the
                        							<code class="code">s3:CreateBucket</code> permission with a condition as shown. The
                        						key-value pair in the <code class="code">Condition</code> block specifies the
                        							<code class="code">s3:LocationConstraint</code> key and the <code class="code">sa-east-1</code>
                        						region as its value.
                     </p>
                     					
                     <div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p>In this example, the bucket owner is granting permission to one of its
                           							users, so either a bucket policy or a user policy can be used. This
                           							example shows a user policy.
                        </p>
                     </div>
                     					
                     <p>For a list of Amazon S3 Regions, go to <a href="https://docs.aws.amazon.com/general/latest/gr/rande.html#s3_region" target="_blank">Regions and Endpoints</a> in the
                        							<em>Amazon Web Services General Reference</em>. 
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="">{
   "Version":"2012-10-17",
   "Statement":[
      {
         "Sid":"statement1",
         "Effect":"Allow",
         "Action":[
            "s3:CreateBucket"
         ],
         "Resource":[
            "arn:aws:s3:::*"
         ],
         "Condition": {
             "StringLike": {
                 "s3:LocationConstraint": "sa-east-1"
             }
         }
       }
    ]
}</code></pre>
                     					<p>This policy restricts the user from creating a bucket in any other Region
                        						except <code class="code">sa-east-1</code>. However, it is possible some other policy
                        						will grant this user permission to create buckets in another Region. For
                        						example, if the user belongs to a group, the group may have a policy
                        						attached to it allowing all users in the group permission to create buckets
                        						in some other Region. To ensure that the user does not get permission to
                        						create buckets in any other Region, you can add an explicit deny statement
                        						in this policy. 
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="">{
   "Version":"2012-10-17",
   "Statement":[
      {
         "Sid":"statement1",
         "Effect":"Allow",
         "Action":[
            "s3:CreateBucket"
         ],
         "Resource":[
            "arn:aws:s3:::*"
         ],
         "Condition": {
             "StringLike": {
                 "s3:LocationConstraint": "sa-east-1"
             }
         }
       },
      {
         "Sid":"statement2",
         "Effect":"Deny",
         "Action":[
            "s3:CreateBucket"
         ],
         "Resource":[
            "arn:aws:s3:::*"
         ],
         "Condition": {
             "StringNotLike": {
                 "s3:LocationConstraint": "sa-east-1"
             }
         }
       }
    ]
}</code></pre>
                     					<p>The <code class="code">Deny</code> statement uses the <code class="code">StringNotLike</code>
                        						condition. That is, a create bucket request is denied if the location
                        						constraint is not "sa-east-1". The explicit deny does not allow the user to
                        						create a bucket in any other Region, no matter what other permission the
                        						user gets. 
                     </p>
                     					
                     <p>You can test the policy using the following <code class="code">create-bucket</code>
                        						AWS CLI command. This example uses the <code>bucketconfig.txt</code>
                        						file to specify the location constraint. Note the Windows file path. You
                        						need to update the bucket name and path as appropriate. You must provide
                        						user credentials using the <code class="code">--profile</code> parameter. For more
                        						information about setting up and using the AWS CLI, see <a href="policy-eval-walkthrough-download-awscli.html">Setting Up the Tools for the Example Walkthroughs</a>.
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">aws s3api create-bucket --bucket <em class="replaceable"><code>examplebucket</code></em> --profile AccountADave --create-bucket-configuration file://c:/Users/someUser/bucketconfig.txt</code></pre>
                     					<p>The <code>bucketconfig.txt</code> file specifies the configuration
                        						as follows:
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="">{"LocationConstraint": "sa-east-1"}</code></pre>
                     				
                     				
                     					<h3 id="condition-key-bucket-ops-2">Example 2: Allow a user to get
                        							a list of objects in a bucket according to a specific prefix 
                     </h3>
                     
                     					
                     <p>A bucket owner can restrict a user to list the contents of a specific
                        						folder in the bucket. This is useful if objects in the bucket are organized
                        						by key name prefixes. The Amazon S3 console then uses the prefixes to show a
                        						folder hierarchy (only the console supports the concept of folders; the Amazon
                        S3
                        						API supports only buckets and objects). 
                     </p>
                     					
                     <p>In this example, the bucket owner and the parent account to which the user
                        						belongs are the same. So the bucket owner can use either a bucket policy or
                        						a user policy. First, we show a user policy.
                     </p>
                     					
                     <p>The following user policy grants the <code class="code">s3:ListBucket</code> permission
                        						(see <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/RESTBucketGET.html" target="_blank">GET Bucket (List
                           							Objects)</a>) with a condition that requires the user to specify the
                        							<code class="code">prefix</code> in the request with the value <code class="code">projects</code>. 
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
   "Version":"2012-10-17",
   "Statement":[
      {
         "Sid":"statement1",
         "Effect":"Allow",
         "Action":[
            "s3:ListBucket"
         ],
         "Resource":[
            "arn:aws:s3:::<em class="replaceable"><code>examplebucket</code></em>"
         ],
         "Condition" : {
             "StringEquals" : {
                 "s3:prefix": "projects" 
             }
          } 
       },
      {
         "Sid":"statement2",
         "Effect":"Deny",
         "Action":[
            "s3:ListBucket"
         ],
         "Resource":[
            "arn:aws:s3:::<em class="replaceable"><code>examplebucket</code></em>"
         ],
         "Condition" : {
             "StringNotEquals" : {
                 "s3:prefix": "projects" 
             }
          } 
       }         
    ]
}</code></pre>
                     					<p>The condition restricts the user to listing object keys with the
                        							<code class="code">projects</code> prefix. The added explicit deny denies the user
                        						request for listing keys with any other prefix no matter what other
                        						permissions the user might have. For example, it is possible that the user
                        						gets permission to list object keys without any restriction; for example,
                        						either by updates to the preceding user policy or via a bucket policy. But
                        						because explicit deny always supersedes, the user request to list keys other
                        						than the <code class="code">project</code> prefix is denied. 
                     </p>
                     					
                     <p>The preceding policy is a user policy. If you add the
                        							<code class="code">Principal</code> element to the policy, identifying the user, you
                        						now have a bucket policy as shown.
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
   "Version":"2012-10-17",
   "Statement":[
      {
         "Sid":"statement1",
         "Effect":"Allow",
         "Principal": {
            "AWS": "arn:aws:iam::<em class="replaceable"><code>BucketOwner-accountID</code></em>:user/<em class="replaceable"><code>user-name</code></em>"
         },  
         "Action":[
            "s3:ListBucket"
         ],
         "Resource":[
            "arn:aws:s3:::<em class="replaceable"><code>examplebucket</code></em>"
         ],
         "Condition" : {
             "StringEquals" : {
                 "s3:prefix": "examplefolder" 
             }
          } 
       },
      {
         "Sid":"statement2",
         "Effect":"Deny",
         "Principal": {
            "AWS": "arn:aws:iam::<em class="replaceable"><code>BucketOwner-AccountID</code></em>:user/<em class="replaceable"><code>user-name</code></em>"
         },  
         "Action":[
            "s3:ListBucket"
         ],
         "Resource":[
            "arn:aws:s3:::<em class="replaceable"><code>examplebucket</code></em>"
         ],
         "Condition" : {
             "StringNotEquals" : {
                 "s3:prefix": "examplefolder" 
             }
          } 
       }         
    ]
}</code></pre>
                     					<p>You can test the policy using the following <code class="code">list-object</code> AWS CLI
                        						command. In the command, you provide user credentials using the
                        							<code class="code">--profile</code> parameter. For more information about setting up
                        						and using the AWS CLI, see <a href="policy-eval-walkthrough-download-awscli.html">Setting Up the Tools for the Example Walkthroughs</a>.
                     </p>
                     					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">aws s3api list-objects --bucket <em class="replaceable"><code>examplebucket</code></em> --prefix examplefolder --profile AccountADave</code></pre>
                     					<p>Now if the bucket is version-enabled, to list the objects in the bucket,
                        						instead of <code class="code">s3:ListBucket</code> permission, you must grant the
                        							<code class="code">s3:ListBucketVersions</code> permission in the preceding policy.
                        						This permission also supports the <code class="code">s3:prefix</code> condition key.
                        					
                     </p>
                     				
                     			
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="using-with-s3-actions.html">« Previous </a><a class="awstoc" accesskey="n" href="example-bucket-policies.html">Next »</a></div>
                     <div id="copyright-main-footer">© 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Available Condition Keys"><a class="pagetoc" href="#AvailableKeys-iamV2">Available Condition Keys</a></li>
                        <li class="pagetoc" name="Amazon S3 Condition Keys for&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;Object Operations"><a class="pagetoc" href="#object-keys-in-amazon-s3-policies">Amazon S3 Condition Keys for
                              						Object Operations</a></li>
                        <li class="pagetoc" name="Amazon S3 Condition Keys for&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;Bucket Operations"><a class="pagetoc" href="#bucket-keys-in-amazon-s3-policies">Amazon S3 Condition Keys for
                              						Bucket Operations</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <div id="cookie-notice">
         <div class="cookie-notice-text">We use cookies to provide and improve our services. By using our site, you consent
            to cookies. <a href="http://aws.amazon.com/legal/cookies">Learn more</a></div>
      </div>
      <div id="footer">
         <div id="footer_short_fb" class="hide" title="Feedback"><a target="_blank" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=S3&amp;topic_url=http://docs.aws.amazon.com/en_us/AmazonS3/latest/dev/amazon-s3-policy-keys.html&amp;hidden_guide_name=Developer Guide&amp;hidden_api_version=2006-03-01&amp;hidden_file_name=amazon-s3-policy-keys"><i class="awsdocs-footer-text fa fa-envelope-o"></i></a></div>
         <div id="footer_toggle" class="mediaobject">
            <div id="footer_toggle_img" class="awsdocs-footer-text fa fa-caret-down"></div>
            <div id="footer_toggle_img_collapse" class="hide awsdocs-footer-text fa fa-caret-right"></div>
         </div>
         <div id="footer-left"><a class="awsdocs-footer-text" target="_top" href="http://aws.amazon.com/terms">Terms of Use</a><span class="awsdocs-footer-text"> | </span><a class="awsdocs-footer-text" target="_top" href="http://aws.amazon.com/privacy">Privacy</a><span class="awsdocs-footer-text"> | </span><span class="awsdocs-footer-text">© 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</span></div>
         <div id="footer-right">
            <div id="feedback">
               <div id="forums"><a id="forum_link" target="_blank" href="http://forums.aws.amazon.com/forum.jspa?forumID=24" class="awsdocs-footer-text">Have a question? Try the Forums.</a></div>
               <div id="feedback-message" class="awsdocs-footer-text">Did this page help you?</div>
               <div id="feedback-yesno-buttons"><a class="awstoc btn btn-default" target="_blank" href="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/AmazonS3/latest/dev/amazon-s3-policy-keys.html">Yes</a><a class="awstoc btn btn-default" target="_blank" href="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/AmazonS3/latest/dev/amazon-s3-policy-keys.html">No</a></div>
               <div id="feedback-feedback-button"><a class="awstoc btn btn-default" target="_blank" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=S3&amp;topic_url=http://docs.aws.amazon.com/en_us/AmazonS3/latest/dev/amazon-s3-policy-keys.html&amp;hidden_guide_name=Developer Guide&amp;hidden_api_version=2006-03-01&amp;hidden_file_name=amazon-s3-policy-keys">Feedback</a></div>
            </div>
         </div>
      </div>
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='Amazon Simple Storage Service';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='Developer Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   </body>
</html>