<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>IAM Roles for Amazon EC2 - Amazon Elastic Compute Cloud</title>
      <meta name="viewport" content="width=device-width, initial-scale=1" />
      <link rel="home" href="#top" />
      <link rel="up" href="UsingIAM.html" title="Controlling Access to Amazon EC2 Resources" />
      <link rel="prev" href="iam-policies-ec2-console.html" title="Example Policies for Working in the Amazon EC2 Console" />
      <link rel="next" href="authorizing-access-to-an-instance.html" title="Authorizing Inbound Traffic for Your Linux Instances" />
      <meta name="description" content="Allow applications to make secure API requests by creating IAM roles and assigning them to your EC2 instances." />
      <meta name="keywords" content="EC2,Amazon EC2,EC2 instance,instance,VM,virtual machine" />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="Amazon Elastic Compute Cloud" />
      <meta name="guide" content="User Guide for Linux Instances" />
      <meta name="guide-locale" content="en_us" />
      <link rel="icon" type="image/ico" href="/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico" />
      <link rel="canonical" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html" />
      <link rel="stylesheet" type="text/css" href="/css/jquery-ui.min.css" />
      <link rel="stylesheet" type="text/css" href="/font/css/font-awesome.min.css" />
      <link rel="stylesheet" type="text/css" href="/css/google-font.css" />
      <link id="code-style" rel="stylesheet" type="text/css" href="/css/code/light.css" />
      <link rel="stylesheet" type="text/css" href="/css/jquery-ui.theme.css" />
      <link rel="stylesheet" type="text/css" href="/css/colorbox.css" />
      <link rel="stylesheet" type="text/css" href="/css/awsdocs.css?v=20170615" /><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      <div xmlns:db="http://docbook.org/ns/docbook" id="aws-nav" class="aws-nav-header">
         <div class="aws-nav-header-left">
            <div id="aws-nav-flyout-trigger" class="aws-nav-flyout-trigger"><i class="fa fa-bars fa-2x"></i></div>
            <div class="aws-nav-logo">
               <!--aws_logo_105x39.png--><a href="http://aws.amazon.com"><img src="/images/aws_logo_105x39.png" alt="Amazon Web Services" /></a></div>
         </div>
         <div id="aws-nav-header-right" class="aws-nav-header-right">
            <div class="aws-nav-cta-button-outer"><a id="aws-nav-cta-button" class="aws-nav-button" href="https://console.aws.amazon.com/console/home">Sign In to the Console</a></div>
            <div class="aws-nav-popover-trigger" data-dropdown="aws-nav-dropdown-lang"><select id="languageSelection" onchange="SelectLanguage()">
                  <option value="/de_de/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html">Deutsch</option>
                  <option value="/en_us/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html" selected="selected">English</option>
                  <option value="/es_es/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html">Español</option>
                  <option value="/fr_fr/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html">Français</option>
                  <option value="/it_it/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html">Italiano</option>
                  <option value="/ja_jp/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html">日本語</option>
                  <option value="/ko_kr/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html">한국어</option>
                  <option value="/pt_br/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html">Português</option>
                  <option value="/zh_cn/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html">中文 (简体)</option>
                  <option value="/zh_tw/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html">中文 (繁體)</option></select></div><a class="btn btn-rss-link" id="rss-link-top" target="_blank" href="amazon-ec2-release-notes.rss" title="View RSS Feed"></a><a class="btn btn-kindle-link" id="kindle-link-top" target="_blank" href="http://www.amazon.com/dp/B076452RSZ" title="Open Kindle"></a><a class="btn btn-pdf-link" id="pdf-link-top" href="ec2-ug.pdf#iam-roles-for-amazon-ec2" target="_blank" title="Open PDF"></a><a class="btn btn-github-link" id="github-link-top" href="https://github.com/awsdocs/amazon-ec2-user-guide/tree/master/doc_source/iam-roles-for-amazon-ec2.md" target="_blank" title="Edit on GitHub"></a><div id="aws-nav-quicklinks-separator" class="aws-nav-quicklinks-separator">
               <div class="aws-nav-left"></div>
               <div class="aws-nav-right"></div>
            </div>
         </div>
         <div xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" id="topnav-flyout-menu-container">
            <ul id="topnav-flyout-menu"><script id="flyout-item-template" type="text/x-handlebars-template">
                    {{#flyoutList}}

                        {{#if topTarget}}
                            <li class="awsdocs-flyout-link-wrapper"><a href="{{topTarget}}">{{listItem}}</a></li>
                        {{else}}
                            <li>{{listItem}}
                                {{#if subList}}
                                <ul>
                                    {{#subList}}
                                    <li class="awsdocs-flyout-link-wrapper"><a href="{{target}}">{{text}}</a></li>
                                    {{/subList}}
                                </ul>
                                {{/if}}
                            </li>
                        {{/if}}

                    {{/flyoutList}}
                </script></ul>
            <div id="topnav-flyout-menu-spacer"></div>
         </div>
      </div>
      <div id="content-container">
         <div id="left-column">
            <div id="left-col-header">
               <div xmlns:db="http://docbook.org/ns/docbook" id="left-col-top-content">
                  <div id="service-name">Amazon Elastic Compute Cloud </div>
                  <div id="search"><i id="search-icon" class="fa fa-search fa-2x"></i></div>
                  <div id="guide-info">User Guide for Linux Instances
                     <div id="content-button"><i id="toggle-contents" class="fa fa-bars"></i></div>
                  </div>
               </div>
               <form id="finegrainedSearch" method="get" onsubmit="return searchFormSubmit(this);" action="/search/doc-search.html">
                  <div id="search-form"><select id="search-select" name="searchPath">
                        <option value="all">Entire Site</option>
                        <option value="AWSMarketplace">AMIs from AWS Marketplace</option>
                        <option value="amis">AMIs from All Sources</option>
                        <option value="articles">Articles &amp; Tutorials</option>
                        <option value="products_and_info">AWS Product Information</option>
                        <option value="case_studies">Case Studies</option>
                        <option value="customerapps">Customer Apps</option>
                        <option value="documentation">Documentation</option>
                        <option value="documentation-product">Documentation - This Product</option>
                        <option value="documentation-guide" selected="selected">Documentation - This Guide</option>
                        <option value="datasets">Public Data Sets</option>
                        <option value="releasenotes">Release Notes</option>
                        <option value="solution_providers">Partners</option>
                        <option value="code">Sample Code &amp; Libraries</option></select><br /><input id="search-query" name="searchQuery" type="text" placeholder="Search" /><input id="search-button" src="/images/search-button.png" alt="Go" type="image" /></div><input type="hidden" name="this_doc_product" id="this_doc_product" value="Amazon Elastic Compute Cloud" /><input type="hidden" name="this_doc_guide" id="this_doc_guide" value="User Guide for Linux Instances" /><input type="hidden" name="doc_locale" value="en_us" /></form>
            </div>
            <div id="toc">
               <ul class="awstoc">
                  <li class="awstoc closed"><a class="awstoc" href="concepts.html">What Is Amazon EC2?</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="ec2-instances-and-amis.html">Instances and AMIs</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="using-regions-availability-zones.html">Regions and Availability Zones</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="RootDeviceStorage.html">Root Device Volume</a></li>
                     </ul>
                  </li>
                  <li class="awstoc leaf"><a class="awstoc" href="get-set-up-for-amazon-ec2.html">Setting Up</a></li>
                  <li class="awstoc leaf"><a class="awstoc" href="EC2_GetStarted.html">Getting Started</a></li>
                  <li class="awstoc leaf"><a class="awstoc" href="ec2-best-practices.html">Best Practices</a></li>
                  <li class="awstoc closed"><a class="awstoc" href="ec2-tutorials.html">Tutorials</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="ec2-lamp-amazon-linux-2.html">Install a LAMP Server (Amazon Linux 2)</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="install-LAMP.html">Install a LAMP Server (Amazon Linux AMI)</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="hosting-wordpress.html">Tutorial: Hosting a WordPress Blog</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="SSL-on-an-instance.html">Tutorial: Configure Apache Web Server on Amazon Linux 2 to Use SSL/TLS</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="ec2-increase-availability.html">Tutorial: Increase the Availability of Your Application</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="tutorial_run_command.html">Tutorial: Remotely Manage Your Instances</a></li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="AMIs.html">Amazon Machine Images</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="ComponentsAMIs.html">AMI Types</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="virtualization_types.html">Virtualization Types</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="finding-an-ami.html">Finding a Linux AMI</a></li>
                        <li class="awstoc closed"><a class="awstoc" href="sharing-amis.html">Shared AMIs</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="usingsharedamis-finding.html">Finding Shared AMIs</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="sharingamis-intro.html">Making an AMI Public</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="sharingamis-explicit.html">Sharing an AMI with Specific AWS Accounts</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="using-bookmarks.html">Using Bookmarks</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="building-shared-amis.html">Guidelines for Shared Linux AMIs</a></li>
                           </ul>
                        </li>
                        <li class="awstoc leaf"><a class="awstoc" href="paid-amis.html">Paid AMIs</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="creating-an-ami-ebs.html">Creating an Amazon EBS-Backed Linux AMI</a></li>
                        <li class="awstoc closed"><a class="awstoc" href="creating-an-ami-instance-store.html">Creating an Instance Store-Backed Linux AMI</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="set-up-ami-tools.html">Setting Up the AMI Tools</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="create-instance-store-ami.html">Creating an AMI from an Instance Store-Backed Instance</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="Using_ConvertingS3toEBS.html">Converting to an Amazon EBS-Backed AMI</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="ami-tools-commands.html">AMI Tools Reference</a></li>
                           </ul>
                        </li>
                        <li class="awstoc leaf"><a class="awstoc" href="AMIEncryption.html">AMIs with Encrypted Snapshots</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="CopyingAMIs.html">Copying an AMI</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="deregister-ami.html">Deregistering Your Linux AMI</a></li>
                        <li class="awstoc closed"><a class="awstoc" href="amazon-linux-ami-basics.html">Amazon Linux</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="amazon-linux-2-virtual-machine.html">Running Amazon Linux 2 as a Virtual Machine On-Premises</a></li>
                           </ul>
                        </li>
                        <li class="awstoc leaf"><a class="awstoc" href="UserProvidedKernels.html">User Provided Kernels</a></li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="Instances.html">Instances</a><ul class="awstoc">
                        <li class="awstoc closed"><a class="awstoc" href="instance-types.html">Instance Types</a><ul class="awstoc">
                              <li class="awstoc closed"><a class="awstoc" href="burstable-performance-instances.html">Burstable Performance Instances</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="burstable-credits-baseline-concepts.html">CPU Credits and Baseline Performance</a></li>
                                    <li class="awstoc closed"><a class="awstoc" href="burstable-performance-instances-unlimited-mode.html">Unlimited Mode</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="unlimited-mode-examples.html">Examples</a></li>
                                       </ul>
                                    </li>
                                    <li class="awstoc closed"><a class="awstoc" href="burstable-performance-instances-standard-mode.html">Standard Mode</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="standard-mode-examples.html">Examples</a></li>
                                       </ul>
                                    </li>
                                    <li class="awstoc leaf"><a class="awstoc" href="burstable-performance-instances-how-to.html">Working with Burstable Performance Instances</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="burstable-performance-instances-monitoring-cpu-credits.html">Monitoring Your CPU Credits</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc leaf"><a class="awstoc" href="general-purpose-instances.html">General Purpose Instances</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="compute-optimized-instances.html">Compute Optimized Instances</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="memory-optimized-instances.html">Memory Optimized Instances</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="storage-optimized-instances.html">Storage Optimized Instances</a></li>
                              <li class="awstoc closed"><a class="awstoc" href="accelerated-computing-instances.html">Accelerated Computing Instances</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="install-nvidia-driver.html">Installing the NVIDIA Driver on Linux Instances</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="activate_grid.html">Activate NVIDIA GRID Virtual Applications (G3 Instances Only)</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="optimize_gpu.html">Optimizing GPU Settings (P2, P3, and G3 Instances)</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="fpga-getting-started.html">Getting Started with FPGA Development</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc leaf"><a class="awstoc" href="concepts_micro_instances.html">T1 Micro Instances</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="ec2-instance-resize.html">Changing the Instance Type</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="instance-optimize-cpu.html">Optimizing CPU Options</a></li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="instance-purchasing-options.html">Instance Purchasing Options</a><ul class="awstoc">
                              <li class="awstoc closed"><a class="awstoc" href="ec2-reserved-instances.html">Reserved Instances</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="reserved-instances-types.html">Types of Reserved Instances (Offering Classes)</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="apply_ri.html">How Reserved Instances Are Applied</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="concepts-reserved-instances-application.html">How You Are Billed</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ri-market-concepts-buying.html">Buying Reserved Instances</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ri-market-general.html">Selling on the Reserved Instance Marketplace</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ri-modifying.html">Modifying Reserved Instances</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ri-convertible-exchange.html">Exchanging Convertible Reserved Instances</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc leaf"><a class="awstoc" href="ec2-scheduled-instances.html">Scheduled Instances</a></li>
                              <li class="awstoc closed"><a class="awstoc" href="using-spot-instances.html">Spot Instances</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="how-spot-instances-work.html">How Spot Instances Work</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="spot-fleet.html">How Spot Fleet Works</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="using-spot-instances-history.html">Spot Instance Pricing History</a></li>
                                    <li class="awstoc closed"><a class="awstoc" href="spot-requests.html">Spot Instance Requests</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="spot-request-examples.html">Example Launch Specifications</a></li>
                                       </ul>
                                    </li>
                                    <li class="awstoc closed"><a class="awstoc" href="spot-fleet-requests.html">Spot Fleet Requests</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="spot-fleet-examples.html">Example Configurations</a></li>
                                       </ul>
                                    </li>
                                    <li class="awstoc leaf"><a class="awstoc" href="spot-fleet-cloudwatch-metrics.html">CloudWatch Metrics for Spot Fleet</a></li>
                                    <li class="awstoc closed"><a class="awstoc" href="spot-fleet-automatic-scaling.html">Automatic Scaling for Spot Fleet</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="spot-fleet-target-tracking.html">Target Tracking Scaling Policies</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="spot-fleet-step-scaling.html">Step Scaling Policies</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="spot-fleet-scheduled-scaling.html">Scheduled Scaling</a></li>
                                       </ul>
                                    </li>
                                    <li class="awstoc leaf"><a class="awstoc" href="spot-bid-status.html">Spot Request Status</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="spot-interruptions.html">Spot Instance Interruptions</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="spot-data-feeds.html">Spot Instance Data Feed</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="using-spot-limits.html">Spot Instance Limits</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc closed"><a class="awstoc" href="dedicated-hosts-overview.html">Dedicated Hosts</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="how-dedicated-hosts-work.html">Working with Dedicated Hosts</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="dedicated-hosts-aws-config.html">Tracking Configuration Changes</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc leaf"><a class="awstoc" href="dedicated-instance.html">Dedicated Instances</a></li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="ec2-instance-lifecycle.html">Instance Lifecycle</a><ul class="awstoc">
                              <li class="awstoc closed"><a class="awstoc" href="LaunchingAndUsingInstances.html">Launch</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="launching-instance.html">Launching an Instance Using the Launch Instance Wizard</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ec2-launch-templates.html">Launching an Instance from a Launch Template</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="launch-more-like-this.html">Launching an Instance From an Existing Instance</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="instance-launch-snapshot.html">Launching a Linux Instance from a Backup</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="launch-marketplace-console.html">Launching an AWS Marketplace Instance</a></li>
                                    <li class="awstoc closed"><a class="awstoc" href="ec2-fleet.html">Launching an EC2 Fleet</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="ec2-fleet-configuration-strategies.html">EC2 Fleet Configuration Strategies</a></li>
                                          <li class="awstoc closed"><a class="awstoc" href="manage-ec2-fleet.html">Managing an EC2 Fleet</a><ul class="awstoc">
                                                <li class="awstoc leaf"><a class="awstoc" href="ec2-fleet-examples.html">Example Configurations</a></li>
                                             </ul>
                                          </li>
                                       </ul>
                                    </li>
                                 </ul>
                              </li>
                              <li class="awstoc closed"><a class="awstoc" href="AccessingInstances.html">Connect</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="AccessingInstancesLinux.html">Connect Using SSH</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="putty.html">Connect Using PuTTY</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="WSL.html">Connect Using WSL</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="mindterm.html">Connect Using MindTerm</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc leaf"><a class="awstoc" href="Stop_Start.html">Stop and Start</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="ec2-instance-reboot.html">Reboot</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="instance-retirement.html">Retire</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="terminating-instances.html">Terminate</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="ec2-instance-recover.html">Recover</a></li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="Configure_Instance.html">Configure Instances</a><ul class="awstoc">
                              <li class="awstoc closed"><a class="awstoc" href="managing-software.html">Managing Software</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="install-updates.html">Updating Instance Software</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="add-repositories.html">Adding Repositories</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="find-software.html">Finding Software Packages</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="install-software.html">Installing Software Packages</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="compile-software.html">Preparing to Compile Software</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc leaf"><a class="awstoc" href="managing-users.html">Managing Users</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="processor_state_control.html">Processor State Control</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="set-time.html">Setting the Time</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="set-hostname.html">Changing the Hostname</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="dynamic-dns.html">Setting Up Dynamic DNS</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="user-data.html">Running Commands at Launch</a></li>
                              <li class="awstoc closed"><a class="awstoc" href="ec2-instance-metadata.html">Instance Metadata and User Data</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="instance-identity-documents.html">Instance Identity Documents</a></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li class="awstoc leaf"><a class="awstoc" href="identify_ec2_instances.html">Identify Instances</a></li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="monitoring_ec2.html">Monitoring</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="monitoring_automated_manual.html">Automated and Manual Monitoring</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="monitoring_best_practices.html">Best Practices for Monitoring</a></li>
                        <li class="awstoc closed"><a class="awstoc" href="monitoring-instances-status-check.html">Monitoring the Status of Your Instances</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="monitoring-system-instance-status-check.html">Instance Status Checks</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="monitoring-instances-status-check_sched.html">Scheduled Events</a></li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="using-cloudwatch.html">Monitoring Your Instances Using CloudWatch</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="using-cloudwatch-new.html">Enable Detailed Monitoring</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="viewing_metrics_with_cloudwatch.html">List Available Metrics</a></li>
                              <li class="awstoc closed"><a class="awstoc" href="monitoring_get_statistics.html">Get Statistics for Metrics</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="US_SingleMetricPerInstance.html">Get Statistics for a Specific Instance</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="GetSingleMetricAllDimensions.html">Aggregate Statistics Across Instances</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="GetMetricAutoScalingGroup.html">Aggregate Statistics by Auto Scaling Group</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="US_SingleMetricPerAMI.html">Aggregate Statistics by AMI</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc leaf"><a class="awstoc" href="graphs-in-the-aws-management-console.html">Graph Metrics</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="using-cloudwatch-createalarm.html">Create an Alarm</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="UsingAlarmActions.html">Create Alarms That Stop, Terminate, Reboot, or Recover an Instance</a></li>
                           </ul>
                        </li>
                        <li class="awstoc leaf"><a class="awstoc" href="automating_with_cloudwatch_events.html">Automating Amazon EC2 with CloudWatch Events</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="mon-scripts.html">Monitoring Memory and Disk Metrics</a></li>
                     </ul>
                  </li>
                  <li class="awstoc opened"><a class="awstoc" href="EC2_Network_and_Security.html">Network and Security</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="ec2-key-pairs.html">Key Pairs</a></li>
                        <li class="awstoc closed"><a class="awstoc" href="using-network-security.html">Security Groups</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="security-group-rules-reference.html">Security Group Rules Reference</a></li>
                           </ul>
                        </li>
                        <li class="awstoc opened"><a class="awstoc" href="UsingIAM.html">Controlling Access</a><ul class="awstoc">
                              <li class="awstoc closed"><a class="awstoc" href="iam-policies-for-amazon-ec2.html">IAM Policies</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="iam-policy-structure.html">Policy Structure</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ec2-supported-iam-actions-resources.html">Supported Resource-Level Permissions</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ExamplePolicies_EC2.html">Example Policies for CLI or SDK</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="iam-policies-ec2-console.html">Example Policies for the Console</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc leaf"><a class="awstoc selected" href="iam-roles-for-amazon-ec2.html">IAM Roles</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="authorizing-access-to-an-instance.html">Network Access</a></li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="using-instance-addressing.html">Instance IP Addressing</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="MultipleIP.html">Multiple IP Addresses</a></li>
                           </ul>
                        </li>
                        <li class="awstoc leaf"><a class="awstoc" href="elastic-ip-addresses-eip.html">Elastic IP Addresses</a></li>
                        <li class="awstoc closed"><a class="awstoc" href="using-eni.html">Network Interfaces</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="requester-managed-eni.html">Requester-Managed Network Interfaces</a></li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="enhanced-networking.html">Enhanced Networking</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="sriov-networking.html">Enhanced Networking: Intel 82599 VF</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="enhanced-networking-ena.html">Enhanced Networking: ENA</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="troubleshooting-ena.html">Troubleshooting ENA</a></li>
                           </ul>
                        </li>
                        <li class="awstoc leaf"><a class="awstoc" href="placement-groups.html">Placement Groups</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="network_mtu.html">Network MTU</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="using-vpc.html">Virtual Private Clouds</a></li>
                        <li class="awstoc closed"><a class="awstoc" href="ec2-classic-platform.html">EC2-Classic</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="vpc-classiclink.html">ClassicLink</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="vpc-migrate.html">Migrating from EC2-Classic to a VPC</a></li>
                           </ul>
                        </li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="Storage.html">Storage</a><ul class="awstoc">
                        <li class="awstoc closed"><a class="awstoc" href="AmazonEBS.html">Amazon EBS</a><ul class="awstoc">
                              <li class="awstoc closed"><a class="awstoc" href="EBSVolumes.html">EBS Volumes</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="EBSVolumeTypes.html">EBS Volume Types</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ebs-creating-volume.html">Creating a Volume</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ebs-restoring-volume.html">Restoring from a Snapshot</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ebs-attaching-volume.html">Attaching a Volume to an Instance</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ebs-using-volumes.html">Making a Volume Available for Use</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ebs-describing-volumes.html">Volume Information</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="monitoring-volume-status.html">Monitoring the Status of Your Volumes</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ebs-detaching-volume.html">Detaching a Volume from an Instance</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ebs-deleting-volume.html">Deleting a Volume</a></li>
                                    <li class="awstoc closed"><a class="awstoc" href="ebs-modify-volume.html">Modifying a Volume</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="volume_constraints.html">Volume Size Constraints</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="console-modify.html">Using the Console</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="cli-modify.html">Using the CLI</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="monitoring_mods.html">Monitoring Progress</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="expand-linux-partition.html">Expanding a Linux Partition</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="recognize-expanded-volume-linux.html">Extending Linux File Systems</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="limitations.html">Limitations</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="stop-start.html">Appendix: Manual Stop/Start Modification</a></li>
                                       </ul>
                                    </li>
                                 </ul>
                              </li>
                              <li class="awstoc closed"><a class="awstoc" href="EBSSnapshots.html">EBS Snapshots</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="ebs-creating-snapshot.html">Creating a Snapshot</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ebs-deleting-snapshot.html">Deleting a Snapshot</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ebs-copy-snapshot.html">Copying a Snapshot</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ebs-describing-snapshots.html">Viewing Snapshot Information</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ebs-modifying-snapshot-permissions.html">Sharing a Snapshot</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="snapshot-lifecycle.html">Automating Snapshots</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc leaf"><a class="awstoc" href="EBSOptimized.html">EBS Optimization</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="EBSEncryption.html">EBS Encryption</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="nvme-ebs-volumes.html">EBS Volumes and NVMe</a></li>
                              <li class="awstoc closed"><a class="awstoc" href="EBSPerformance.html">EBS Performance</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="ebs-ec2-config.html">EC2 Configuration</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ebs-io-characteristics.html">I/O Characteristics and Monitoring</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ebs-initialize.html">Initialize Volumes</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="raid-config.html">RAID Configuration</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="benchmark_procedures.html">Benchmark EBS Volumes</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc leaf"><a class="awstoc" href="ebs-cloud-watch-events.html">EBS CloudWatch Events</a></li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="InstanceStorage.html">Instance Store</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="add-instance-store-volumes.html">Add Instance Store Volumes</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="ssd-instance-store.html">SSD Instance Store Volumes</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="instance-store-swap-volumes.html">Instance Store Swap Volumes</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="disk-performance.html">Optimizing Disk Performance</a></li>
                           </ul>
                        </li>
                        <li class="awstoc leaf"><a class="awstoc" href="AmazonEFS.html">Amazon EFS</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="AmazonS3.html">Amazon S3</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="volume_limits.html">Instance Volume Limits</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="device_naming.html">Device Naming</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="block-device-mapping-concepts.html">Block Device Mapping</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="using-public-data-sets.html">Using Public Data Sets</a></li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="EC2_Resources.html">Resources and Tags</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="resources.html">Resource Locations</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="resource-ids.html">Resource IDs</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="Using_Filtering.html">Listing and Filtering Your Resources</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="Using_Tags.html">Tagging Your Resources</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="ec2-resource-limits.html">Service Limits</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="usage-reports.html">Usage Reports</a></li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="Linux-Server-EC2Rescue.html">EC2Rescue for Linux</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="ec2rl_install.html">Installing EC2Rescue for Linux</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="ec2rl_verify.html">(Optional) Verify the Signature of EC2Rescue for Linux</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="ec2rl_working.html">Working with EC2Rescue for Linux</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="ec2rl_moduledev.html">Developing EC2Rescue Modules</a></li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="ec2-instance-troubleshoot.html">Troubleshooting</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="troubleshooting-launch.html">Troubleshooting Launch Issues</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="TroubleshootingInstancesConnecting.html">Connecting to Your Instance</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="TroubleshootingInstancesStopping.html">Stopping Your Instance</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="TroubleshootingInstancesShuttingDown.html">Terminating Your Instance</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="TroubleshootingInstanceRecovery.html">Instance Recovery Failures</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="TroubleshootingInstances.html">Failed Status Checks</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="instance-console.html">Getting Console Output and Rebooting Instances</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="instance-booting-from-wrong-volume.html">Booting from the Wrong Volume</a></li>
                     </ul>
                  </li>
                  <li class="awstoc leaf"><a class="awstoc" href="DocumentHistory.html">Document History</a></li>
                  <li class="awstoc leaf"><a class="awstoc" href="glossary.html">AWS Glossary</a></li>
                  <li id="toc-additional-links"><a class="btn btn-pdf-link" id="pdf-link-alt" href="ec2-ug.pdf#top" target="_blank" title="Open PDF"></a><a class="btn btn-kindle-link" id="kindle-link-alt" target="_blank" href="http://www.amazon.com/dp/B076452RSZ" title="Open Kindle"></a><a class="btn btn-rss-link" id="rss-link-alt" target="_blank" href="amazon-ec2-release-notes.rss" title="View RSS Feed"></a></li>
               </ul>
            </div>
         </div>
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tr>
                           <td>
                              <div class="breadcrumb"><a href="/index.html">AWS Documentation</a> » <a href="/ec2/index.html">Amazon EC2</a> » <a href="index.html">User Guide for Linux Instances</a> » <a href="EC2_Network_and_Security.html">Network and Security</a> » <a href="UsingIAM.html">Controlling Access to Amazon EC2 Resources</a> » <span class="breadcrumb">IAM Roles for Amazon EC2</span></div>
                           </td>
                        </tr>
                     </table>
                     <div></div>
                     <h1 class="topictitle" id="iam-roles-for-amazon-ec2">IAM Roles for Amazon EC2</h1>
                     <p>Applications must sign their API requests with AWS credentials. Therefore, if you
                        are
                        			an application developer, you need a strategy for managing credentials for your
                        			applications that run on EC2 instances. For example, you can securely distribute
                        your
                        			AWS credentials to the instances, enabling the applications on those instances
                        to use
                        			your credentials to sign requests, while protecting your credentials from other
                        users.
                        			However, it's challenging to securely distribute credentials to each instance,
                        			especially those that AWS creates on your behalf, such as Spot Instances or instances
                        in
                        			Auto Scaling groups. You must also be able to update the credentials on each instance
                        when you
                        			rotate your AWS credentials.
                     </p>
                     <p>We designed IAM roles so that your applications can securely make API requests from
                        			your instances, without requiring you to manage the security credentials that the
                        			applications use. Instead of creating and distributing your AWS credentials, you
                        can
                        			delegate permission to make API requests using IAM roles as follows:
                     </p>
                     <div class="orderedlist">
                        			
                        			
                        			
                        			
                        			
                        		
                        <ol>
                           <li>
                              				
                              <p>Create an IAM role.</p>
                              			
                           </li>
                           <li>
                              				
                              <p>Define which accounts or AWS services can assume the role.</p>
                              			
                           </li>
                           <li>
                              				
                              <p>Define which API actions and resources the application can use after assuming
                                 					the role.
                              </p>
                              			
                           </li>
                           <li>
                              				
                              <p>Specify the role when you launch your instance, or attach the role to a
                                 					running or stopped instance.
                              </p>
                              			
                           </li>
                           <li>
                              				
                              <p>Have the application retrieve a set of temporary credentials and use
                                 					them.
                              </p>
                              			
                           </li>
                        </ol>
                     </div>
                     <p>For example, you can use IAM roles to grant permissions to applications running on
                        your
                        			instances that need to use a bucket in Amazon S3. You can specify permissions for
                        IAM roles
                        			by creating a policy in JSON format. These are similar to the policies that you
                        create
                        			for IAM users. If you change a role, the change is propagated to all instances.
                     </p>
                     <p>You cannot attach multiple IAM roles to a single instance, but you can attach a
                        			single IAM role to multiple instances. For more information about creating and
                        using
                        			IAM roles, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/WorkingWithRoles.html" target="_blank">Roles</a> in the
                        				<em>IAM User Guide</em>.
                     </p>
                     <p>You can apply resource-level permissions to your IAM policies to control the users'
                        			ability to attach, replace, or detach IAM roles for an instance. For more information,
                        			see <a href="ec2-supported-iam-actions-resources.html">Supported Resource-Level Permissions for Amazon EC2 API Actions</a> and the following example:
                        				<a href="ExamplePolicies_EC2.html#iam-example-iam-roles">9: Working with IAM Roles</a>.
                     </p>
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Topics</strong></p>
                        <ul>
                           <li><a href="#ec2-instance-profile">Instance Profiles</a></li>
                           <li><a href="#instance-metadata-security-credentials">Retrieving Security Credentials from Instance Metadata</a></li>
                           <li><a href="#permission-to-pass-iam-roles">Granting an IAM User Permission to Pass
                                 				an IAM Role to an Instance</a></li>
                           <li><a href="#working-with-iam-roles">Working with IAM Roles</a></li>
                        </ul>
                     </div>
                     			
                     <h2 id="ec2-instance-profile">Instance Profiles</h2>
                     			
                     			
                     <p>Amazon EC2 uses an <em>instance profile</em> as a container for an IAM role. When
                        				you create an IAM role using the IAM console, the console creates an instance
                        				profile automatically and gives it the same name as the role to which it
                        				corresponds. If you use the Amazon EC2 console to launch an instance with an IAM
                        role
                        				or to attach an IAM role to an instance, you choose the role based on a list of
                        				instance profile names. 
                     </p>
                     			
                     <p>If you use the AWS CLI, API, or an AWS SDK to create a role, you create the role and
                        				instance profile as separate actions, with potentially different names. If you
                        then
                        				use the AWS CLI, API, or an AWS SDK to launch an instance with an IAM role or
                        to
                        				attach an IAM role to an instance, specify the instance profile name. 
                     </p>
                     			
                     <p>An instance profile can contain only one IAM role. This limit cannot be
                        				increased.
                     </p>
                     			
                     <p>For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/instance-profiles.html" target="_blank">Instance Profiles</a> in the <em>IAM User Guide</em>.
                     </p>
                     		
                     			
                     <h2 id="instance-metadata-security-credentials">Retrieving Security Credentials from Instance Metadata</h2>
                     			
                     			
                     <p>An application on the instance retrieves the security credentials provided by the
                        role from
                        				the instance metadata item
                        					<code class="code">iam/security-credentials/</code><em>role-name</em>. The
                        				application is granted the permissions for the actions and resources that you've
                        				defined for the role through the security credentials associated with the role.
                        				These security credentials are temporary and we rotate them automatically. We
                        make
                        				new credentials available at least five minutes before the expiration of the old
                        				credentials.
                     </p>
                     			
                     <div class="aws-note">
                        <p class="aws-note">Warning</p>
                        <p>If you use services that use instance metadata with IAM roles, ensure that
                           					you don't expose your credentials when the services make HTTP calls on your
                           					behalf. The types of services that could expose your credentials include HTTP
                           					proxies, HTML/CSS validator services, and XML processors that support XML
                           					inclusion.
                        </p>
                     </div>
                     			
                     <p>The following command retrieves the security credentials for an IAM role named
                        					<code class="code">s3access</code>.
                     </p>
                     			<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>curl http://169.254.169.254/latest/meta-data/iam/security-credentials/s3access</code></strong></code></pre>
                     			<p>The following is example output.</p>
                     			<pre class="programlisting"><div class="code-btn-container"><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  "Code" : "Success",
  "LastUpdated" : "2012-04-26T16:39:16Z",
  "Type" : "AWS-HMAC",
  "AccessKeyId" : "ASIAIOSFODNN7EXAMPLE",
  "SecretAccessKey" : "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",
  "Token" : "<em>token</em>",
  "Expiration" : "2017-05-17T15:09:54Z"
}</code></pre>
                     			<p>For applications, AWS CLI, and Tools for Windows PowerShell commands that run on the
                        instance, you do not
                        				have to explicitly get the temporary security credentials — the AWS SDKs,
                        				AWS CLI, and Tools for Windows PowerShell automatically get the credentials from
                        the EC2 instance metadata
                        				service and use them. To make a call outside of the instance using temporary
                        				security credentials (for example, to test IAM policies), you must provide the
                        				access key, secret key, and the session token. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_use-resources.html" target="_blank">Using Temporary
                           					Security Credentials to Request Access to AWS Resources</a> in the
                        					<em>IAM User Guide</em>.
                     </p>
                     			
                     <p>For more information about instance metadata, see <a href="ec2-instance-metadata.html">Instance Metadata and User Data</a>. 
                     </p>
                     		
                     			
                     <h2 id="permission-to-pass-iam-roles">Granting an IAM User Permission to Pass
                        				an IAM Role to an Instance
                     </h2>
                     			
                     			
                     <p>To enable an IAM user to launch an instance with an IAM role or to attach or
                        				replace an IAM role for an existing instance, you must grant the user permission
                        				to pass the role to the instance.
                     </p>
                     			
                     <p>The following IAM policy grants users permission to launch instances
                        					(<code class="code">ec2:RunInstances</code>) with an IAM role, or to attach or replace an
                        				IAM role for an existing instance (<code class="code">ec2:AssociateIamInstanceProfile</code>
                        				and <code class="code">ec2:ReplaceIamInstanceProfileAssociation</code>).
                     </p>
                     			<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
         "ec2:RunInstances",
         "ec2:AssociateIamInstanceProfile",
         "ec2:ReplaceIamInstanceProfileAssociation"
      ],
      "Resource": "*"
    },
    {
      "Effect": "Allow",
      "Action": "iam:PassRole",
      "Resource": "*"
    }
  ]
}</code></pre>
                     			<p>This policy grants IAM users access to all your roles by specifying the resource as
                        "*"
                        				in the policy. However, consider whether users who launch instances with your
                        roles
                        				(ones that exist or that you create later on) might be granted permissions that
                        they
                        				don't need or shouldn't have.
                     </p>
                     		
                     			
                     <h2 id="working-with-iam-roles">Working with IAM Roles</h2>
                     			
                     			
                     <p>You can create an IAM role and attach it to an instance during or after launch.
                        				You can also replace or detach an IAM role for an instance.
                     </p>
                     			
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Contents</strong></p>
                        <ul>
                           <li><a href="#create-iam-role">Creating an IAM Role</a></li>
                           <li><a href="#launch-instance-with-role">Launching an Instance with an IAM Role</a></li>
                           <li><a href="#attach-iam-role">Attaching an IAM Role to an Instance</a></li>
                           <li><a href="#detach-iam-role">Detaching an IAM Role</a></li>
                           <li><a href="#replace-iam-role">Replacing an IAM Role</a></li>
                        </ul>
                     </div>
                     			
                     				
                     <h3 id="create-iam-role">Creating an IAM Role</h3>
                     				
                     				
                     <p>You must create an IAM role before you can launch an instance with that role
                        					or attach it to an instance.
                     </p>
                     				<a id="create-iam-role-console"></a><p class="title"><b>To create an IAM role using the
                           						IAM console</b></p>
                     <ol>
                        <li>
                           <p>Open the IAM console at
                              <a href="https://console.aws.amazon.com/iam/" target="_blank">https://console.aws.amazon.com/iam/</a>.
                           </p>
                        </li>
                        <li>
                           						
                           <p>In the navigation pane, choose <b>Roles</b>, <b>Create
                                 role</b>.
                           </p>
                           					
                        </li>
                        <li>
                           						
                           <p>On the <b>Select role type</b> page, choose <b>EC2</b> and
                              the <b>EC2</b> use case. Choose <b>Next:
                                 Permissions</b>.
                           </p>
                           					
                        </li>
                        <li>
                           						
                           <p>On the <b>Attach permissions policy</b> page, select an AWS managed
                              policy that grants your instances access to the resources that they
                              need.
                           </p>
                           					
                        </li>
                        <li>
                           						
                           <p>On the <b>Review</b> page, type a name for the role and choose
                              <b>Create role</b>.
                           </p>
                           					
                        </li>
                     </ol>
                     
                     				
                     <p>Alternatively, you can use the AWS CLI to create an IAM role.</p>
                     				<a id="create-iam-role-cli"></a><p class="title"><b>To create an IAM role and instance
                           						profile using the AWS CLI</b></p>
                     <ul>
                        <li>
                           						
                           <p>Create an IAM role with a policy that allows the role to use an Amazon S3
                              							bucket.
                           </p>
                           						
                           <ol>
                              <li>
                                 								
                                 <p>Create the following trust policy and save it in a text file
                                    									named <code>ec2-role-trust-policy.json</code>.
                                 </p>
                                 								<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Principal": { "Service": "ec2.amazonaws.com"},
      "Action": "sts:AssumeRole"
    }
  ]
}</code></pre>
                                 							</li>
                              <li>
                                 								
                                 <p>Create the <code class="code">s3access</code> role and specify the trust
                                    									policy that you created.
                                 </p>
                                 								<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code><b>aws iam create-role</b> --role-name s3access --assume-role-policy-document file://ec2-role-trust-policy.json</code></strong>
<code class="computeroutput" copy="false">{
    "Role": {
        "AssumeRolePolicyDocument": {
            "Version": "2012-10-17",
            "Statement": [
                {
                    "Action": "sts:AssumeRole",
                    "Effect": "Allow",
                    "Principal": {
                        "Service": "ec2.amazonaws.com"
                    }
                }
            ]
        },
        "RoleId": "AROAIIZKPBKS2LEXAMPLE",
        "CreateDate": "2013-12-12T23:46:37.247Z",
        "RoleName": "s3access",
        "Path": "/",
        "Arn": "arn:aws:iam::123456789012:role/s3access"
    }
}</code></code></pre>
                                 							</li>
                              <li>
                                 								
                                 <p>Create an access policy and save it in a text file named
                                    										<code>ec2-role-access-policy.json</code>. For
                                    									example, this policy grants administrative permissions for Amazon S3
                                    									to applications running on the instance.
                                 </p>
                                 								<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": ["s3:*"],
      "Resource": ["*"]
    }
  ]
}</code></pre>
                                 							</li>
                              <li>
                                 								
                                 <p>Attach the access policy to the role.</p>
                                 								<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code><b>aws iam put-role-policy</b> --role-name s3access --policy-name S3-Permissions --policy-document file://ec2-role-access-policy.json</code></strong></code></pre>
                                 							</li>
                              <li>
                                 								
                                 <p>Create an instance profile named
                                    									<code class="code">s3access-profile</code>.
                                 </p>
                                 								<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code><b>aws iam create-instance-profile</b> --instance-profile-name s3access-profile</code></strong><code class="computeroutput" copy="false">
{
    "InstanceProfile": {
        "InstanceProfileId": "AIPAJTLBPJLEGREXAMPLE",
        "Roles": [],
        "CreateDate": "2013-12-12T23:53:34.093Z",
        "InstanceProfileName": "s3access-profile",
        "Path": "/",
        "Arn": "arn:aws:iam::123456789012:instance-profile/s3access-profile"
    }
}</code></code></pre>
                                 							</li>
                              <li>
                                 								
                                 <p>Add the <code class="code">s3access</code> role to the
                                    										<code class="code">s3access-profile</code> instance profile.
                                 </p>
                                 								<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code><b>aws iam add-role-to-instance-profile</b> --instance-profile-name s3access-profile --role-name s3access</code></strong></code></pre>
                                 							</li>
                           </ol>
                           						
                           <p>For more information about these commands, see <a href="https://docs.aws.amazon.com/cli/latest/reference/iam/create-role.html" target="_blank">create-role</a>, <a href="https://docs.aws.amazon.com/cli/latest/reference/iam/put-role-policy.html" target="_blank">put-role-policy</a>,
                              							and <a href="https://docs.aws.amazon.com/cli/latest/reference/iam/create-instance-profile.html" target="_blank">create-instance-profile</a> in the
                              								<em>AWS CLI Command Reference</em>. 
                           </p>
                           						
                           <p>Alternatively, you can use the following AWS Tools for Windows PowerShell commands:</p>
                           						
                           <div class="itemizedlist">
                              							
                              							
                              							
                              						
                              <ul class="itemizedlist" type="disc">
                                 <li class="listitem">
                                    								
                                    <p><a href="https://docs.aws.amazon.com/powershell/latest/reference/items/New-IAMRole.html" target="_blank">New-IAMRole</a></p>
                                    							
                                 </li>
                                 <li class="listitem">
                                    								
                                    <p><a href="https://docs.aws.amazon.com/powershell/latest/reference/items/Register-IAMRolePolicy.html" target="_blank">Register-IAMRolePolicy</a></p>
                                    							
                                 </li>
                                 <li class="listitem">
                                    								
                                    <p><a href="https://docs.aws.amazon.com/powershell/latest/reference/items/New-IAMInstanceProfile.html" target="_blank">New-IAMInstanceProfile</a></p>
                                    							
                                 </li>
                              </ul>
                           </div>
                           					
                        </li>
                     </ul>
                     			
                     			
                     				
                     <h3 id="launch-instance-with-role">Launching an Instance with an IAM Role</h3>
                     				
                     				
                     <p>After you've created an IAM role, you can launch an instance, and associate
                        					that role with the instance during launch.
                     </p>
                     				
                     <div class="aws-note">
                        <p class="aws-note">Important</p>
                        <p>After you create an IAM role, it may take several seconds for the
                           						permissions to propagate. If your first attempt to launch an instance with a
                           						role fails, wait a few seconds before trying again. For more information,
                           						see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/RolesTroubleshooting.html" target="_blank">Troubleshooting
                              							Working with Roles</a> in the
                           						<em>IAM User Guide</em>.
                        </p>
                     </div>
                     				<a id="launch-instance-with-role-console"></a><p class="title"><b>To launch an instance with
                           						an IAM role using the console</b></p>
                     <ol>
                        <li>
                           <p>Open the Amazon EC2 console at
                              <a href="https://console.aws.amazon.com/ec2/" target="_blank">https://console.aws.amazon.com/ec2/</a>.
                           </p>
                        </li>
                        <li>
                           						
                           <p>On the dashboard, choose <b>Launch Instance</b>.
                           </p>
                           					
                        </li>
                        <li>
                           						
                           <p>Select an AMI and instance type and then choose <b>Next:
                                 								Configure Instance Details</b>.
                           </p>
                           					
                        </li>
                        <li>
                           						
                           <p>On the <b>Configure Instance Details</b> page, for
                              								<b>IAM role</b>, select the IAM role that you
                              							created. 
                           </p>
                           						
                           <div class="aws-note">
                              <p class="aws-note">Note</p>
                              <p>The <b>IAM role</b> list displays the name of the
                                 								instance profile that you created when you created your IAM role.
                                 								If you created your IAM role using the console, the instance
                                 								profile was created for you and given the same name as the role. If
                                 								you created your IAM role using the AWS CLI, API, or an AWS SDK,
                                 								you may have named your instance profile differently. 
                              </p>
                           </div>
                           					
                        </li>
                        <li>
                           						
                           <p>Configure any other details, then follow the instructions through the
                              							rest of the wizard, or choose <b>Review and Launch</b> to
                              							accept default settings and go directly to the <b>Review Instance
                                 								Launch</b> page.
                           </p>
                           					
                        </li>
                        <li>
                           						
                           <p>Review your settings, then choose <b>Launch</b> to
                              							choose a key pair and launch your instance.
                           </p>
                           					
                        </li>
                        <li>
                           						
                           <p>If you are using the Amazon EC2 API actions in your application, retrieve the AWS
                              security
                              							credentials made available on the instance and use them to sign the
                              							requests. The AWS SDK does this for you.
                           </p>
                           						<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>curl http://169.254.169.254/latest/meta-data/iam/security-credentials/<em class="replaceable"><code>role_name</code></em></code></strong></code></pre>
                           					</li>
                     </ol>
                     				
                     <p>Alternatively, you can use the AWS CLI to associate a role with an instance
                        					during launch. You must specify the instance profile in the command.
                     </p>
                     				<a id="launch-instance-with-role-cli"></a><p class="title"><b>To launch an instance with an
                           						IAM role using the AWS CLI</b></p>
                     <ol>
                        <li>
                           						
                           <p>Use the <a href="https://docs.aws.amazon.com/cli/latest/reference/ec2/run-instances.html" target="_blank">run-instances</a> command to launch an instance using the
                              							instance profile. The following example shows how to launch an instance
                              							with the instance profile. 
                           </p>
                           						<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code><b>aws ec2 run-instances</b> --image-id ami-11aa22bb --iam-instance-profile Name="s3access-profile" --key-name my-key-pair --security-groups my-security-group --subnet-id subnet-1a2b3c4d</code></strong></code></pre>
                           						<p>Alternatively, use the <a href="https://docs.aws.amazon.com/powershell/latest/reference/items/New-EC2Instance.html" target="_blank">New-EC2Instance</a> Tools for Windows PowerShell command.
                           </p>
                           					
                        </li>
                        <li>
                           						
                           <p>If you are using the Amazon EC2 API actions in your application, retrieve the AWS
                              security
                              							credentials made available on the instance and use them to sign the
                              							requests. The AWS SDK does this for you.
                           </p>
                           						<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>curl http://169.254.169.254/latest/meta-data/iam/security-credentials/</code></strong><em class="replaceable"><code>role_name</code></em></code></pre>
                           					</li>
                     </ol>
                     			
                     			
                     				
                     <h3 id="attach-iam-role">Attaching an IAM Role to an Instance</h3>
                     				
                     				
                     <p>After you've created an IAM role, you can attach it to a running or stopped
                        					instance.
                     </p>
                     				<a id="attach-iam-role-console"></a><p class="title"><b>To attach an IAM role to an instance
                           						using the console</b></p>
                     <ol>
                        <li>
                           <p>Open the Amazon EC2 console at
                              <a href="https://console.aws.amazon.com/ec2/" target="_blank">https://console.aws.amazon.com/ec2/</a>.
                           </p>
                        </li>
                        <li>
                           						
                           <p>In the navigation pane, choose <b>Instances</b>.
                           </p>
                           					
                        </li>
                        <li>
                           						
                           <p>Select the instance, choose <b>Actions</b>,
                              								<b>Instance Settings</b>, <b>Attach/Replace IAM
                                 								role</b>.
                           </p>
                           					
                        </li>
                        <li>
                           						
                           <p>Select the IAM role to attach to your instance, and choose
                              								<b>Apply</b>.
                           </p>
                           					
                        </li>
                     </ol>
                     				<a id="attach-iam-role-instance-cli"></a><p class="title"><b>To attach an IAM role to an
                           						instance using the AWS CLI</b></p>
                     <ol>
                        <li>
                           						
                           <p>If required, describe your instances to get the ID of the instance to
                              							which to attach the role.
                           </p>
                           						<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code><b>aws ec2 describe-instances</b></code></strong></code></pre>
                           					</li>
                        <li>
                           						
                           <p>Use the <a href="https://docs.aws.amazon.com/cli/latest/reference/ec2/associate-iam-instance-profile.html" target="_blank">associate-iam-instance-profile</a> command to attach the IAM
                              							role to the instance by specifying the instance profile. You can use the
                              							Amazon Resource Name (ARN) of the instance profile, or you can use its
                              							name.
                           </p>
                           						<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code><b>aws ec2 associate-iam-instance-profile --instance-id <em class="replaceable"><code>i-1234567890abcdef0</code></em> --iam-instance-profile Name="<em class="replaceable"><code>TestRole-1</code></em></b>"</code></strong><code class="computeroutput" copy="false">

{
    "IamInstanceProfileAssociation": {
        "InstanceId": "i-1234567890abcdef0", 
        "State": "associating", 
        "AssociationId": "iip-assoc-0dbd8529a48294120", 
        "IamInstanceProfile": {
            "Id": "AIPAJLNLDX3AMYZNWYYAY", 
            "Arn": "arn:aws:iam::123456789012:instance-profile/TestRole-1"
        }
    }
}</code></code></pre>
                           					</li>
                     </ol>
                     				
                     <p>Alternatively, use the following Tools for Windows PowerShell commands:</p>
                     				
                     <div class="itemizedlist">
                        					
                        					
                        				
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              						
                              <p><a href="https://docs.aws.amazon.com/powershell/latest/reference/items/Get-EC2Instance.html" target="_blank">Get-EC2Instance</a></p>
                              					
                           </li>
                           <li class="listitem">
                              						
                              <p><a href="https://docs.aws.amazon.com/powershell/latest/reference/items/Register-EC2IamInstanceProfile.html" target="_blank">Register-EC2IamInstanceProfile</a></p>
                              					
                           </li>
                        </ul>
                     </div>
                     			
                     			
                     				
                     <h3 id="detach-iam-role">Detaching an IAM Role</h3>
                     				
                     				
                     <p>You can detach an IAM role from a running or stopped instance. </p>
                     				<a id="detach-iam-role-console"></a><p class="title"><b>To detach an IAM role from an
                           						instance using the console</b></p>
                     <ol>
                        <li>
                           <p>Open the Amazon EC2 console at
                              <a href="https://console.aws.amazon.com/ec2/" target="_blank">https://console.aws.amazon.com/ec2/</a>.
                           </p>
                        </li>
                        <li>
                           						
                           <p>In the navigation pane, choose <b>Instances</b>.
                           </p>
                           					
                        </li>
                        <li>
                           						
                           <p>Select the instance, choose <b>Actions</b>,
                              								<b>Instance Settings</b>, <b>Attach/Replace IAM
                                 								role</b>.
                           </p>
                           					
                        </li>
                        <li>
                           						
                           <p>For <b>IAM role</b>, choose <b>No
                                 							Role</b>. Choose <b>Apply</b>.
                           </p>
                           					
                        </li>
                        <li>
                           						
                           <p>In the confirmation dialog box, choose <b>Yes,
                                 								Detach</b>.
                           </p>
                           					
                        </li>
                     </ol>
                     				<a id="detach-iam-role-cli"></a><p class="title"><b>To detach an IAM role from an instance
                           						using the AWS CLI</b></p>
                     <ol>
                        <li>
                           						
                           <p>If required, use <a href="https://docs.aws.amazon.com/cli/latest/reference/ec2/describe-iam-instance-profile-associations.html" target="_blank">describe-iam-instance-profile-associations</a> to describe your
                              							IAM instance profile associations and get the association ID for the
                              							IAM instance profile to detach.
                           </p>
                           						<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code><b>aws ec2 describe-iam-instance-profile-associations</b></code></strong><code class="computeroutput" copy="false">

{
    "IamInstanceProfileAssociations": [
        {
            "InstanceId": "i-088ce778fbfeb4361", 
            "State": "associated", 
            "AssociationId": "iip-assoc-0044d817db6c0a4ba", 
            "IamInstanceProfile": {
                "Id": "AIPAJEDNCAA64SSD265D6", 
                "Arn": "arn:aws:iam::123456789012:instance-profile/TestRole-2"
            }
        }
    ]
}</code></code></pre>
                           					</li>
                        <li>
                           						
                           <p>Use the <a href="https://docs.aws.amazon.com/cli/latest/reference/ec2/disassociate-iam-instance-profile.html" target="_blank">disassociate-iam-instance-profile</a> command to detach the
                              							IAM instance profile using its association ID.
                           </p>
                           						<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code><b>aws ec2 disassociate-iam-instance-profile --association-id <em class="replaceable"><code>iip-assoc-0044d817db6c0a4ba</code></em></b></code></strong><code class="computeroutput" copy="false">

{
    "IamInstanceProfileAssociation": {
        "InstanceId": "i-087711ddaf98f9489", 
        "State": "disassociating", 
        "AssociationId": "iip-assoc-0044d817db6c0a4ba", 
        "IamInstanceProfile": {
            "Id": "AIPAJEDNCAA64SSD265D6", 
            "Arn": "arn:aws:iam::123456789012:instance-profile/TestRole-2"
        }
    }
}</code></code></pre>
                           					</li>
                     </ol>
                     				
                     <p>Alternatively, use the following Tools for Windows PowerShell commands:</p>
                     				
                     <div class="itemizedlist">
                        					
                        					
                        				
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              						
                              <p><a href="https://docs.aws.amazon.com/powershell/latest/reference/items/Get-EC2IamInstanceProfileAssociation.html" target="_blank">Get-EC2IamInstanceProfileAssociation</a></p>
                              					
                           </li>
                           <li class="listitem">
                              						
                              <p><a href="https://docs.aws.amazon.com/powershell/latest/reference/items/Unregister-EC2IamInstanceProfile.html" target="_blank">Unregister-EC2IamInstanceProfile</a></p>
                              					
                           </li>
                        </ul>
                     </div>
                     			
                     			
                     				
                     <h3 id="replace-iam-role">Replacing an IAM Role</h3>
                     				
                     				
                     <p>You can replace an IAM role for a running instance. You can do this if you
                        					want to change the IAM role for an instance without detaching the existing one
                        					first; for example, to ensure that API actions performed by applications running
                        					on the instance are not interrupted.
                     </p>
                     				<a id="replace-iam-role-console"></a><p class="title"><b>To replace an IAM role for an instance using the
                           console</b></p>
                     <ol>
                        <li>
                           <p>Open the Amazon EC2 console at
                              <a href="https://console.aws.amazon.com/ec2/" target="_blank">https://console.aws.amazon.com/ec2/</a>.
                           </p>
                        </li>
                        <li>
                           						
                           <p>In the navigation pane, choose <b>Instances</b>.
                           </p>
                           					
                        </li>
                        <li>
                           						
                           <p>Select the instance, choose <b>Actions</b>,
                              								<b>Instance Settings</b>, <b>Attach/Replace IAM
                                 								role</b>.
                           </p>
                           					
                        </li>
                        <li>
                           						
                           <p>Select the IAM role to attach to your instance, and choose
                              								<b>Apply</b>.
                           </p>
                           					
                        </li>
                     </ol>
                     				<a id="replace-iam-role-cli"></a><p class="title"><b>To replace an IAM role for an instance
                           						using the AWS CLI</b></p>
                     <ol>
                        <li>
                           						
                           <p>If required, describe your IAM instance profile associations to get
                              							the association ID for the IAM instance profile to replace.
                           </p>
                           						<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code><b>aws ec2 describe-iam-instance-profile-associations</b></code></strong></code></pre>
                           					</li>
                        <li>
                           						
                           <p>Use the <a href="https://docs.aws.amazon.com/cli/latest/reference/ec2/replace-iam-instance-profile-association.html" target="_blank">replace-iam-instance-profile-association</a> command to replace
                              							the IAM instance profile by specifying the association ID for the
                              							existing instance profile and the ARN or name of the instance profile
                              							that should replace it.
                           </p>
                           						<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code><b>aws ec2 replace-iam-instance-profile-association --association-id <em class="replaceable"><code>iip-assoc-0044d817db6c0a4ba</code></em> --iam-instance-profile Name="<em class="replaceable"><code>TestRole-2</code></em></b>"</code></strong><code class="computeroutput" copy="false">

{
    "IamInstanceProfileAssociation": {
        "InstanceId": "i-087711ddaf98f9489", 
        "State": "associating", 
        "AssociationId": "iip-assoc-09654be48e33b91e0", 
        "IamInstanceProfile": {
            "Id": "AIPAJCJEDKX7QYHWYK7GS", 
            "Arn": "arn:aws:iam::123456789012:instance-profile/TestRole-2"
        }
    }
}</code></code></pre>
                           					</li>
                     </ol>
                     				
                     <p>Alternatively, use the following Tools for Windows PowerShell commands:</p>
                     				
                     <div class="itemizedlist">
                        					
                        					
                        				
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              						
                              <p><a href="https://docs.aws.amazon.com/powershell/latest/reference/items/Get-EC2IamInstanceProfileAssociation.html" target="_blank">Get-EC2IamInstanceProfileAssociation</a></p>
                              					
                           </li>
                           <li class="listitem">
                              						
                              <p><a href="https://docs.aws.amazon.com/powershell/latest/reference/items/Set-EC2IamInstanceProfileAssociation.html" target="_blank">Set-EC2IamInstanceProfileAssociation</a></p>
                              					
                           </li>
                        </ul>
                     </div>
                     			
                     		
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="iam-policies-ec2-console.html">« Previous </a><a class="awstoc" accesskey="n" href="authorizing-access-to-an-instance.html">Next »</a></div>
                     <div id="copyright-main-footer">© 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Instance Profiles"><a class="pagetoc" href="#ec2-instance-profile">Instance Profiles</a></li>
                        <li class="pagetoc" name="Retrieving Security Credentials from Instance Metadata"><a class="pagetoc" href="#instance-metadata-security-credentials">Retrieving Security Credentials from Instance Metadata</a></li>
                        <li class="pagetoc" name="Granting an IAM User Permission to Pass&#xA;&#x9;&#x9;&#x9;&#x9;an IAM Role to an Instance"><a class="pagetoc" href="#permission-to-pass-iam-roles">Granting an IAM User Permission to Pass
                              				an IAM Role to an Instance</a></li>
                        <li class="pagetoc" name="Working with IAM Roles"><a class="pagetoc" href="#working-with-iam-roles">Working with IAM Roles</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <div id="cookie-notice">
         <div class="cookie-notice-text">We use cookies to provide and improve our services. By using our site, you consent
            to cookies. <a href="http://aws.amazon.com/legal/cookies">Learn more</a></div>
      </div>
      <div id="footer">
         <div id="footer_short_fb" class="hide" title="Feedback"><a target="_blank" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=EC2&amp;topic_url=http://docs.aws.amazon.com/en_us/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html&amp;hidden_guide_name=User Guide for Linux Instances&amp;hidden_api_version=&amp;hidden_file_name=iam-roles-for-amazon-ec2"><i class="awsdocs-footer-text fa fa-envelope-o"></i></a></div>
         <div id="footer_toggle" class="mediaobject">
            <div id="footer_toggle_img" class="awsdocs-footer-text fa fa-caret-down"></div>
            <div id="footer_toggle_img_collapse" class="hide awsdocs-footer-text fa fa-caret-right"></div>
         </div>
         <div id="footer-left"><a class="awsdocs-footer-text" target="_top" href="http://aws.amazon.com/terms">Terms of Use</a><span class="awsdocs-footer-text"> | </span><a class="awsdocs-footer-text" target="_top" href="http://aws.amazon.com/privacy">Privacy</a><span class="awsdocs-footer-text"> | </span><span class="awsdocs-footer-text">© 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</span></div>
         <div id="footer-right">
            <div id="feedback">
               <div id="forums"><a id="forum_link" target="_blank" href="http://forums.aws.amazon.com/forum.jspa?forumID=30" class="awsdocs-footer-text">Have a question? Try the Forums.</a></div>
               <div id="feedback-message" class="awsdocs-footer-text">Did this page help you?</div>
               <div id="feedback-yesno-buttons"><a class="awstoc btn btn-default" target="_blank" href="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html">Yes</a><a class="awstoc btn btn-default" target="_blank" href="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html">No</a></div>
               <div id="feedback-feedback-button"><a class="awstoc btn btn-default" target="_blank" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=EC2&amp;topic_url=http://docs.aws.amazon.com/en_us/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html&amp;hidden_guide_name=User Guide for Linux Instances&amp;hidden_api_version=&amp;hidden_file_name=iam-roles-for-amazon-ec2">Feedback</a></div>
            </div>
         </div>
      </div>
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='Amazon Elastic Compute Cloud';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='User Guide for Linux Instances';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   </body>
</html>