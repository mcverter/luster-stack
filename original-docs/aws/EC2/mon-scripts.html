<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Monitoring Memory and Disk Metrics for Amazon EC2 Linux Instances - Amazon Elastic Compute Cloud</title>
      <meta name="viewport" content="width=device-width, initial-scale=1" />
      <link rel="home" href="#top" />
      <link rel="up" href="monitoring_ec2.html" title="Monitoring Amazon EC2" />
      <link rel="prev" href="automating_with_cloudwatch_events.html" title="Automating Amazon EC2 with CloudWatch Events" />
      <link rel="next" href="EC2_Network_and_Security.html" title="Network and Security" />
      <meta name="description" content="Walks through how to use Monitoring Scripts to produce and consume custom metrics for your Amazon EC2 Linux instance." />
      <meta name="keywords" content="EC2,Amazon EC2,EC2 instance,instance,VM,virtual machine" />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="Amazon Elastic Compute Cloud" />
      <meta name="guide" content="User Guide for Linux Instances" />
      <meta name="guide-locale" content="en_us" />
      <link rel="icon" type="image/ico" href="/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico" />
      <link rel="canonical" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/mon-scripts.html" />
      <link rel="stylesheet" type="text/css" href="/css/jquery-ui.min.css" />
      <link rel="stylesheet" type="text/css" href="/font/css/font-awesome.min.css" />
      <link rel="stylesheet" type="text/css" href="/css/google-font.css" />
      <link id="code-style" rel="stylesheet" type="text/css" href="/css/code/light.css" />
      <link rel="stylesheet" type="text/css" href="/css/jquery-ui.theme.css" />
      <link rel="stylesheet" type="text/css" href="/css/colorbox.css" />
      <link rel="stylesheet" type="text/css" href="/css/awsdocs.css?v=20170615" /><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/handlebars.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20170615"></script></head>
   <body id="top">
      <div xmlns:db="http://docbook.org/ns/docbook" id="aws-nav" class="aws-nav-header">
         <div class="aws-nav-header-left">
            <div id="aws-nav-flyout-trigger" class="aws-nav-flyout-trigger"><i class="fa fa-bars fa-2x"></i></div>
            <div class="aws-nav-logo">
               <!--aws_logo_105x39.png--><a href="http://aws.amazon.com"><img src="/images/aws_logo_105x39.png" alt="Amazon Web Services" /></a></div>
         </div>
         <div id="aws-nav-header-right" class="aws-nav-header-right">
            <div class="aws-nav-cta-button-outer"><a id="aws-nav-cta-button" class="aws-nav-button" href="https://console.aws.amazon.com/console/home">Sign In to the Console</a></div>
            <div class="aws-nav-popover-trigger" data-dropdown="aws-nav-dropdown-lang"><select id="languageSelection" onchange="SelectLanguage()">
                  <option value="/de_de/AWSEC2/latest/UserGuide/mon-scripts.html">Deutsch</option>
                  <option value="/en_us/AWSEC2/latest/UserGuide/mon-scripts.html" selected="selected">English</option>
                  <option value="/es_es/AWSEC2/latest/UserGuide/mon-scripts.html">Español</option>
                  <option value="/fr_fr/AWSEC2/latest/UserGuide/mon-scripts.html">Français</option>
                  <option value="/it_it/AWSEC2/latest/UserGuide/mon-scripts.html">Italiano</option>
                  <option value="/ja_jp/AWSEC2/latest/UserGuide/mon-scripts.html">日本語</option>
                  <option value="/ko_kr/AWSEC2/latest/UserGuide/mon-scripts.html">한국어</option>
                  <option value="/pt_br/AWSEC2/latest/UserGuide/mon-scripts.html">Português</option>
                  <option value="/zh_cn/AWSEC2/latest/UserGuide/mon-scripts.html">中文 (简体)</option>
                  <option value="/zh_tw/AWSEC2/latest/UserGuide/mon-scripts.html">中文 (繁體)</option></select></div><a class="btn btn-rss-link" id="rss-link-top" target="_blank" href="amazon-ec2-release-notes.rss" title="View RSS Feed"></a><a class="btn btn-kindle-link" id="kindle-link-top" target="_blank" href="http://www.amazon.com/dp/B076452RSZ" title="Open Kindle"></a><a class="btn btn-pdf-link" id="pdf-link-top" href="ec2-ug.pdf#mon-scripts" target="_blank" title="Open PDF"></a><a class="btn btn-github-link" id="github-link-top" href="https://github.com/awsdocs/amazon-ec2-user-guide/tree/master/doc_source/mon-scripts.md" target="_blank" title="Edit on GitHub"></a><div id="aws-nav-quicklinks-separator" class="aws-nav-quicklinks-separator">
               <div class="aws-nav-left"></div>
               <div class="aws-nav-right"></div>
            </div>
         </div>
         <div xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" id="topnav-flyout-menu-container">
            <ul id="topnav-flyout-menu"><script id="flyout-item-template" type="text/x-handlebars-template">
                    {{#flyoutList}}

                        {{#if topTarget}}
                            <li class="awsdocs-flyout-link-wrapper"><a href="{{topTarget}}">{{listItem}}</a></li>
                        {{else}}
                            <li>{{listItem}}
                                {{#if subList}}
                                <ul>
                                    {{#subList}}
                                    <li class="awsdocs-flyout-link-wrapper"><a href="{{target}}">{{text}}</a></li>
                                    {{/subList}}
                                </ul>
                                {{/if}}
                            </li>
                        {{/if}}

                    {{/flyoutList}}
                </script></ul>
            <div id="topnav-flyout-menu-spacer"></div>
         </div>
      </div>
      <div id="content-container">
         <div id="left-column">
            <div id="left-col-header">
               <div xmlns:db="http://docbook.org/ns/docbook" id="left-col-top-content">
                  <div id="service-name">Amazon Elastic Compute Cloud </div>
                  <div id="search"><i id="search-icon" class="fa fa-search fa-2x"></i></div>
                  <div id="guide-info">User Guide for Linux Instances
                     <div id="content-button"><i id="toggle-contents" class="fa fa-bars"></i></div>
                  </div>
               </div>
               <form id="finegrainedSearch" method="get" onsubmit="return searchFormSubmit(this);" action="/search/doc-search.html">
                  <div id="search-form"><select id="search-select" name="searchPath">
                        <option value="all">Entire Site</option>
                        <option value="AWSMarketplace">AMIs from AWS Marketplace</option>
                        <option value="amis">AMIs from All Sources</option>
                        <option value="articles">Articles &amp; Tutorials</option>
                        <option value="products_and_info">AWS Product Information</option>
                        <option value="case_studies">Case Studies</option>
                        <option value="customerapps">Customer Apps</option>
                        <option value="documentation">Documentation</option>
                        <option value="documentation-product">Documentation - This Product</option>
                        <option value="documentation-guide" selected="selected">Documentation - This Guide</option>
                        <option value="datasets">Public Data Sets</option>
                        <option value="releasenotes">Release Notes</option>
                        <option value="solution_providers">Partners</option>
                        <option value="code">Sample Code &amp; Libraries</option></select><br /><input id="search-query" name="searchQuery" type="text" placeholder="Search" /><input id="search-button" src="/images/search-button.png" alt="Go" type="image" /></div><input type="hidden" name="this_doc_product" id="this_doc_product" value="Amazon Elastic Compute Cloud" /><input type="hidden" name="this_doc_guide" id="this_doc_guide" value="User Guide for Linux Instances" /><input type="hidden" name="doc_locale" value="en_us" /></form>
            </div>
            <div id="toc">
               <ul class="awstoc">
                  <li class="awstoc closed"><a class="awstoc" href="concepts.html">What Is Amazon EC2?</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="ec2-instances-and-amis.html">Instances and AMIs</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="using-regions-availability-zones.html">Regions and Availability Zones</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="RootDeviceStorage.html">Root Device Volume</a></li>
                     </ul>
                  </li>
                  <li class="awstoc leaf"><a class="awstoc" href="get-set-up-for-amazon-ec2.html">Setting Up</a></li>
                  <li class="awstoc leaf"><a class="awstoc" href="EC2_GetStarted.html">Getting Started</a></li>
                  <li class="awstoc leaf"><a class="awstoc" href="ec2-best-practices.html">Best Practices</a></li>
                  <li class="awstoc closed"><a class="awstoc" href="ec2-tutorials.html">Tutorials</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="ec2-lamp-amazon-linux-2.html">Install a LAMP Server (Amazon Linux 2)</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="install-LAMP.html">Install a LAMP Server (Amazon Linux AMI)</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="hosting-wordpress.html">Tutorial: Hosting a WordPress Blog</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="SSL-on-an-instance.html">Tutorial: Configure Apache Web Server on Amazon Linux 2 to Use SSL/TLS</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="ec2-increase-availability.html">Tutorial: Increase the Availability of Your Application</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="tutorial_run_command.html">Tutorial: Remotely Manage Your Instances</a></li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="AMIs.html">Amazon Machine Images</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="ComponentsAMIs.html">AMI Types</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="virtualization_types.html">Virtualization Types</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="finding-an-ami.html">Finding a Linux AMI</a></li>
                        <li class="awstoc closed"><a class="awstoc" href="sharing-amis.html">Shared AMIs</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="usingsharedamis-finding.html">Finding Shared AMIs</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="sharingamis-intro.html">Making an AMI Public</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="sharingamis-explicit.html">Sharing an AMI with Specific AWS Accounts</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="using-bookmarks.html">Using Bookmarks</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="building-shared-amis.html">Guidelines for Shared Linux AMIs</a></li>
                           </ul>
                        </li>
                        <li class="awstoc leaf"><a class="awstoc" href="paid-amis.html">Paid AMIs</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="creating-an-ami-ebs.html">Creating an Amazon EBS-Backed Linux AMI</a></li>
                        <li class="awstoc closed"><a class="awstoc" href="creating-an-ami-instance-store.html">Creating an Instance Store-Backed Linux AMI</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="set-up-ami-tools.html">Setting Up the AMI Tools</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="create-instance-store-ami.html">Creating an AMI from an Instance Store-Backed Instance</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="Using_ConvertingS3toEBS.html">Converting to an Amazon EBS-Backed AMI</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="ami-tools-commands.html">AMI Tools Reference</a></li>
                           </ul>
                        </li>
                        <li class="awstoc leaf"><a class="awstoc" href="AMIEncryption.html">AMIs with Encrypted Snapshots</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="CopyingAMIs.html">Copying an AMI</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="deregister-ami.html">Deregistering Your Linux AMI</a></li>
                        <li class="awstoc closed"><a class="awstoc" href="amazon-linux-ami-basics.html">Amazon Linux</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="amazon-linux-2-virtual-machine.html">Running Amazon Linux 2 as a Virtual Machine On-Premises</a></li>
                           </ul>
                        </li>
                        <li class="awstoc leaf"><a class="awstoc" href="UserProvidedKernels.html">User Provided Kernels</a></li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="Instances.html">Instances</a><ul class="awstoc">
                        <li class="awstoc closed"><a class="awstoc" href="instance-types.html">Instance Types</a><ul class="awstoc">
                              <li class="awstoc closed"><a class="awstoc" href="burstable-performance-instances.html">Burstable Performance Instances</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="burstable-credits-baseline-concepts.html">CPU Credits and Baseline Performance</a></li>
                                    <li class="awstoc closed"><a class="awstoc" href="burstable-performance-instances-unlimited-mode.html">Unlimited Mode</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="unlimited-mode-examples.html">Examples</a></li>
                                       </ul>
                                    </li>
                                    <li class="awstoc closed"><a class="awstoc" href="burstable-performance-instances-standard-mode.html">Standard Mode</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="standard-mode-examples.html">Examples</a></li>
                                       </ul>
                                    </li>
                                    <li class="awstoc leaf"><a class="awstoc" href="burstable-performance-instances-how-to.html">Working with Burstable Performance Instances</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="burstable-performance-instances-monitoring-cpu-credits.html">Monitoring Your CPU Credits</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc leaf"><a class="awstoc" href="general-purpose-instances.html">General Purpose Instances</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="compute-optimized-instances.html">Compute Optimized Instances</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="memory-optimized-instances.html">Memory Optimized Instances</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="storage-optimized-instances.html">Storage Optimized Instances</a></li>
                              <li class="awstoc closed"><a class="awstoc" href="accelerated-computing-instances.html">Accelerated Computing Instances</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="install-nvidia-driver.html">Installing the NVIDIA Driver on Linux Instances</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="activate_grid.html">Activate NVIDIA GRID Virtual Applications (G3 Instances Only)</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="optimize_gpu.html">Optimizing GPU Settings (P2, P3, and G3 Instances)</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="fpga-getting-started.html">Getting Started with FPGA Development</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc leaf"><a class="awstoc" href="concepts_micro_instances.html">T1 Micro Instances</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="ec2-instance-resize.html">Changing the Instance Type</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="instance-optimize-cpu.html">Optimizing CPU Options</a></li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="instance-purchasing-options.html">Instance Purchasing Options</a><ul class="awstoc">
                              <li class="awstoc closed"><a class="awstoc" href="ec2-reserved-instances.html">Reserved Instances</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="reserved-instances-types.html">Types of Reserved Instances (Offering Classes)</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="apply_ri.html">How Reserved Instances Are Applied</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="concepts-reserved-instances-application.html">How You Are Billed</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ri-market-concepts-buying.html">Buying Reserved Instances</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ri-market-general.html">Selling on the Reserved Instance Marketplace</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ri-modifying.html">Modifying Reserved Instances</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ri-convertible-exchange.html">Exchanging Convertible Reserved Instances</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc leaf"><a class="awstoc" href="ec2-scheduled-instances.html">Scheduled Instances</a></li>
                              <li class="awstoc closed"><a class="awstoc" href="using-spot-instances.html">Spot Instances</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="how-spot-instances-work.html">How Spot Instances Work</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="spot-fleet.html">How Spot Fleet Works</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="using-spot-instances-history.html">Spot Instance Pricing History</a></li>
                                    <li class="awstoc closed"><a class="awstoc" href="spot-requests.html">Spot Instance Requests</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="spot-request-examples.html">Example Launch Specifications</a></li>
                                       </ul>
                                    </li>
                                    <li class="awstoc closed"><a class="awstoc" href="spot-fleet-requests.html">Spot Fleet Requests</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="spot-fleet-examples.html">Example Configurations</a></li>
                                       </ul>
                                    </li>
                                    <li class="awstoc leaf"><a class="awstoc" href="spot-fleet-cloudwatch-metrics.html">CloudWatch Metrics for Spot Fleet</a></li>
                                    <li class="awstoc closed"><a class="awstoc" href="spot-fleet-automatic-scaling.html">Automatic Scaling for Spot Fleet</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="spot-fleet-target-tracking.html">Target Tracking Scaling Policies</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="spot-fleet-step-scaling.html">Step Scaling Policies</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="spot-fleet-scheduled-scaling.html">Scheduled Scaling</a></li>
                                       </ul>
                                    </li>
                                    <li class="awstoc leaf"><a class="awstoc" href="spot-bid-status.html">Spot Request Status</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="spot-interruptions.html">Spot Instance Interruptions</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="spot-data-feeds.html">Spot Instance Data Feed</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="using-spot-limits.html">Spot Instance Limits</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc closed"><a class="awstoc" href="dedicated-hosts-overview.html">Dedicated Hosts</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="how-dedicated-hosts-work.html">Working with Dedicated Hosts</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="dedicated-hosts-aws-config.html">Tracking Configuration Changes</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc leaf"><a class="awstoc" href="dedicated-instance.html">Dedicated Instances</a></li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="ec2-instance-lifecycle.html">Instance Lifecycle</a><ul class="awstoc">
                              <li class="awstoc closed"><a class="awstoc" href="LaunchingAndUsingInstances.html">Launch</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="launching-instance.html">Launching an Instance Using the Launch Instance Wizard</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ec2-launch-templates.html">Launching an Instance from a Launch Template</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="launch-more-like-this.html">Launching an Instance From an Existing Instance</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="instance-launch-snapshot.html">Launching a Linux Instance from a Backup</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="launch-marketplace-console.html">Launching an AWS Marketplace Instance</a></li>
                                    <li class="awstoc closed"><a class="awstoc" href="ec2-fleet.html">Launching an EC2 Fleet</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="ec2-fleet-configuration-strategies.html">EC2 Fleet Configuration Strategies</a></li>
                                          <li class="awstoc closed"><a class="awstoc" href="manage-ec2-fleet.html">Managing an EC2 Fleet</a><ul class="awstoc">
                                                <li class="awstoc leaf"><a class="awstoc" href="ec2-fleet-examples.html">Example Configurations</a></li>
                                             </ul>
                                          </li>
                                       </ul>
                                    </li>
                                 </ul>
                              </li>
                              <li class="awstoc closed"><a class="awstoc" href="AccessingInstances.html">Connect</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="AccessingInstancesLinux.html">Connect Using SSH</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="putty.html">Connect Using PuTTY</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="WSL.html">Connect Using WSL</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="mindterm.html">Connect Using MindTerm</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc leaf"><a class="awstoc" href="Stop_Start.html">Stop and Start</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="ec2-instance-reboot.html">Reboot</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="instance-retirement.html">Retire</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="terminating-instances.html">Terminate</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="ec2-instance-recover.html">Recover</a></li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="Configure_Instance.html">Configure Instances</a><ul class="awstoc">
                              <li class="awstoc closed"><a class="awstoc" href="managing-software.html">Managing Software</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="install-updates.html">Updating Instance Software</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="add-repositories.html">Adding Repositories</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="find-software.html">Finding Software Packages</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="install-software.html">Installing Software Packages</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="compile-software.html">Preparing to Compile Software</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc leaf"><a class="awstoc" href="managing-users.html">Managing Users</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="processor_state_control.html">Processor State Control</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="set-time.html">Setting the Time</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="set-hostname.html">Changing the Hostname</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="dynamic-dns.html">Setting Up Dynamic DNS</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="user-data.html">Running Commands at Launch</a></li>
                              <li class="awstoc closed"><a class="awstoc" href="ec2-instance-metadata.html">Instance Metadata and User Data</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="instance-identity-documents.html">Instance Identity Documents</a></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li class="awstoc leaf"><a class="awstoc" href="identify_ec2_instances.html">Identify Instances</a></li>
                     </ul>
                  </li>
                  <li class="awstoc opened"><a class="awstoc" href="monitoring_ec2.html">Monitoring</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="monitoring_automated_manual.html">Automated and Manual Monitoring</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="monitoring_best_practices.html">Best Practices for Monitoring</a></li>
                        <li class="awstoc closed"><a class="awstoc" href="monitoring-instances-status-check.html">Monitoring the Status of Your Instances</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="monitoring-system-instance-status-check.html">Instance Status Checks</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="monitoring-instances-status-check_sched.html">Scheduled Events</a></li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="using-cloudwatch.html">Monitoring Your Instances Using CloudWatch</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="using-cloudwatch-new.html">Enable Detailed Monitoring</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="viewing_metrics_with_cloudwatch.html">List Available Metrics</a></li>
                              <li class="awstoc closed"><a class="awstoc" href="monitoring_get_statistics.html">Get Statistics for Metrics</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="US_SingleMetricPerInstance.html">Get Statistics for a Specific Instance</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="GetSingleMetricAllDimensions.html">Aggregate Statistics Across Instances</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="GetMetricAutoScalingGroup.html">Aggregate Statistics by Auto Scaling Group</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="US_SingleMetricPerAMI.html">Aggregate Statistics by AMI</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc leaf"><a class="awstoc" href="graphs-in-the-aws-management-console.html">Graph Metrics</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="using-cloudwatch-createalarm.html">Create an Alarm</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="UsingAlarmActions.html">Create Alarms That Stop, Terminate, Reboot, or Recover an Instance</a></li>
                           </ul>
                        </li>
                        <li class="awstoc leaf"><a class="awstoc" href="automating_with_cloudwatch_events.html">Automating Amazon EC2 with CloudWatch Events</a></li>
                        <li class="awstoc leaf"><a class="awstoc selected" href="mon-scripts.html">Monitoring Memory and Disk Metrics</a></li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="EC2_Network_and_Security.html">Network and Security</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="ec2-key-pairs.html">Key Pairs</a></li>
                        <li class="awstoc closed"><a class="awstoc" href="using-network-security.html">Security Groups</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="security-group-rules-reference.html">Security Group Rules Reference</a></li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="UsingIAM.html">Controlling Access</a><ul class="awstoc">
                              <li class="awstoc closed"><a class="awstoc" href="iam-policies-for-amazon-ec2.html">IAM Policies</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="iam-policy-structure.html">Policy Structure</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ec2-supported-iam-actions-resources.html">Supported Resource-Level Permissions</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ExamplePolicies_EC2.html">Example Policies for CLI or SDK</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="iam-policies-ec2-console.html">Example Policies for the Console</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc leaf"><a class="awstoc" href="iam-roles-for-amazon-ec2.html">IAM Roles</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="authorizing-access-to-an-instance.html">Network Access</a></li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="using-instance-addressing.html">Instance IP Addressing</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="MultipleIP.html">Multiple IP Addresses</a></li>
                           </ul>
                        </li>
                        <li class="awstoc leaf"><a class="awstoc" href="elastic-ip-addresses-eip.html">Elastic IP Addresses</a></li>
                        <li class="awstoc closed"><a class="awstoc" href="using-eni.html">Network Interfaces</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="requester-managed-eni.html">Requester-Managed Network Interfaces</a></li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="enhanced-networking.html">Enhanced Networking</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="sriov-networking.html">Enhanced Networking: Intel 82599 VF</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="enhanced-networking-ena.html">Enhanced Networking: ENA</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="troubleshooting-ena.html">Troubleshooting ENA</a></li>
                           </ul>
                        </li>
                        <li class="awstoc leaf"><a class="awstoc" href="placement-groups.html">Placement Groups</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="network_mtu.html">Network MTU</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="using-vpc.html">Virtual Private Clouds</a></li>
                        <li class="awstoc closed"><a class="awstoc" href="ec2-classic-platform.html">EC2-Classic</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="vpc-classiclink.html">ClassicLink</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="vpc-migrate.html">Migrating from EC2-Classic to a VPC</a></li>
                           </ul>
                        </li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="Storage.html">Storage</a><ul class="awstoc">
                        <li class="awstoc closed"><a class="awstoc" href="AmazonEBS.html">Amazon EBS</a><ul class="awstoc">
                              <li class="awstoc closed"><a class="awstoc" href="EBSVolumes.html">EBS Volumes</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="EBSVolumeTypes.html">EBS Volume Types</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ebs-creating-volume.html">Creating a Volume</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ebs-restoring-volume.html">Restoring from a Snapshot</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ebs-attaching-volume.html">Attaching a Volume to an Instance</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ebs-using-volumes.html">Making a Volume Available for Use</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ebs-describing-volumes.html">Volume Information</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="monitoring-volume-status.html">Monitoring the Status of Your Volumes</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ebs-detaching-volume.html">Detaching a Volume from an Instance</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ebs-deleting-volume.html">Deleting a Volume</a></li>
                                    <li class="awstoc closed"><a class="awstoc" href="ebs-modify-volume.html">Modifying a Volume</a><ul class="awstoc">
                                          <li class="awstoc leaf"><a class="awstoc" href="volume_constraints.html">Volume Size Constraints</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="console-modify.html">Using the Console</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="cli-modify.html">Using the CLI</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="monitoring_mods.html">Monitoring Progress</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="expand-linux-partition.html">Expanding a Linux Partition</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="recognize-expanded-volume-linux.html">Extending Linux File Systems</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="limitations.html">Limitations</a></li>
                                          <li class="awstoc leaf"><a class="awstoc" href="stop-start.html">Appendix: Manual Stop/Start Modification</a></li>
                                       </ul>
                                    </li>
                                 </ul>
                              </li>
                              <li class="awstoc closed"><a class="awstoc" href="EBSSnapshots.html">EBS Snapshots</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="ebs-creating-snapshot.html">Creating a Snapshot</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ebs-deleting-snapshot.html">Deleting a Snapshot</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ebs-copy-snapshot.html">Copying a Snapshot</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ebs-describing-snapshots.html">Viewing Snapshot Information</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ebs-modifying-snapshot-permissions.html">Sharing a Snapshot</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="snapshot-lifecycle.html">Automating Snapshots</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc leaf"><a class="awstoc" href="EBSOptimized.html">EBS Optimization</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="EBSEncryption.html">EBS Encryption</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="nvme-ebs-volumes.html">EBS Volumes and NVMe</a></li>
                              <li class="awstoc closed"><a class="awstoc" href="EBSPerformance.html">EBS Performance</a><ul class="awstoc">
                                    <li class="awstoc leaf"><a class="awstoc" href="ebs-ec2-config.html">EC2 Configuration</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ebs-io-characteristics.html">I/O Characteristics and Monitoring</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="ebs-initialize.html">Initialize Volumes</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="raid-config.html">RAID Configuration</a></li>
                                    <li class="awstoc leaf"><a class="awstoc" href="benchmark_procedures.html">Benchmark EBS Volumes</a></li>
                                 </ul>
                              </li>
                              <li class="awstoc leaf"><a class="awstoc" href="ebs-cloud-watch-events.html">EBS CloudWatch Events</a></li>
                           </ul>
                        </li>
                        <li class="awstoc closed"><a class="awstoc" href="InstanceStorage.html">Instance Store</a><ul class="awstoc">
                              <li class="awstoc leaf"><a class="awstoc" href="add-instance-store-volumes.html">Add Instance Store Volumes</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="ssd-instance-store.html">SSD Instance Store Volumes</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="instance-store-swap-volumes.html">Instance Store Swap Volumes</a></li>
                              <li class="awstoc leaf"><a class="awstoc" href="disk-performance.html">Optimizing Disk Performance</a></li>
                           </ul>
                        </li>
                        <li class="awstoc leaf"><a class="awstoc" href="AmazonEFS.html">Amazon EFS</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="AmazonS3.html">Amazon S3</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="volume_limits.html">Instance Volume Limits</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="device_naming.html">Device Naming</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="block-device-mapping-concepts.html">Block Device Mapping</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="using-public-data-sets.html">Using Public Data Sets</a></li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="EC2_Resources.html">Resources and Tags</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="resources.html">Resource Locations</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="resource-ids.html">Resource IDs</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="Using_Filtering.html">Listing and Filtering Your Resources</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="Using_Tags.html">Tagging Your Resources</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="ec2-resource-limits.html">Service Limits</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="usage-reports.html">Usage Reports</a></li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="Linux-Server-EC2Rescue.html">EC2Rescue for Linux</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="ec2rl_install.html">Installing EC2Rescue for Linux</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="ec2rl_verify.html">(Optional) Verify the Signature of EC2Rescue for Linux</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="ec2rl_working.html">Working with EC2Rescue for Linux</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="ec2rl_moduledev.html">Developing EC2Rescue Modules</a></li>
                     </ul>
                  </li>
                  <li class="awstoc closed"><a class="awstoc" href="ec2-instance-troubleshoot.html">Troubleshooting</a><ul class="awstoc">
                        <li class="awstoc leaf"><a class="awstoc" href="troubleshooting-launch.html">Troubleshooting Launch Issues</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="TroubleshootingInstancesConnecting.html">Connecting to Your Instance</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="TroubleshootingInstancesStopping.html">Stopping Your Instance</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="TroubleshootingInstancesShuttingDown.html">Terminating Your Instance</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="TroubleshootingInstanceRecovery.html">Instance Recovery Failures</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="TroubleshootingInstances.html">Failed Status Checks</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="instance-console.html">Getting Console Output and Rebooting Instances</a></li>
                        <li class="awstoc leaf"><a class="awstoc" href="instance-booting-from-wrong-volume.html">Booting from the Wrong Volume</a></li>
                     </ul>
                  </li>
                  <li class="awstoc leaf"><a class="awstoc" href="DocumentHistory.html">Document History</a></li>
                  <li class="awstoc leaf"><a class="awstoc" href="glossary.html">AWS Glossary</a></li>
                  <li id="toc-additional-links"><a class="btn btn-pdf-link" id="pdf-link-alt" href="ec2-ug.pdf#top" target="_blank" title="Open PDF"></a><a class="btn btn-kindle-link" id="kindle-link-alt" target="_blank" href="http://www.amazon.com/dp/B076452RSZ" title="Open Kindle"></a><a class="btn btn-rss-link" id="rss-link-alt" target="_blank" href="amazon-ec2-release-notes.rss" title="View RSS Feed"></a></li>
               </ul>
            </div>
         </div>
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tr>
                           <td>
                              <div class="breadcrumb"><a href="/index.html">AWS Documentation</a> » <a href="/ec2/index.html">Amazon EC2</a> » <a href="index.html">User Guide for Linux Instances</a> » <a href="monitoring_ec2.html">Monitoring Amazon EC2</a> » <span class="breadcrumb">Monitoring Memory and Disk Metrics for Amazon EC2 Linux Instances</span></div>
                           </td>
                        </tr>
                     </table>
                     <div></div>
                     <h1 class="topictitle" id="mon-scripts">Monitoring Memory and Disk Metrics for Amazon EC2 Linux Instances</h1>
                     
                     <h2 id="new-cloudwatch-agent">New CloudWatch Agent Available</h2>
                     
                     <p>A new multi-platform CloudWatch agent is available. You can use a single agent to
                        collect both
                        system metrics and log files from Amazon EC2 instances and on-premises servers. The
                        new agent
                        supports both Windows Server and Linux and enables you to select the metrics to be
                        collected,
                        including sub-resource metrics such as per-CPU core. We recommend you use the new
                        agent
                        instead of the older monitoring scripts to collect metrics and logs. For more information
                        about the CloudWatch agent, see <a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/Install-CloudWatch-Agent.html" target="_blank">Collect
                           Metrics from Amazon EC2 Instances and On-Premises Servers with the CloudWatch Agent</a> in the
                        <em>Amazon CloudWatch User Guide</em>.
                     </p>
                     
                     
                     <p>The rest of this section is informational for customers who are still using the older
                        Perl
                        scripts for monitoring. You can download these <a href="https://aws.amazon.com/code/8720044071969977" target="_blank">Amazon CloudWatch Monitoring Scripts for Linux</a>
                        from the AWS sample code library.
                     </p>
                     
                     
                     <h2 id="monitoring-scripts-intro">CloudWatch Monitoring Scripts</h2>
                     
                     
                     <p>The Amazon CloudWatch Monitoring Scripts for Amazon Elastic Compute Cloud (Amazon
                        EC2) Linux-based instances demonstrate how
                        to produce and consume Amazon CloudWatch custom metrics. These sample Perl scripts
                        comprise a fully
                        functional example that reports memory, swap, and disk space utilization metrics for
                        a Linux
                        instance. 
                     </p>
                     
                     
                     <p>Standard Amazon CloudWatch usage charges for custom metrics apply to your use of these
                        scripts. For
                        more information, see the <a href="https://aws.amazon.com/cloudwatch/pricing" target="_blank">Amazon CloudWatch</a>
                        pricing page.
                     </p>
                     
                     
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Contents</strong></p>
                        <ul>
                           <li><a href="#mon-scripts-systems">Supported Systems</a></li>
                           <li><a href="#mon-scripts-contents">Package Contents</a></li>
                           <li><a href="#mon-scripts-perl_prereq">Prerequisites</a></li>
                           <li><a href="#mon-scripts-getstarted">Getting Started</a></li>
                           <li><a href="#using_put_script">mon-put-instance-data.pl</a></li>
                           <li><a href="#using_get_script_powershell">mon-get-instance-stats.pl </a></li>
                           <li><a href="#script_viewmetrics">Viewing Your Custom Metrics in the Console</a></li>
                           <li><a href="#mon-script-troubleshooting">Troubleshooting</a></li>
                        </ul>
                     </div>
                     
                     
                     
                     
                     <h3 id="mon-scripts-systems">Supported Systems</h3>
                     
                     
                     <p>These monitoring scripts are intended for use with Amazon EC2 instances running Linux.
                        The
                        scripts have been tested on instances using the following Amazon Machine Images (AMIs),
                        both
                        32-bit and 64-bit versions:
                     </p>
                     
                     <div class="itemizedlist">
                        
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>Amazon Linux 2</p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Amazon Linux AMI 2014.09.2 and later</p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Red Hat Enterprise Linux 7.4 and 6.9</p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>SUSE Linux Enterprise Server 12</p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Ubuntu Server 16.04 and 14.04</p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     
                     <div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p>On servers running SUSE Linux Enterprise Server 12, you may need to first download
                           the <code class="code">perl-Switch</code> package. You can 
                           download and install this package with the following commands:
                        </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">wget http://download.opensuse.org/repositories/devel:/languages:/perl/SLE_12_SP3/noarch/perl-Switch-2.17-32.1.noarch.rpm
sudo rpm -i perl-Switch-2.17-32.1.noarch.rpm</code></pre></div>
                     
                     
                     <p>You can also monitor memory and disk metrics on Amazon EC2 instances running Windows
                        by sending this data to CloudWatch Logs. 
                        For more information, see <a href="https://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/send_logs_to_cwl.html" target="_blank">Sending Logs, Events, and Performance 
                           Counters to Amazon CloudWatch</a> in the <em>Amazon EC2 User Guide for Windows Instances</em>.
                     </p>
                     
                     
                     
                     
                     
                     <h3 id="mon-scripts-contents">Package Contents</h3>
                     
                     
                     <div class="itemizedlist">
                        
                        <p>The package for the monitoring scripts contains the following files:</p>
                        
                        
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p><b>CloudWatchClient.pm</b> – Shared Perl module that simplifies
                                 calling Amazon CloudWatch from other scripts.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><b>mon-put-instance-data.pl</b> – Collects system metrics on an
                                 Amazon EC2 instance (memory, swap, disk space utilization) and sends them to Amazon
                                 CloudWatch.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><b>mon-get-instance-stats.pl</b> – Queries Amazon CloudWatch and displays
                                 the most recent utilization statistics for the EC2 instance on which this script is
                                 executed.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><b>awscreds.template</b> – File template for AWS credentials that
                                 stores your access key ID and secret access key.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><b>LICENSE.txt</b> – Text file containing the Apache 2.0
                                 license.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><b>NOTICE.txt</b> – Copyright notice.
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     
                     
                     
                     
                     <h3 id="mon-scripts-perl_prereq">Prerequisites</h3>
                     
                     
                     <p>With some versions of Linux, you must install additional modules before the monitoring
                        scripts will work.
                     </p>
                     
                     
                     <h4 id="mon-scripts-alami">Amazon Linux 2 and Amazon Linux AMI</h4>
                     
                     <p class="title"><b>To install the required packages</b></p>
                     <ol>
                        <li>
                           
                           <p>Log on to your instance. For more information, see <a href="AccessingInstances.html">Connect to Your Linux Instance</a>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>At a command prompt, install packages as follows:</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>sudo yum install -y perl-Switch perl-DateTime perl-Sys-Syslog perl-LWP-Protocol-https perl-Digest-SHA.x86_64</code></strong></code></pre>
                           </li>
                     </ol>
                     
                     
                     
                     
                     <h4 id="mon-scripts-redhat">Red Hat Enterprise Linux</h4>
                     
                     
                     <p>You must install additional Perl modules.</p>
                     
                     <p class="title"><b>To install the required packages on Red Hat Enterprise Linux 6.9</b></p>
                     <ol>
                        <li>
                           
                           <p>Log on to your instance. For more information, see <a href="AccessingInstances.html">Connect to Your Linux Instance</a>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>At a command prompt, install packages as follows:</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>sudo yum install perl-DateTime perl-CPAN perl-Net-SSLeay perl-IO-Socket-SSL perl-Digest-SHA gcc -y
sudo yum install zip unzip</code></strong></code></pre>
                           </li>
                        <li>
                           <p>Run CPAN as an elevated user:</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">sudo cpan</code></pre>
                           <p>Press ENTER through the prompts until you see the following prompt:</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">cpan[1]&gt;</code></pre></li>
                        <li>
                           <p>At the CPAN prompt, run each of the below commands: run one command and it installs,
                              and when you return to the CPAN prompt, 
                              run the next command. Press ENTER like before when prompted to continue through the
                              process: 
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">cpan[1]&gt; install YAML 
cpan[2]&gt; install LWP::Protocol::https 
cpan[3]&gt; install Sys::Syslog 
cpan[4]&gt; install Switch 
</code></pre></li>
                     </ol>
                     
                     <p class="title"><b>To install the required packages on Red Hat Enterprise Linux 7.4</b></p>
                     <ol>
                        <li>
                           
                           <p>Log on to your instance. For more information, see <a href="AccessingInstances.html">Connect to Your Linux Instance</a>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>At a command prompt, install packages as follows:</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>sudo yum install perl-Switch perl-DateTime perl-Sys-Syslog perl-LWP-Protocol-https perl-Digest-SHA --enablerepo="rhui-REGION-rhel-server-optional" -y 
sudo yum install zip unzip</code></strong></code></pre></li>
                     </ol>
                     
                     
                     
                     
                     <h4 id="mon-scripts-suse">SUSE Linux Enterprise Server</h4>
                     
                     
                     <p>You must install additional Perl modules.</p>
                     
                     <p class="title"><b>To install the required packages on SUSE</b></p>
                     <ol>
                        <li>
                           
                           <p>Log on to your instance. For more information, see <a href="AccessingInstances.html">Connect to Your Linux Instance</a>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>At a command prompt, install packages as follows:</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>sudo zypper install perl-Switch perl-DateTime
sudo zypper install –y "perl(LWP::Protocol::https)"</code></strong></code></pre>
                           </li>
                     </ol>
                     
                     
                     
                     
                     <h4 id="mon-scripts-ubuntu">Ubuntu Server</h4>
                     
                     
                     <p>You must configure your server as follows.</p>
                     
                     <p class="title"><b>To install the required packages on Ubuntu</b></p>
                     <ol>
                        <li>
                           
                           <p>Log on to your instance. For more information, see <a href="AccessingInstances.html">Connect to Your Linux Instance</a>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>At a command prompt, install packages as follows:</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>sudo apt-get update
sudo apt-get install unzip
sudo apt-get install libwww-perl libdatetime-perl</code></strong></code></pre>
                           </li>
                     </ol>
                     
                     
                     
                     
                     
                     
                     <h3 id="mon-scripts-getstarted">Getting Started</h3>
                     
                     
                     <p>The following steps show you how to download, uncompress, and configure the CloudWatch
                        Monitoring Scripts on an EC2 Linux instance.
                     </p>
                     
                     <p class="title"><b>To download, install, and configure the monitoring scripts</b></p>
                     <ol>
                        <li>
                           
                           <p>At a command prompt, move to a folder where you want to store the monitoring scripts
                              and run the following command to download them:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">curl https://aws-cloudwatch.s3.amazonaws.com/downloads/CloudWatchMonitoringScripts-1.2.2.zip -O</code></pre>
                           </li>
                        <li>
                           
                           <p>Run the following commands to install the monitoring scripts you downloaded:</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">unzip CloudWatchMonitoringScripts-1.2.2.zip &amp;&amp; \
rm CloudWatchMonitoringScripts-1.2.2.zip &amp;&amp; \
cd aws-scripts-mon</code></pre>
                           </li>
                        <li>
                           
                           <p>Ensure that the scripts have permission to perform CloudWatch operations using one
                              of the
                              following options:
                           </p>
                           
                           <ul>
                              
                              <li>
                                 
                                 <p>If
                                    you associated an IAM role (instance profile) with your
                                    instance, verify that it grants permissions to perform the following
                                    operations:
                                 </p>
                                 
                                 <div class="itemizedlist">
                                    
                                    
                                    
                                    
                                    
                                    <ul class="itemizedlist" type="disc">
                                       <li class="listitem">
                                          
                                          <p>cloudwatch:PutMetricData</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>cloudwatch:GetMetricStatistics</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>cloudwatch:ListMetrics</p>
                                          
                                       </li>
                                       <li class="listitem">
                                          
                                          <p>ec2:DescribeTags</p>
                                          
                                       </li>
                                    </ul>
                                 </div>
                                 
                              </li>
                              
                              <li>
                                 
                                 <p>Specify your AWS credentials in a credentials file. First, copy the
                                    <code>awscreds.template</code> file included with the monitoring scripts to
                                    <code>awscreds.conf</code> as follows:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">cp awscreds.template awscreds.conf</code></pre>
                                 <p>Add the following content to the <code>awscreds.conf</code> file:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">AWSAccessKeyId = <em class="replaceable"><code>my-access-key-id</code></em>
AWSSecretKey = <em class="replaceable"><code>my-secret-access-key</code></em></code></pre>
                                 <p>For information about how to view your AWS credentials, see <a href="https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html" target="_blank">Understanding and Getting Your Security
                                       Credentials</a> in the <em>Amazon Web Services General Reference</em>.
                                 </p>
                                 
                              </li>
                              
                           </ul>
                           
                        </li>
                     </ol>
                     
                     
                     
                     
                     <h3 id="using_put_script">mon-put-instance-data.pl</h3>
                     
                     
                     <p>This script collects memory, swap, and disk space utilization data on the current
                        system.
                        It then makes a remote call to Amazon CloudWatch to report the collected data as custom
                        metrics.
                     </p>
                     
                     
                     <div class="table">
                        <p class="title"><b>Options</b></p>
                        <div class="table-contents">
                           <table id="w228aac19c23b5c17b5">
                              
                              <tr>
                                 
                                 <th>Name</th>
                                 
                                 <th>Description</th>
                                 
                                 
                              </tr>
                              
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>
                                       <code class="code">--mem-util </code>
                                       
                                    </p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Collects and sends the MemoryUtilization metrics in percentages. This metric
                                       counts memory allocated by applications and the operating system as used, and also
                                       includes cache
                                       and buffer memory as used if you specify the <code class="code">--mem-used-incl-cache-buff</code> option. 
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>
                                       <code class="code">--mem-used </code>
                                       
                                    </p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p> Collects and sends the MemoryUsed metrics, reported in megabytes. This metric
                                       counts memory allocated by applications and the operating system as used, and also
                                       includes cache
                                       and buffer memory as used if you specify the <code class="code">--mem-used-incl-cache-buff</code> option.
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>
                                       <code class="code">--mem-used-incl-cache-buff </code>
                                       
                                    </p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>If you include this option, memory currently used for  cache and buffers is counted
                                       as "used" when the metrics are reported for <code class="code">--mem-util</code>, 
                                       <code class="code">--mem-used</code>, and <code class="code">--mem-avail</code>.
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>
                                       <code class="code">--mem-avail </code>
                                       
                                    </p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p> Collects and sends the MemoryAvailable metrics, reported in megabytes. This metric
                                       counts memory allocated by applications and the operating system as used, and also
                                       includes cache
                                       and buffer memory as used if you specify the <code class="code">--mem-used-incl-cache-buff</code> option.
                                       
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>
                                       <code class="code">--swap-util </code>
                                       
                                    </p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p> Collects and sends SwapUtilization metrics, reported in percentages.
                                       
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>
                                       <code class="code">--swap-used </code>
                                       
                                    </p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p> Collects and sends SwapUsed metrics, reported in megabytes. </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>
                                       <code class="code">--disk-path=PATH </code>
                                       
                                    </p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p> Selects the disk on which to report. </p>
                                    
                                    <p>PATH can specify a mount point or any file located on a mount point for the
                                       filesystem that needs to be reported. For selecting multiple disks, specify a
                                       <code class="code">--disk-path=PATH</code> for each one of them. 
                                    </p>
                                    
                                    <p> To select a disk for the filesystems mounted on <code class="code">/</code> and
                                       <code class="code">/home</code>, use the following parameters: 
                                    </p>
                                    
                                    <p><code class="code">--disk-path=/ --disk-path=/home</code></p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>
                                       <code class="code">--disk-space-util</code>
                                       
                                    </p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Collects and sends the DiskSpaceUtilization metric for the selected disks.
                                       The metric is reported in percentages.
                                    </p>
                                    
                                    <p>Note that the disk utilization metrics calculated by this script differ from
                                       the values calculated by the df -k -l command. If you find the values from df -k -l
                                       more useful, you can change the calculations in the script.
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>
                                       <code class="code">--disk-space-used</code>
                                       
                                    </p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Collects and sends the DiskSpaceUsed metric for the selected disks. The
                                       metric is reported by default in gigabytes. 
                                    </p>
                                    
                                    <p> Due to reserved disk space in Linux operating systems, disk space used and
                                       disk space available might not accurately add up to the amount of total disk space.
                                       
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>
                                       <code class="code">--disk-space-avail </code>
                                       
                                    </p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Collects and sends the DiskSpaceAvailable metric for the selected disks. The
                                       metric is reported in gigabytes. 
                                    </p>
                                    
                                    <p> Due to reserved disk space in the Linux operating systems, disk space used
                                       and disk space available might not accurately add up to the amount of total disk
                                       space. 
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>
                                       <code class="code">--memory-units=UNITS </code>
                                       
                                    </p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Specifies units in which to report memory usage. If not specified, memory is
                                       reported in megabytes. UNITS may be one of the following: bytes, kilobytes,
                                       megabytes, gigabytes. 
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>
                                       <code class="code">--disk-space-units=UNITS
                                          </code>
                                       
                                    </p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Specifies units in which to report disk space usage. If not specified, disk
                                       space is reported in gigabytes. UNITS may be one of the following: bytes, kilobytes,
                                       megabytes, gigabytes. 
                                    </p>
                                    
                                 </td>
                                 
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>
                                       <code class="code">--aws-credential- file=PATH
                                          </code>
                                       
                                    </p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Provides the location of the file containing AWS credentials. </p>
                                    
                                    <p>This parameter cannot be used with the <code class="code">--aws-access-key-id</code> and
                                       -<code class="code">-aws-secret-key</code> parameters. 
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>
                                       <code class="code">--aws-access-key-id=VALUE
                                          </code>
                                       
                                    </p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Specifies the AWS access key ID to use to identify the caller. Must be used
                                       together with the <code class="code">--aws-secret-key</code> option. Do not use this option with
                                       the <code class="code">--aws-credential-file</code> parameter. 
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>
                                       <code class="code">--aws-secret-key=VALUE </code>
                                       
                                    </p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Specifies the AWS secret access key to use to sign the request to CloudWatch.
                                       Must be used together with the <code class="code">--aws-access-key-id</code> option. Do not use
                                       this option with <code class="code">--aws-credential-file</code> parameter.
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>
                                       <code class="code">--aws-iam-role=VALUE</code>
                                       
                                    </p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Specifies the IAM role used to provide AWS credentials. The value
                                       <code class="code">=VALUE</code> is required. If no credentials are specified, the default IAM
                                       role associated with the EC2 instance is applied. Only one IAM role can be used. If
                                       no IAM roles are found, or if more than one IAM role is found, the script will
                                       return an error.
                                    </p>
                                    
                                    <p>Do not use this option with the <code class="code">--aws-credential-file</code>,
                                       <code class="code">--aws-access-key-id</code>, or <code class="code">--aws-secret-key</code>
                                       parameters.
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>
                                       <code class="code">--aggregated[=only]</code>
                                       
                                    </p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Adds aggregated metrics for instance type, AMI ID, and overall for the
                                       region. The value <code class="code">=only</code> is optional; if specified, the script reports
                                       only aggregated metrics.
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>
                                       <code class="code">--auto-scaling[=only]</code>
                                       
                                    </p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Adds aggregated metrics for the Auto Scaling group. The value
                                       <code class="code">=only</code> is optional; if specified, the script reports only Auto Scaling
                                       metrics. The <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/ManagingPolicies.html" target="_blank">IAM policy</a>
                                       associated with the IAM account or role using the scripts need to have permissions
                                       to call the EC2 action <a href="https://docs.aws.amazon.com/AWSEC2/latest/APIReference/ApiReference-query-DescribeTags.html" target="_blank">DescribeTags</a>.
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>
                                       <code class="code">--verify </code>
                                       
                                    </p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Performs a test run of the script that collects the metrics, prepares a
                                       complete HTTP request, but does not actually call CloudWatch to report the data.
                                       This option also checks that credentials are provided. When run in verbose mode,
                                       this option outputs the metrics that will be sent to CloudWatch. 
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>
                                       <code class="code">--from-cron </code>
                                       
                                    </p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Use this option when calling the script from cron. When this option is used,
                                       all diagnostic output is suppressed, but error messages are sent to the local system
                                       log of the user account. 
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>
                                       <code class="code">--verbose </code>
                                       
                                    </p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Displays detailed information about what the script is doing. </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>
                                       <code class="code">--help </code>
                                       
                                    </p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Displays usage information. </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>
                                       <code class="code">--version </code>
                                       
                                    </p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Displays the version number of the script. </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                           </table>
                        </div>
                     </div>
                     
                     
                     
                     <h4 id="using_put_examples">Examples</h4>
                     
                     
                     <p>The following examples assume that you provided an IAM role or
                        <code>awscreds.conf</code> file. Otherwise, you must provide credentials using the
                        <code class="code">--aws-access-key-id</code> and <code class="code">--aws-secret-key</code> parameters for these
                        commands.
                     </p>
                     
                     
                     <p><b>To perform a simple test run without posting data to CloudWatch</b></p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">./mon-put-instance-data.pl --mem-util --verify --verbose</code></pre>
                     
                     <p><b>To collect all available memory metrics and send them to
                           CloudWatch, counting cache and buffer memory as used</b></p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">./mon-put-instance-data.pl --mem-used-incl-cache-buff --mem-util --mem-used --mem-avail</code></pre>
                     
                     <p class="title"><b>To set a cron schedule for metrics reported to CloudWatch</b></p>
                     <ol>
                        <li>
                           
                           <p>Start editing the crontab using the following command:</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">crontab -e </code></pre>
                           </li>
                        <li>
                           
                           <p>Add the following command to report memory and disk space utilization to CloudWatch
                              every five minutes:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">*/5 * * * * ~/aws-scripts-mon/mon-put-instance-data.pl --mem-used-incl-cache-buff --mem-util --disk-space-util --disk-path=/ --from-cron</code></pre>
                           <p>If the script encounters an error, the script will write the error message in the
                              system log. 
                           </p>
                           
                        </li>
                     </ol>
                     
                     
                     <p><b>To collect aggregated metrics for an Auto Scaling group and send them to
                           Amazon CloudWatch without reporting individual instance metrics</b></p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">./mon-put-instance-data.pl --mem-util --mem-used --mem-avail --auto-scaling=only</code></pre>
                     
                     <p><b>To collect aggregated metrics for instance type, AMI ID and region, and send
                           them to Amazon CloudWatch without reporting individual instance metrics</b></p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">./mon-put-instance-data.pl --mem-util --mem-used --mem-avail --aggregated=only</code></pre>
                     
                     
                     
                     
                     
                     <h3 id="using_get_script_powershell">mon-get-instance-stats.pl </h3>
                     
                     
                     <p>This script queries CloudWatch for statistics on memory, swap, and disk space metrics
                        within the
                        time interval provided using the number of most recent hours. This data is provided
                        for the
                        Amazon EC2 instance on which this script is executed. 
                     </p>
                     
                     
                     <div class="table">
                        <p class="title"><b>Options</b></p>
                        <div class="table-contents">
                           <table id="w228aac19c23b5c19b5">
                              
                              <tr>
                                 
                                 <th>Name</th>
                                 
                                 <th>Description</th>
                                 
                                 
                              </tr>
                              
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>
                                       <code class="code">--recent-hours=N</code>
                                       
                                    </p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Specifies the number of recent hours to report on, as represented by
                                       <code class="code">N</code> where N is an integer. 
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>
                                       <code class="code">--aws-credential-file=PATH
                                          </code>
                                       
                                    </p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Provides the location of the file containing AWS credentials. </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>
                                       <code class="code">--aws-access-key-id=VALUE
                                          </code>
                                       
                                    </p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Specifies the AWS access key ID to use to identify the caller. Must be used
                                       together with the <code class="code">--aws-secret-key</code> option. Do not use this option with
                                       the <code class="code">--aws-credential-file</code> option. 
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>
                                       <code class="code">--aws-secret-key=VALUE </code>
                                       
                                    </p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Specifies the AWS secret access key to use to sign the request to CloudWatch.
                                       Must be used together with the <code class="code">--aws-access-key-id</code> option. Do not use
                                       this option with <code class="code">--aws-credential-file</code> option. 
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>
                                       <code class="code">--aws-iam-role=VALUE</code>
                                       
                                    </p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Specifies the IAM role used to provide AWS credentials. The value
                                       <code class="code">=VALUE</code> is required. If no credentials are specified, the default IAM
                                       role associated with the EC2 instance is applied. Only one IAM role can be used. If
                                       no IAM roles are found, or if more than one IAM role is found, the script will
                                       return an error.
                                    </p>
                                    
                                    <p>Do not use this option with the <code class="code">--aws-credential-file</code>,
                                       <code class="code">--aws-access-key-id</code>, or <code class="code">--aws-secret-key</code>
                                       parameters.
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>
                                       <code class="code">--verify </code>
                                       
                                    </p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Performs a test run of the script that collects the metrics, prepares a
                                       complete HTTP request, but does not actually call CloudWatch to report the data.
                                       This option also checks that credentials are provided. When run in verbose mode,
                                       this option outputs the metrics that will be sent to CloudWatch. 
                                    </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>
                                       <code class="code">--verbose </code>
                                       
                                    </p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Displays detailed information about what the script is doing. </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>
                                       <code class="code">--help </code>
                                       
                                    </p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Displays usage information. </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    
                                    <p>
                                       <code class="code">--version </code>
                                       
                                    </p>
                                    
                                 </td>
                                 
                                 <td>
                                    
                                    <p>Displays the version number of the script. </p>
                                    
                                 </td>
                                 
                              </tr>
                              
                           </table>
                        </div>
                     </div>
                     
                     
                     
                     <h4 id="using_get_examples">Example</h4>
                     
                     
                     <p>To get utilization statistics for the last 12 hours, run the following command:</p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">./mon-get-instance-stats.pl --recent-hours=12</code></pre>
                     
                     <p>The following is an example response:</p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">Instance metric statistics for the last 12 hours.

CPU Utilization
    Average: 1.06%, Minimum: 0.00%, Maximum: 15.22%

Memory Utilization
    Average: 6.84%, Minimum: 6.82%, Maximum: 6.89%

Swap Utilization
    Average: N/A, Minimum: N/A, Maximum: N/A

Disk Space Utilization on /dev/xvda1 mounted as /
    Average: 9.69%, Minimum: 9.69%, Maximum: 9.69%</code></pre>
                     
                     
                     
                     
                     
                     <h3 id="script_viewmetrics">Viewing Your Custom Metrics in the Console</h3>
                     
                     
                     <p>After you successfully run the <code class="code">mon-put-instance-data.pl</code> script, you can view
                        your custom metrics in the Amazon CloudWatch console.
                     </p>
                     
                     <p class="title"><b>To view custom metrics</b></p>
                     <ol>
                        <li>
                           
                           <p>Run <code class="code">mon-put-instance-data.pl</code> as described previously.
                           </p>
                           
                        </li>
                        <li>
                           <p>Open the CloudWatch console at
                              <a href="https://console.aws.amazon.com/cloudwatch/" target="_blank">https://console.aws.amazon.com/cloudwatch/</a>.
                           </p>
                        </li>
                        <li>
                           
                           <p>Choose <b>View Metrics</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Viewing</b>, your custom metrics posted by the script are
                              displayed with the prefix <code class="code">System/Linux</code>.
                           </p>
                           
                        </li>
                     </ol>
                     
                     
                     
                     
                     <h3 id="mon-script-troubleshooting">Troubleshooting</h3>
                     
                     
                     <p>The <b>CloudWatchClient.pm</b> module caches instance metadata locally. If
                        you create an AMI from an instance where you have run the monitoring scripts, any
                        instances
                        launched from the AMI within the cache TTL (default: six hours, 24 hours for Auto
                        Scaling groups) emit
                        metrics using the instance ID of the original instance. After the cache TTL time period
                        passes, the script retrieves fresh data and the monitoring scripts use the instance
                        ID of the
                        current instance. To immediately correct this, remove the cached data using the following
                        command:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>rm /var/tmp/aws-mon/<em class="replaceable"><code>instance-id</code></em></code></strong></code></pre>
                     
                     
                     </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be enabled. Please refer to your browser's
                                    Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="automating_with_cloudwatch_events.html">« Previous </a><a class="awstoc" accesskey="n" href="EC2_Network_and_Security.html">Next »</a></div>
                     <div id="copyright-main-footer">© 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="New CloudWatch Agent Available"><a class="pagetoc" href="#new-cloudwatch-agent">New CloudWatch Agent Available</a></li>
                        <li class="pagetoc" name="CloudWatch Monitoring Scripts"><a class="pagetoc" href="#monitoring-scripts-intro">CloudWatch Monitoring Scripts</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <div id="cookie-notice">
         <div class="cookie-notice-text">We use cookies to provide and improve our services. By using our site, you consent
            to cookies. <a href="http://aws.amazon.com/legal/cookies">Learn more</a></div>
      </div>
      <div id="footer">
         <div id="footer_short_fb" class="hide" title="Feedback"><a target="_blank" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=EC2&amp;topic_url=http://docs.aws.amazon.com/en_us/AWSEC2/latest/UserGuide/mon-scripts.html&amp;hidden_guide_name=User Guide for Linux Instances&amp;hidden_api_version=&amp;hidden_file_name=mon-scripts"><i class="awsdocs-footer-text fa fa-envelope-o"></i></a></div>
         <div id="footer_toggle" class="mediaobject">
            <div id="footer_toggle_img" class="awsdocs-footer-text fa fa-caret-down"></div>
            <div id="footer_toggle_img_collapse" class="hide awsdocs-footer-text fa fa-caret-right"></div>
         </div>
         <div id="footer-left"><a class="awsdocs-footer-text" target="_top" href="http://aws.amazon.com/terms">Terms of Use</a><span class="awsdocs-footer-text"> | </span><a class="awsdocs-footer-text" target="_top" href="http://aws.amazon.com/privacy">Privacy</a><span class="awsdocs-footer-text"> | </span><span class="awsdocs-footer-text">© 2018, Amazon Web Services, Inc. or its affiliates. All rights reserved.</span></div>
         <div id="footer-right">
            <div id="feedback">
               <div id="forums"><a id="forum_link" target="_blank" href="http://forums.aws.amazon.com/forum.jspa?forumID=30" class="awsdocs-footer-text">Have a question? Try the Forums.</a></div>
               <div id="feedback-message" class="awsdocs-footer-text">Did this page help you?</div>
               <div id="feedback-yesno-buttons"><a class="awstoc btn btn-default" target="_blank" href="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/AWSEC2/latest/UserGuide/mon-scripts.html">Yes</a><a class="awstoc btn btn-default" target="_blank" href="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/AWSEC2/latest/UserGuide/mon-scripts.html">No</a></div>
               <div id="feedback-feedback-button"><a class="awstoc btn btn-default" target="_blank" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=EC2&amp;topic_url=http://docs.aws.amazon.com/en_us/AWSEC2/latest/UserGuide/mon-scripts.html&amp;hidden_guide_name=User Guide for Linux Instances&amp;hidden_api_version=&amp;hidden_file_name=mon-scripts">Feedback</a></div>
            </div>
         </div>
      </div>
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='Amazon Elastic Compute Cloud';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='User Guide for Linux Instances';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   </body>
</html>