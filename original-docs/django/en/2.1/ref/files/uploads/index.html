<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="ROBOTS" content="ALL" />
    <meta http-equiv="imagetoolbar" content="no" />
    <meta name="MSSmartTagsPreventParsing" content="true" />
    <meta name="Copyright" content="Django Software Foundation" />
    <meta name="keywords" content="Python, Django, framework, open-source" />
    <meta name="description" content="" />

    <!-- Favicons -->
    <link rel="apple-touch-icon" href="/s/img/icon-touch.e4872c4da341.png">
    <link rel="icon" sizes="192x192" href="/s/img/icon-touch.e4872c4da341.png">
    <link rel="shortcut icon" href="/s/img/favicon.6dbf28c0650e.ico">
    <meta name="msapplication-TileColor" content="#113228">
    <meta name="msapplication-TileImage" content="/s/img/icon-tile.b01ac0ef9f67.png">

    <title>Uploaded Files and Upload Handlers | Django documentation | Django</title>

    <link rel="stylesheet" href="/s/css/output.beb34528fd55.css" >
    <script src="/s/js/lib/webfontloader/webfontloader.e75218f5f090.js"></script>
    <script>
    WebFont.load({
      custom: {
        families: ['FontAwesome', 'Fira+Mono'],
      },
      google: {
        families: ['Roboto:400italic,700italic,300,700,400:latin'
        ]
      },
      classes: false,
      events: false,
      timeout: 1000
    });
    </script>
    <script src="/s/js/lib/modernizr.3b36762e418a.js"></script>
    
  
    
      
    
  
  <link rel="canonical" href="https://docs.djangoproject.com/en/2.1/ref/files/uploads/">
  
    
        
          
        
        
        <link rel="alternate"
           hreflang="el"
           href="https://docs.djangoproject.com/el/2.1/ref/files/uploads/">
    
        
          
        
        
        <link rel="alternate"
           hreflang="x-default"
           href="https://docs.djangoproject.com/en/2.1/ref/files/uploads/">
        
        <link rel="alternate"
           hreflang="en"
           href="https://docs.djangoproject.com/en/2.1/ref/files/uploads/">
    
        
          
        
        
        <link rel="alternate"
           hreflang="es"
           href="https://docs.djangoproject.com/es/2.1/ref/files/uploads/">
    
        
          
        
        
        <link rel="alternate"
           hreflang="fr"
           href="https://docs.djangoproject.com/fr/2.1/ref/files/uploads/">
    
        
          
        
        
        <link rel="alternate"
           hreflang="id"
           href="https://docs.djangoproject.com/id/2.1/ref/files/uploads/">
    
        
          
        
        
        <link rel="alternate"
           hreflang="ja"
           href="https://docs.djangoproject.com/ja/2.1/ref/files/uploads/">
    
        
          
        
        
        <link rel="alternate"
           hreflang="ko"
           href="https://docs.djangoproject.com/ko/2.1/ref/files/uploads/">
    
        
          
        
        
        <link rel="alternate"
           hreflang="pl"
           href="https://docs.djangoproject.com/pl/2.1/ref/files/uploads/">
    
        
          
        
        
        <link rel="alternate"
           hreflang="pt-br"
           href="https://docs.djangoproject.com/pt-br/2.1/ref/files/uploads/">
    
        
          
        
        
        <link rel="alternate"
           hreflang="zh-hans"
           href="https://docs.djangoproject.com/zh-hans/2.1/ref/files/uploads/">
    
  

  <link rel="search"
        type="application/opensearchdescription+xml"
        href="https://docs.djangoproject.com/en/2.1/search/description/"
        title="Django documentation">

  </head>

  <body id="generic" class="">

    <div role="banner" id="top">
  <div class="container">
    <a class="logo" href="https://www.djangoproject.com/">Django</a>
    <p class="meta">The web framework for perfectionists with deadlines.</p>
    <div role="navigation">
      <ul>
        <li>
          <a href="https://www.djangoproject.com/start/overview/">Overview</a>
        </li>
        <li>
          <a href="https://www.djangoproject.com/download/">Download</a>
        </li>
        <li class="active">
          <a href="https://docs.djangoproject.com/">Documentation</a>
        </li>
        <li>
          <a href="https://www.djangoproject.com/weblog/">News</a>
        </li>
        <li>
          <a href="https://www.djangoproject.com/community/">Community</a>
        </li>
        <li>
          <a href="https://code.djangoproject.com/">Code</a>
        </li>
        <li>
          <a href="https://www.djangoproject.com/foundation/">About</a>
        </li>
        <li>
          <a href="https://www.djangoproject.com/fundraising/">&#9829; Donate</a>
        </li>
      </ul>
    </div>
  </div>
</div>


    <div class="copy-banner">
      <div class="container">
        
  <h1><a href="https://docs.djangoproject.com/en/2.1/">Documentation</a></h1>

      </div>
    </div>
    <div id="billboard"></div>

    <div class="container sidebar-right">
      <div role="main">

        
          
        

        
<div id="version-switcher">
  <ul id="doc-languages" class="language-switcher">
  
  
  <li class="other">
    
      
    
    <a href="https://docs.djangoproject.com/el/2.1/ref/files/uploads/">el</a>
  </li>
  
  
  
  
  
  <li class="other">
    
      
    
    <a href="https://docs.djangoproject.com/es/2.1/ref/files/uploads/">es</a>
  </li>
  
  
  
  <li class="other">
    
      
    
    <a href="https://docs.djangoproject.com/fr/2.1/ref/files/uploads/">fr</a>
  </li>
  
  
  
  <li class="other">
    
      
    
    <a href="https://docs.djangoproject.com/id/2.1/ref/files/uploads/">id</a>
  </li>
  
  
  
  <li class="other">
    
      
    
    <a href="https://docs.djangoproject.com/ja/2.1/ref/files/uploads/">ja</a>
  </li>
  
  
  
  <li class="other">
    
      
    
    <a href="https://docs.djangoproject.com/ko/2.1/ref/files/uploads/">ko</a>
  </li>
  
  
  
  <li class="other">
    
      
    
    <a href="https://docs.djangoproject.com/pl/2.1/ref/files/uploads/">pl</a>
  </li>
  
  
  
  <li class="other">
    
      
    
    <a href="https://docs.djangoproject.com/pt-br/2.1/ref/files/uploads/">pt-br</a>
  </li>
  
  
  
  <li class="other">
    
      
    
    <a href="https://docs.djangoproject.com/zh-hans/2.1/ref/files/uploads/">zh-hans</a>
  </li>
  
  
    <li class="current"
        title="Click on the links on the left to switch to another language.">
      <span>Language: <strong>en</strong></span>
    </li>
  </ul>

  
  <ul id="doc-versions" class="version-switcher">
    
    
    <li class="other">
      
        
      
      <a href="https://docs.djangoproject.com/en/1.7/ref/files/uploads/">1.7</a>
    </li>
    
    
    
    <li class="other">
      
        
      
      <a href="https://docs.djangoproject.com/en/1.8/ref/files/uploads/">1.8</a>
    </li>
    
    
    
    <li class="other">
      
        
      
      <a href="https://docs.djangoproject.com/en/1.9/ref/files/uploads/">1.9</a>
    </li>
    
    
    
    <li class="other">
      
        
      
      <a href="https://docs.djangoproject.com/en/1.10/ref/files/uploads/">1.10</a>
    </li>
    
    
    
    <li class="other">
      
        
      
      <a href="https://docs.djangoproject.com/en/1.11/ref/files/uploads/">1.11</a>
    </li>
    
    
    
    <li class="other">
      
        
      
      <a href="https://docs.djangoproject.com/en/2.0/ref/files/uploads/">2.0</a>
    </li>
    
    
    
    
    
    <li class="other">
      
        
      
      <a href="https://docs.djangoproject.com/en/dev/ref/files/uploads/">dev</a>
    </li>
    
    
    <li class="current"
        title="This document describes Django 2.1. Click on the links on the left to see other versions.">
       <span>Documentation version:
         <strong>2.1</strong>
       </span>
    </li>
  </ul>
</div>


<div id="docs-content">
<div class="section" id="s-module-django.core.files.uploadedfile">
<span id="s-uploaded-files-and-upload-handlers"></span><span id="module-django.core.files.uploadedfile"></span><span id="uploaded-files-and-upload-handlers"></span><h1>Uploaded Files and Upload Handlers<a class="headerlink" href="#module-django.core.files.uploadedfile" title="Permalink to this headline">¶</a></h1>
<div class="section" id="s-uploaded-files">
<span id="uploaded-files"></span><h2>Uploaded files<a class="headerlink" href="#uploaded-files" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="django.core.files.uploadedfile.UploadedFile">
<em class="property">class </em><code class="descname">UploadedFile</code><a class="reference internal" href="../../../_modules/django/core/files/uploadedfile/#UploadedFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.core.files.uploadedfile.UploadedFile" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>During file uploads, the actual file data is stored in <a class="reference internal" href="../../request-response/#django.http.HttpRequest.FILES" title="django.http.HttpRequest.FILES"><code class="xref py py-attr docutils literal notranslate"><span class="pre">request.FILES</span></code></a>. Each entry in this dictionary is an
<code class="docutils literal notranslate"><span class="pre">UploadedFile</span></code> object (or a subclass) – a simple wrapper around an uploaded
file. You’ll usually use one of these methods to access the uploaded content:</p>
<dl class="method">
<dt id="django.core.files.uploadedfile.UploadedFile.read">
<code class="descclassname">UploadedFile.</code><code class="descname">read</code>()<a class="headerlink" href="#django.core.files.uploadedfile.UploadedFile.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the entire uploaded data from the file. Be careful with this method:
if the uploaded file is huge it can overwhelm your system if you try to
read it into memory. You’ll probably want to use <code class="docutils literal notranslate"><span class="pre">chunks()</span></code> instead; see
below.</p>
</dd></dl>

<dl class="method">
<dt id="django.core.files.uploadedfile.UploadedFile.multiple_chunks">
<code class="descclassname">UploadedFile.</code><code class="descname">multiple_chunks</code>(<em>chunk_size=None</em>)<a class="headerlink" href="#django.core.files.uploadedfile.UploadedFile.multiple_chunks" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if the uploaded file is big enough to require reading in
multiple chunks. By default this will be any file larger than 2.5 megabytes,
but that’s configurable; see below.</p>
</dd></dl>

<dl class="method">
<dt id="django.core.files.uploadedfile.UploadedFile.chunks">
<code class="descclassname">UploadedFile.</code><code class="descname">chunks</code>(<em>chunk_size=None</em>)<a class="headerlink" href="#django.core.files.uploadedfile.UploadedFile.chunks" title="Permalink to this definition">¶</a></dt>
<dd><p>A generator returning chunks of the file. If <code class="docutils literal notranslate"><span class="pre">multiple_chunks()</span></code> is
<code class="docutils literal notranslate"><span class="pre">True</span></code>, you should use this method in a loop instead of <code class="docutils literal notranslate"><span class="pre">read()</span></code>.</p>
<p>In practice, it’s often easiest simply to use <code class="docutils literal notranslate"><span class="pre">chunks()</span></code> all the time.
Looping over <code class="docutils literal notranslate"><span class="pre">chunks()</span></code> instead of using <code class="docutils literal notranslate"><span class="pre">read()</span></code> ensures that large
files don’t overwhelm your system’s memory.</p>
</dd></dl>

<p>Here are some useful attributes of <code class="docutils literal notranslate"><span class="pre">UploadedFile</span></code>:</p>
<dl class="attribute">
<dt id="django.core.files.uploadedfile.UploadedFile.name">
<code class="descclassname">UploadedFile.</code><code class="descname">name</code><a class="headerlink" href="#django.core.files.uploadedfile.UploadedFile.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the uploaded file (e.g. <code class="docutils literal notranslate"><span class="pre">my_file.txt</span></code>).</p>
</dd></dl>

<dl class="attribute">
<dt id="django.core.files.uploadedfile.UploadedFile.size">
<code class="descclassname">UploadedFile.</code><code class="descname">size</code><a class="headerlink" href="#django.core.files.uploadedfile.UploadedFile.size" title="Permalink to this definition">¶</a></dt>
<dd><p>The size, in bytes, of the uploaded file.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.core.files.uploadedfile.UploadedFile.content_type">
<code class="descclassname">UploadedFile.</code><code class="descname">content_type</code><a class="headerlink" href="#django.core.files.uploadedfile.UploadedFile.content_type" title="Permalink to this definition">¶</a></dt>
<dd><p>The content-type header uploaded with the file (e.g. <em class="mimetype">text/plain</em>
or <em class="mimetype">application/pdf</em>). Like any data supplied by the user, you
shouldn’t trust that the uploaded file is actually this type. You’ll still
need to validate that the file contains the content that the content-type
header claims – “trust but verify.”</p>
</dd></dl>

<dl class="attribute">
<dt id="django.core.files.uploadedfile.UploadedFile.content_type_extra">
<code class="descclassname">UploadedFile.</code><code class="descname">content_type_extra</code><a class="headerlink" href="#django.core.files.uploadedfile.UploadedFile.content_type_extra" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary containing extra parameters passed to the <code class="docutils literal notranslate"><span class="pre">content-type</span></code>
header. This is typically provided by services, such as Google App Engine,
that intercept and handle file uploads on your behalf. As a result your
handler may not receive the uploaded file content, but instead a URL or
other pointer to the file. (see <a class="reference external" href="https://www.ietf.org/rfc/rfc2388.txt">RFC 2388</a> section 5.3).</p>
</dd></dl>

<dl class="attribute">
<dt id="django.core.files.uploadedfile.UploadedFile.charset">
<code class="descclassname">UploadedFile.</code><code class="descname">charset</code><a class="headerlink" href="#django.core.files.uploadedfile.UploadedFile.charset" title="Permalink to this definition">¶</a></dt>
<dd><p>For <em class="mimetype">text/*</em> content-types, the character set (i.e. <code class="docutils literal notranslate"><span class="pre">utf8</span></code>)
supplied by the browser. Again, “trust but verify” is the best policy here.</p>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Like regular Python files, you can read the file line-by-line simply by
iterating over the uploaded file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">uploadedfile</span><span class="p">:</span>
    <span class="n">do_something_with</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</pre></div>
</div>
<p class="last">Lines are split using <a class="reference external" href="https://www.python.org/dev/peps/pep-0278">universal newlines</a>. The following are recognized
as ending a line: the Unix end-of-line convention <code class="docutils literal notranslate"><span class="pre">'\n'</span></code>, the Windows
convention <code class="docutils literal notranslate"><span class="pre">'\r\n'</span></code>, and the old Macintosh convention <code class="docutils literal notranslate"><span class="pre">'\r'</span></code>.</p>
</div>
<p>Subclasses of <code class="docutils literal notranslate"><span class="pre">UploadedFile</span></code> include:</p>
<dl class="class">
<dt id="django.core.files.uploadedfile.TemporaryUploadedFile">
<em class="property">class </em><code class="descname">TemporaryUploadedFile</code><a class="reference internal" href="../../../_modules/django/core/files/uploadedfile/#TemporaryUploadedFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.core.files.uploadedfile.TemporaryUploadedFile" title="Permalink to this definition">¶</a></dt>
<dd><p>A file uploaded to a temporary location (i.e. stream-to-disk). This class
is used by the
<a class="reference internal" href="#django.core.files.uploadhandler.TemporaryFileUploadHandler" title="django.core.files.uploadhandler.TemporaryFileUploadHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">TemporaryFileUploadHandler</span></code></a>. In
addition to the methods from <a class="reference internal" href="#django.core.files.uploadedfile.UploadedFile" title="django.core.files.uploadedfile.UploadedFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">UploadedFile</span></code></a>, it has one additional
method:</p>
</dd></dl>

<dl class="method">
<dt id="django.core.files.uploadedfile.TemporaryUploadedFile.temporary_file_path">
<code class="descclassname">TemporaryUploadedFile.</code><code class="descname">temporary_file_path</code>()<a class="reference internal" href="../../../_modules/django/core/files/uploadedfile/#TemporaryUploadedFile.temporary_file_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.core.files.uploadedfile.TemporaryUploadedFile.temporary_file_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the full path to the temporary uploaded file.</p>
</dd></dl>

<dl class="class">
<dt id="django.core.files.uploadedfile.InMemoryUploadedFile">
<em class="property">class </em><code class="descname">InMemoryUploadedFile</code><a class="reference internal" href="../../../_modules/django/core/files/uploadedfile/#InMemoryUploadedFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.core.files.uploadedfile.InMemoryUploadedFile" title="Permalink to this definition">¶</a></dt>
<dd><p>A file uploaded into memory (i.e. stream-to-memory). This class is used
by the <a class="reference internal" href="#django.core.files.uploadhandler.MemoryFileUploadHandler" title="django.core.files.uploadhandler.MemoryFileUploadHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">MemoryFileUploadHandler</span></code></a>.</p>
</dd></dl>

</div>
<div class="section" id="s-module-django.core.files.uploadhandler">
<span id="s-built-in-upload-handlers"></span><span id="module-django.core.files.uploadhandler"></span><span id="built-in-upload-handlers"></span><h2>Built-in upload handlers<a class="headerlink" href="#module-django.core.files.uploadhandler" title="Permalink to this headline">¶</a></h2>
<p>Together the <a class="reference internal" href="#django.core.files.uploadhandler.MemoryFileUploadHandler" title="django.core.files.uploadhandler.MemoryFileUploadHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">MemoryFileUploadHandler</span></code></a> and
<a class="reference internal" href="#django.core.files.uploadhandler.TemporaryFileUploadHandler" title="django.core.files.uploadhandler.TemporaryFileUploadHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">TemporaryFileUploadHandler</span></code></a> provide Django’s default file upload
behavior of reading small files into memory and large ones onto disk. They
are located in <code class="docutils literal notranslate"><span class="pre">django.core.files.uploadhandler</span></code>.</p>
<dl class="class">
<dt id="django.core.files.uploadhandler.MemoryFileUploadHandler">
<em class="property">class </em><code class="descname">MemoryFileUploadHandler</code><a class="reference internal" href="../../../_modules/django/core/files/uploadhandler/#MemoryFileUploadHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.core.files.uploadhandler.MemoryFileUploadHandler" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>File upload handler to stream uploads into memory (used for small files).</p>
<dl class="class">
<dt id="django.core.files.uploadhandler.TemporaryFileUploadHandler">
<em class="property">class </em><code class="descname">TemporaryFileUploadHandler</code><a class="reference internal" href="../../../_modules/django/core/files/uploadhandler/#TemporaryFileUploadHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.core.files.uploadhandler.TemporaryFileUploadHandler" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Upload handler that streams data into a temporary file using
<a class="reference internal" href="#django.core.files.uploadedfile.TemporaryUploadedFile" title="django.core.files.uploadedfile.TemporaryUploadedFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">TemporaryUploadedFile</span></code></a>.</p>
</div>
<div class="section" id="s-writing-custom-upload-handlers">
<span id="s-custom-upload-handlers"></span><span id="writing-custom-upload-handlers"></span><span id="custom-upload-handlers"></span><h2>Writing custom upload handlers<a class="headerlink" href="#writing-custom-upload-handlers" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="django.core.files.uploadhandler.FileUploadHandler">
<em class="property">class </em><code class="descname">FileUploadHandler</code><a class="reference internal" href="../../../_modules/django/core/files/uploadhandler/#FileUploadHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.core.files.uploadhandler.FileUploadHandler" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>All file upload handlers should be subclasses of
<code class="docutils literal notranslate"><span class="pre">django.core.files.uploadhandler.FileUploadHandler</span></code>. You can define upload
handlers wherever you wish.</p>
<div class="section" id="s-required-methods">
<span id="required-methods"></span><h3>Required methods<a class="headerlink" href="#required-methods" title="Permalink to this headline">¶</a></h3>
<p>Custom file upload handlers <strong>must</strong> define the following methods:</p>
<dl class="method">
<dt id="django.core.files.uploadhandler.FileUploadHandler.receive_data_chunk">
<code class="descclassname">FileUploadHandler.</code><code class="descname">receive_data_chunk</code>(<em>raw_data</em>, <em>start</em>)<a class="reference internal" href="../../../_modules/django/core/files/uploadhandler/#FileUploadHandler.receive_data_chunk"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.core.files.uploadhandler.FileUploadHandler.receive_data_chunk" title="Permalink to this definition">¶</a></dt>
<dd><p>Receives a “chunk” of data from the file upload.</p>
<p><code class="docutils literal notranslate"><span class="pre">raw_data</span></code> is a byte string containing the uploaded data.</p>
<p><code class="docutils literal notranslate"><span class="pre">start</span></code> is the position in the file where this <code class="docutils literal notranslate"><span class="pre">raw_data</span></code> chunk
begins.</p>
<p>The data you return will get fed into the subsequent upload handlers’
<code class="docutils literal notranslate"><span class="pre">receive_data_chunk</span></code> methods. In this way, one handler can be a
“filter” for other handlers.</p>
<p>Return <code class="docutils literal notranslate"><span class="pre">None</span></code> from <code class="docutils literal notranslate"><span class="pre">receive_data_chunk</span></code> to short-circuit remaining
upload handlers from getting this chunk. This is useful if you’re
storing the uploaded data yourself and don’t want future handlers to
store a copy of the data.</p>
<p>If you raise a <code class="docutils literal notranslate"><span class="pre">StopUpload</span></code> or a <code class="docutils literal notranslate"><span class="pre">SkipFile</span></code> exception, the upload
will abort or the file will be completely skipped.</p>
</dd></dl>

<dl class="method">
<dt id="django.core.files.uploadhandler.FileUploadHandler.file_complete">
<code class="descclassname">FileUploadHandler.</code><code class="descname">file_complete</code>(<em>file_size</em>)<a class="reference internal" href="../../../_modules/django/core/files/uploadhandler/#FileUploadHandler.file_complete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.core.files.uploadhandler.FileUploadHandler.file_complete" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when a file has finished uploading.</p>
<p>The handler should return an <code class="docutils literal notranslate"><span class="pre">UploadedFile</span></code> object that will be stored
in <code class="docutils literal notranslate"><span class="pre">request.FILES</span></code>. Handlers may also return <code class="docutils literal notranslate"><span class="pre">None</span></code> to indicate that
the <code class="docutils literal notranslate"><span class="pre">UploadedFile</span></code> object should come from subsequent upload handlers.</p>
</dd></dl>

</div>
<div class="section" id="s-optional-methods">
<span id="optional-methods"></span><h3>Optional methods<a class="headerlink" href="#optional-methods" title="Permalink to this headline">¶</a></h3>
<p>Custom upload handlers may also define any of the following optional methods or
attributes:</p>
<dl class="attribute">
<dt id="django.core.files.uploadhandler.FileUploadHandler.chunk_size">
<code class="descclassname">FileUploadHandler.</code><code class="descname">chunk_size</code><a class="headerlink" href="#django.core.files.uploadhandler.FileUploadHandler.chunk_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Size, in bytes, of the “chunks” Django should store into memory and feed
into the handler. That is, this attribute controls the size of chunks
fed into <code class="docutils literal notranslate"><span class="pre">FileUploadHandler.receive_data_chunk</span></code>.</p>
<p>For maximum performance the chunk sizes should be divisible by <code class="docutils literal notranslate"><span class="pre">4</span></code> and
should not exceed 2 GB (2<sup>31</sup> bytes) in size. When there are
multiple chunk sizes provided by multiple handlers, Django will use the
smallest chunk size defined by any handler.</p>
<p>The default is 64*2<sup>10</sup> bytes, or 64 KB.</p>
</dd></dl>

<dl class="method">
<dt id="django.core.files.uploadhandler.FileUploadHandler.new_file">
<code class="descclassname">FileUploadHandler.</code><code class="descname">new_file</code>(<em>field_name</em>, <em>file_name</em>, <em>content_type</em>, <em>content_length</em>, <em>charset</em>, <em>content_type_extra</em>)<a class="reference internal" href="../../../_modules/django/core/files/uploadhandler/#FileUploadHandler.new_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.core.files.uploadhandler.FileUploadHandler.new_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Callback signaling that a new file upload is starting. This is called
before any data has been fed to any upload handlers.</p>
<p><code class="docutils literal notranslate"><span class="pre">field_name</span></code> is a string name of the file <code class="docutils literal notranslate"><span class="pre">&lt;input&gt;</span></code> field.</p>
<p><code class="docutils literal notranslate"><span class="pre">file_name</span></code> is the filename provided by the browser.</p>
<p><code class="docutils literal notranslate"><span class="pre">content_type</span></code> is the MIME type provided by the browser – E.g.
<code class="docutils literal notranslate"><span class="pre">'image/jpeg'</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">content_length</span></code> is the length of the image given by the browser.
Sometimes this won’t be provided and will be <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">charset</span></code> is the character set (i.e. <code class="docutils literal notranslate"><span class="pre">utf8</span></code>) given by the browser.
Like <code class="docutils literal notranslate"><span class="pre">content_length</span></code>, this sometimes won’t be provided.</p>
<p><code class="docutils literal notranslate"><span class="pre">content_type_extra</span></code> is extra information about the file from the
<code class="docutils literal notranslate"><span class="pre">content-type</span></code> header. See <a class="reference internal" href="#django.core.files.uploadedfile.UploadedFile.content_type_extra" title="django.core.files.uploadedfile.UploadedFile.content_type_extra"><code class="xref py py-attr docutils literal notranslate"><span class="pre">UploadedFile.content_type_extra</span></code></a>.</p>
<p>This method may raise a <code class="docutils literal notranslate"><span class="pre">StopFutureHandlers</span></code> exception to prevent
future handlers from handling this file.</p>
</dd></dl>

<dl class="method">
<dt id="django.core.files.uploadhandler.FileUploadHandler.upload_complete">
<code class="descclassname">FileUploadHandler.</code><code class="descname">upload_complete</code>()<a class="reference internal" href="../../../_modules/django/core/files/uploadhandler/#FileUploadHandler.upload_complete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.core.files.uploadhandler.FileUploadHandler.upload_complete" title="Permalink to this definition">¶</a></dt>
<dd><p>Callback signaling that the entire upload (all files) has completed.</p>
</dd></dl>

<dl class="method">
<dt id="django.core.files.uploadhandler.FileUploadHandler.handle_raw_input">
<code class="descclassname">FileUploadHandler.</code><code class="descname">handle_raw_input</code>(<em>input_data</em>, <em>META</em>, <em>content_length</em>, <em>boundary</em>, <em>encoding</em>)<a class="reference internal" href="../../../_modules/django/core/files/uploadhandler/#FileUploadHandler.handle_raw_input"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#django.core.files.uploadhandler.FileUploadHandler.handle_raw_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Allows the handler to completely override the parsing of the raw
HTTP input.</p>
<p><code class="docutils literal notranslate"><span class="pre">input_data</span></code> is a file-like object that supports <code class="docutils literal notranslate"><span class="pre">read()</span></code>-ing.</p>
<p><code class="docutils literal notranslate"><span class="pre">META</span></code> is the same object as <code class="docutils literal notranslate"><span class="pre">request.META</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">content_length</span></code> is the length of the data in <code class="docutils literal notranslate"><span class="pre">input_data</span></code>. Don’t
read more than <code class="docutils literal notranslate"><span class="pre">content_length</span></code> bytes from <code class="docutils literal notranslate"><span class="pre">input_data</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">boundary</span></code> is the MIME boundary for this request.</p>
<p><code class="docutils literal notranslate"><span class="pre">encoding</span></code> is the encoding of the request.</p>
<p>Return <code class="docutils literal notranslate"><span class="pre">None</span></code> if you want upload handling to continue, or a tuple of
<code class="docutils literal notranslate"><span class="pre">(POST,</span> <span class="pre">FILES)</span></code> if you want to return the new data structures suitable
for the request directly.</p>
</dd></dl>

</div>
</div>
</div>

</div>



<div class="browse-horizontal">
  
  <div class="left"><a href="../storage/"><i class="icon icon-chevron-left"></i> File storage API</a></div>
  
  
  <div class="right"><a href="../../forms/">Forms <i class="icon icon-chevron-right"></i></a></div>
  
</div>



        <a href="#top" class="backtotop"><i class="icon icon-chevron-up"></i> Back to Top</a>
      </div>

      
<h1 class="visuallyhidden">Additional Information</h1>
<div role="complementary">
  
  

<form action="https://docs.djangoproject.com/en/2.1/search/" class="search form-input" role="search">
  <label class="visuallyhidden" for="news-search">Search:</label>
    <input type="search" name="q" placeholder="Search 2.1 documentation" id="id_q">

    <button type="submit">
      <i class="icon icon-search"></i>
      <span class="visuallyhidden">Search</span>
    </button>
</form>

  

  


  <div class="fundraising-sidebar">
    <h2>Support Django!</h2>

    <div class="small-heart">
      <img src="/s/img/small-fundraising-heart.d255f6e934e5.png" alt="Support Django!" />
    </div>

    <div class="small-cta">
      <ul class="list-links-small">
        <li><a href="https://www.djangoproject.com/fundraising/">
          Martin Prunell donated to the Django Software Foundation to
          support Django development. Donate today!
        </a></li>
      </ul>
    </div>
  </div>



  
    <h2>Contents</h2>
    
    <ul>
<li><a class="reference internal" href="#">Uploaded Files and Upload Handlers</a><ul>
<li><a class="reference internal" href="#uploaded-files">Uploaded files</a></li>
<li><a class="reference internal" href="#module-django.core.files.uploadhandler">Built-in upload handlers</a></li>
<li><a class="reference internal" href="#writing-custom-upload-handlers">Writing custom upload handlers</a><ul>
<li><a class="reference internal" href="#required-methods">Required methods</a></li>
<li><a class="reference internal" href="#optional-methods">Optional methods</a></li>
</ul>
</li>
</ul>
</li>
</ul>

    
  

  
  <h2>Browse</h2>
  <ul>
    
    
    <li>Prev: <a href="../storage/">File storage API</a></li>
    
    
    <li>Next: <a href="../../forms/">Forms</a></li>
    
    <li><a href="https://docs.djangoproject.com/en/2.1/contents/">Table of contents</a></li>
    
    <li><a href="https://docs.djangoproject.com/en/2.1/genindex/">General Index</a></li>
    
    <li><a href="https://docs.djangoproject.com/en/2.1/py-modindex/">Python Module Index</a></li>
    
    
  </ul>
  

  
  <h2>You are here:</h2>
  <ul>
    <li>
      <a href="https://docs.djangoproject.com/en/2.1/">Django 2.1 documentation</a>
      
      <ul><li><a href="../../">API Reference</a>
      
      <ul><li><a href="../">File handling</a>
      
      <ul><li>Uploaded Files and Upload Handlers</li></ul>
      </li></ul></li></ul>
    </li>
  </ul>
  

  
  <h2 id="getting-help-sidebar">Getting help</h2>
  <dl class="list-links">
    <dt><a href="https://docs.djangoproject.com/en/2.1/faq/">FAQ</a></dt>
    <dd>Try the FAQ — it's got answers to many common questions.</dd>

    <dt><a href="/en/stable/genindex/">Index</a>, <a href="/en/stable/py-modindex/">Module Index</a>, or <a href="/en/stable/contents/">Table of Contents</a></dt>
    <dd>Handy when looking for specific information.</dd>

    <dt><a href="https://groups.google.com/group/django-users/">django-users mailing list</a></dt>
    <dd>Search for information in the archives of the django-users mailing list, or post a question.</dd>

    <dt><a href="irc://irc.freenode.net/django">#django IRC channel</a></dt>
    <dd>Ask a question in the #django IRC channel, or search the IRC logs to see if it’s been asked before.</dd>

    <dt><a href="https://code.djangoproject.com/">Ticket tracker</a></dt>
    <dd>Report bugs with Django or Django documentation in our ticket tracker.</dd>
  </dl>
  

  
  <h2>Download:</h2>
  <p>
    Offline (Django 2.1):
    <a href="/m/docs/django-docs-2.1-en.zip">HTML</a> |
    <a href="https://media.readthedocs.org/pdf/django/2.1.x/django.pdf">PDF</a> |
    <a href="https://media.readthedocs.org/epub/django/2.1.x/django.epub">ePub</a>
    <br>
    <span class="quiet">
      Provided by <a href="https://readthedocs.org/">Read the Docs</a>.
    </span>
  </p>
  
</div>

      

    </div>

     
     

    
    
    

    
      
<div role="contentinfo">
  <div class="subfooter">
    <div class="container">
      <h1 class="visuallyhidden">Django Links</h1>

      <div class="col learn">
        <h2>Learn More</h2>
        <ul>
          <li><a href="https://www.djangoproject.com/start/overview/">About Django</a></li>
          
          <li><a href="https://www.djangoproject.com/start/">Getting Started with Django</a></li>
          <li><a href="https://docs.djangoproject.com/en/dev/internals/organization/">Team Organization</a></li>
          <li><a href="https://www.djangoproject.com/foundation/">Django Software Foundation</a></li>
          <li><a href="https://www.djangoproject.com/conduct/">Code of Conduct</a></li>
          <li><a href="https://www.djangoproject.com/diversity/">Diversity Statement</a></li>
        </ul>
      </div>

      <div class="col involved">
        <h2>Get Involved</h2>
        <ul>
          <li><a href="https://www.djangoproject.com/community/">Join a Group</a></li>
          <li><a href="https://docs.djangoproject.com/en/dev/internals/contributing/">Contribute to Django</a></li>
          <li><a href="https://docs.djangoproject.com/en/dev/internals/contributing/bugs-and-features/">Submit a Bug</a></li>
          <li><a href="https://docs.djangoproject.com/en/dev/internals/security/#reporting-security-issues">Report a Security Issue</a></li>
        </ul>
      </div>

      <div class="col follow last-child">
        <h2>Follow Us</h2>
        <ul>
          <li><a href="https://github.com/django">GitHub</a></li>
          <li><a href="https://twitter.com/djangoproject">Twitter</a></li>
          <li><a href="https://www.djangoproject.com/rss/weblog/">News RSS</a></li>
          <li><a href="https://groups.google.com/forum/#!forum/django-users">Django Users Mailing List</a></li>
        </ul>
      </div>

    </div>
  </div>

  <div class="footer">
    <div class="container">
      <div class="footer-logo">
        <a class="logo" href="https://www.djangoproject.com/">Django</a>
      </div>
      <ul class="thanks">
        <li>
          <span>Hosting by</span> <a class="rackspace" href="https://www.rackspace.com">Rackspace</a>
        </li>
        <li class="design"><span>Design by</span> <a class="threespot" href="https://www.threespot.com">Threespot</a> <span class="ampersand">&amp;</span> <a class="andrevv" href="http://andrevv.com/"></a></li>
      </ul>
      <p class="copyright">&copy; 2005-2018
        <a href="https://www.djangoproject.com/foundation/"> Django Software
        Foundation</a> and individual contributors. Django is a
        <a href="https://www.djangoproject.com/trademarks/">registered
        trademark</a> of the Django Software Foundation.
      </p>
    </div>
  </div>

</div>

    

    
    <script>
    function extless(input) {
        return input.replace(/(.*)\.[^.]+$/, '$1');
    }
    var require = {
        shim: {
            'jquery': [],
            'jquery.inview': ["jquery"],
            'jquery.payment': ["jquery"],
            'jquery.flot': ["jquery"],
            'jquery.unveil': ["jquery"],
            'stripe': {
              exports: 'Stripe'
            }
        },
        paths: {
            "jquery": extless("/s/js/lib/jquery/dist/jquery.min.87e69028f78d.js"),
            "jquery.inview": extless("/s/js/lib/jquery.inview/jquery.inview.min.4edba1c65592.js"),
            "jquery.payment": extless("/s/js/lib/jquery.payment/lib/jquery.payment.e99c05ca79ae.js"),
            "jquery.unveil": extless("/s/js/lib/unveil/jquery.unveil.min.ac79eb277093.js"),
            "jquery.flot": extless("/s/js/lib/jquery-flot/jquery.flot.min.9964206e9d7f.js"),
            "clipboard": extless("/s/js/lib/clipboard/dist/clipboard.min.bd70fd596a23.js"),
            "mod/floating-warning": extless("/s/js/mod/floating-warning.a21b2abd2884.js"),
            "mod/list-collapsing": extless("/s/js/mod/list-collapsing.c1a08d3ef9e9.js"),
            "mod/list-feature": extless("/s/js/mod/list-feature.73529480f25b.js"),
            "mod/mobile-menu": extless("/s/js/mod/mobile-menu.841726ee903a.js"),
            "mod/version-switcher": extless("/s/js/mod/version-switcher.c28bb83972bb.js"),
            "mod/search-key": extless("/s/js/mod/search-key.f3c0a6fcfedd.js"),
            "mod/stripe-custom-checkout": extless("/s/js/mod/stripe-custom-checkout.aac1352045b7.js"),
            "mod/stripe-change-card": extless("/s/js/mod/stripe-change-card.682c710317a8.js"),
            "mod/console-tabs": extless("/s/js/mod/console-tabs.70ce882faaf3.js"),
            "stripe-checkout": "https://checkout.stripe.com/checkout",
            "stripe": "https://js.stripe.com/v2/?"  // ? needed due to require.js
        }
    };
    </script>
    <script data-main="/s/js/main.07884ebc4865.js" src="/s/js/lib/require.177879fbe7dd.js"></script>
    



  </body>
</html>
